var lP=Object.defineProperty;var cP=(t,e,n)=>e in t?lP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var L=(t,e,n)=>(cP(t,typeof e!="symbol"?e+"":e,n),n);function rE(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function sE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var oE={exports:{}},Hh={},aE={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kl=Symbol.for("react.element"),uP=Symbol.for("react.portal"),hP=Symbol.for("react.fragment"),dP=Symbol.for("react.strict_mode"),fP=Symbol.for("react.profiler"),pP=Symbol.for("react.provider"),gP=Symbol.for("react.context"),mP=Symbol.for("react.forward_ref"),yP=Symbol.for("react.suspense"),_P=Symbol.for("react.memo"),vP=Symbol.for("react.lazy"),L_=Symbol.iterator;function wP(t){return t===null||typeof t!="object"?null:(t=L_&&t[L_]||t["@@iterator"],typeof t=="function"?t:null)}var lE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cE=Object.assign,uE={};function Oo(t,e,n){this.props=t,this.context=e,this.refs=uE,this.updater=n||lE}Oo.prototype.isReactComponent={};Oo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Oo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hE(){}hE.prototype=Oo.prototype;function em(t,e,n){this.props=t,this.context=e,this.refs=uE,this.updater=n||lE}var tm=em.prototype=new hE;tm.constructor=em;cE(tm,Oo.prototype);tm.isPureReactComponent=!0;var V_=Array.isArray,dE=Object.prototype.hasOwnProperty,nm={current:null},fE={key:!0,ref:!0,__self:!0,__source:!0};function pE(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)dE.call(e,i)&&!fE.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Kl,type:t,key:s,ref:o,props:r,_owner:nm.current}}function EP(t,e){return{$$typeof:Kl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function im(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kl}function xP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var F_=/\/+/g;function nf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xP(""+t.key):e.toString(36)}function gu(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Kl:case uP:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+nf(o,0):i,V_(r)?(n="",t!=null&&(n=t.replace(F_,"$&/")+"/"),gu(r,e,n,"",function(c){return c})):r!=null&&(im(r)&&(r=EP(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(F_,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",V_(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+nf(s,a);o+=gu(s,e,n,l,r)}else if(l=wP(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+nf(s,a++),o+=gu(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pc(t,e,n){if(t==null)return t;var i=[],r=0;return gu(t,i,"","",function(s){return e.call(n,s,r++)}),i}function TP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ht={current:null},mu={transition:null},SP={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:mu,ReactCurrentOwner:nm};de.Children={map:Pc,forEach:function(t,e,n){Pc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pc(t,function(){e++}),e},toArray:function(t){return Pc(t,function(e){return e})||[]},only:function(t){if(!im(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=Oo;de.Fragment=hP;de.Profiler=fP;de.PureComponent=em;de.StrictMode=dP;de.Suspense=yP;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SP;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=cE({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=nm.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)dE.call(e,l)&&!fE.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Kl,type:t.type,key:r,ref:s,props:i,_owner:o}};de.createContext=function(t){return t={$$typeof:gP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pP,_context:t},t.Consumer=t};de.createElement=pE;de.createFactory=function(t){var e=pE.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:mP,render:t}};de.isValidElement=im;de.lazy=function(t){return{$$typeof:vP,_payload:{_status:-1,_result:t},_init:TP}};de.memo=function(t,e){return{$$typeof:_P,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=mu.transition;mu.transition={};try{t()}finally{mu.transition=e}};de.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};de.useCallback=function(t,e){return Ht.current.useCallback(t,e)};de.useContext=function(t){return Ht.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return Ht.current.useDeferredValue(t)};de.useEffect=function(t,e){return Ht.current.useEffect(t,e)};de.useId=function(){return Ht.current.useId()};de.useImperativeHandle=function(t,e,n){return Ht.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return Ht.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return Ht.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return Ht.current.useMemo(t,e)};de.useReducer=function(t,e,n){return Ht.current.useReducer(t,e,n)};de.useRef=function(t){return Ht.current.useRef(t)};de.useState=function(t){return Ht.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return Ht.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return Ht.current.useTransition()};de.version="18.2.0";aE.exports=de;var P=aE.exports;const IP=sE(P),bP=rE({__proto__:null,default:IP},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kP=P,PP=Symbol.for("react.element"),AP=Symbol.for("react.fragment"),RP=Object.prototype.hasOwnProperty,CP=kP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DP={key:!0,ref:!0,__self:!0,__source:!0};function gE(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)RP.call(e,i)&&!DP.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:PP,type:t,key:s,ref:o,props:r,_owner:CP.current}}Hh.Fragment=AP;Hh.jsx=gE;Hh.jsxs=gE;oE.exports=Hh;var E=oE.exports,cp={},mE={exports:{}},un={},yE={exports:{}},_E={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,B){var G=N.length;N.push(B);e:for(;0<G;){var ce=G-1>>>1,we=N[ce];if(0<r(we,B))N[ce]=B,N[G]=we,G=ce;else break e}}function n(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var B=N[0],G=N.pop();if(G!==B){N[0]=G;e:for(var ce=0,we=N.length,kt=we>>>1;ce<kt;){var Re=2*(ce+1)-1,yt=N[Re],Ue=Re+1,Li=N[Ue];if(0>r(yt,G))Ue<we&&0>r(Li,yt)?(N[ce]=Li,N[Ue]=G,ce=Ue):(N[ce]=yt,N[Re]=G,ce=Re);else if(Ue<we&&0>r(Li,G))N[ce]=Li,N[Ue]=G,ce=Ue;else break e}}return B}function r(N,B){var G=N.sortIndex-B.sortIndex;return G!==0?G:N.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,p=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(N){for(var B=n(c);B!==null;){if(B.callback===null)i(c);else if(B.startTime<=N)i(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(c)}}function x(N){if(y=!1,v(N),!p)if(n(l)!==null)p=!0,fe(T);else{var B=n(c);B!==null&&Y(x,B.startTime-N)}}function T(N,B){p=!1,y&&(y=!1,g(b),b=-1),f=!0;var G=d;try{for(v(B),h=n(l);h!==null&&(!(h.expirationTime>B)||N&&!U());){var ce=h.callback;if(typeof ce=="function"){h.callback=null,d=h.priorityLevel;var we=ce(h.expirationTime<=B);B=t.unstable_now(),typeof we=="function"?h.callback=we:h===n(l)&&i(l),v(B)}else i(l);h=n(l)}if(h!==null)var kt=!0;else{var Re=n(c);Re!==null&&Y(x,Re.startTime-B),kt=!1}return kt}finally{h=null,d=G,f=!1}}var w=!1,S=null,b=-1,A=5,M=-1;function U(){return!(t.unstable_now()-M<A)}function H(){if(S!==null){var N=t.unstable_now();M=N;var B=!0;try{B=S(!0,N)}finally{B?ne():(w=!1,S=null)}}else w=!1}var ne;if(typeof m=="function")ne=function(){m(H)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,se=ve.port2;ve.port1.onmessage=H,ne=function(){se.postMessage(null)}}else ne=function(){_(H,0)};function fe(N){S=N,w||(w=!0,ne())}function Y(N,B){b=_(function(){N(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,fe(T))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(N){switch(d){case 1:case 2:case 3:var B=3;break;default:B=d}var G=d;d=B;try{return N()}finally{d=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,B){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var G=d;d=N;try{return B()}finally{d=G}},t.unstable_scheduleCallback=function(N,B,G){var ce=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ce+G:ce):G=ce,N){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=G+we,N={id:u++,callback:B,priorityLevel:N,startTime:G,expirationTime:we,sortIndex:-1},G>ce?(N.sortIndex=G,e(c,N),n(l)===null&&N===n(c)&&(y?(g(b),b=-1):y=!0,Y(x,G-ce))):(N.sortIndex=we,e(l,N),p||f||(p=!0,fe(T))),N},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(N){var B=d;return function(){var G=d;d=B;try{return N.apply(this,arguments)}finally{d=G}}}})(_E);yE.exports=_E;var MP=yE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vE=P,ln=MP;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wE=new Set,nl={};function xs(t,e){ho(t,e),ho(t+"Capture",e)}function ho(t,e){for(nl[t]=e,t=0;t<e.length;t++)wE.add(e[t])}var Ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),up=Object.prototype.hasOwnProperty,OP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j_={},U_={};function NP(t){return up.call(U_,t)?!0:up.call(j_,t)?!1:OP.test(t)?U_[t]=!0:(j_[t]=!0,!1)}function LP(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function VP(t,e,n,i){if(e===null||typeof e>"u"||LP(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){bt[t]=new qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];bt[e]=new qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){bt[t]=new qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){bt[t]=new qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){bt[t]=new qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){bt[t]=new qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){bt[t]=new qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){bt[t]=new qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){bt[t]=new qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var rm=/[\-:]([a-z])/g;function sm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rm,sm);bt[e]=new qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rm,sm);bt[e]=new qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rm,sm);bt[e]=new qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){bt[t]=new qt(t,1,!1,t.toLowerCase(),null,!1,!1)});bt.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){bt[t]=new qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function om(t,e,n,i){var r=bt.hasOwnProperty(e)?bt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(VP(e,n,r,i)&&(n=null),i||r===null?NP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Di=vE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ac=Symbol.for("react.element"),Fs=Symbol.for("react.portal"),js=Symbol.for("react.fragment"),am=Symbol.for("react.strict_mode"),hp=Symbol.for("react.profiler"),EE=Symbol.for("react.provider"),xE=Symbol.for("react.context"),lm=Symbol.for("react.forward_ref"),dp=Symbol.for("react.suspense"),fp=Symbol.for("react.suspense_list"),cm=Symbol.for("react.memo"),Bi=Symbol.for("react.lazy"),TE=Symbol.for("react.offscreen"),z_=Symbol.iterator;function Xo(t){return t===null||typeof t!="object"?null:(t=z_&&t[z_]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,rf;function _a(t){if(rf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rf=e&&e[1]||""}return`
`+rf+t}var sf=!1;function of(t,e){if(!t||sf)return"";sf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{sf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_a(t):""}function FP(t){switch(t.tag){case 5:return _a(t.type);case 16:return _a("Lazy");case 13:return _a("Suspense");case 19:return _a("SuspenseList");case 0:case 2:case 15:return t=of(t.type,!1),t;case 11:return t=of(t.type.render,!1),t;case 1:return t=of(t.type,!0),t;default:return""}}function pp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case js:return"Fragment";case Fs:return"Portal";case hp:return"Profiler";case am:return"StrictMode";case dp:return"Suspense";case fp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xE:return(t.displayName||"Context")+".Consumer";case EE:return(t._context.displayName||"Context")+".Provider";case lm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cm:return e=t.displayName||null,e!==null?e:pp(t.type)||"Memo";case Bi:e=t._payload,t=t._init;try{return pp(t(e))}catch{}}return null}function jP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pp(e);case 8:return e===am?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function SE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function UP(t){var e=SE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rc(t){t._valueTracker||(t._valueTracker=UP(t))}function IE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=SE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Wu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function gp(t,e){var n=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=mr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bE(t,e){e=e.checked,e!=null&&om(t,"checked",e,!1)}function mp(t,e){bE(t,e);var n=mr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yp(t,e.type,n):e.hasOwnProperty("defaultValue")&&yp(t,e.type,mr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function B_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yp(t,e,n){(e!=="number"||Wu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var va=Array.isArray;function Zs(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+mr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function _p(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function W_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(va(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:mr(n)}}function kE(t,e){var n=mr(e.value),i=mr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function H_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function PE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?PE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cc,AE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cc=Cc||document.createElement("div"),Cc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function il(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Oa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zP=["Webkit","ms","Moz","O"];Object.keys(Oa).forEach(function(t){zP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Oa[e]=Oa[t]})});function RE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Oa.hasOwnProperty(t)&&Oa[t]?(""+e).trim():e+"px"}function CE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=RE(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var $P=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wp(t,e){if(e){if($P[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function Ep(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xp=null;function um(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tp=null,eo=null,to=null;function q_(t){if(t=Yl(t)){if(typeof Tp!="function")throw Error(O(280));var e=t.stateNode;e&&(e=Yh(e),Tp(t.stateNode,t.type,e))}}function DE(t){eo?to?to.push(t):to=[t]:eo=t}function ME(){if(eo){var t=eo,e=to;if(to=eo=null,q_(t),e)for(t=0;t<e.length;t++)q_(e[t])}}function OE(t,e){return t(e)}function NE(){}var af=!1;function LE(t,e,n){if(af)return t(e,n);af=!0;try{return OE(t,e,n)}finally{af=!1,(eo!==null||to!==null)&&(NE(),ME())}}function rl(t,e){var n=t.stateNode;if(n===null)return null;var i=Yh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var Sp=!1;if(Ii)try{var Jo={};Object.defineProperty(Jo,"passive",{get:function(){Sp=!0}}),window.addEventListener("test",Jo,Jo),window.removeEventListener("test",Jo,Jo)}catch{Sp=!1}function BP(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Na=!1,Hu=null,qu=!1,Ip=null,WP={onError:function(t){Na=!0,Hu=t}};function HP(t,e,n,i,r,s,o,a,l){Na=!1,Hu=null,BP.apply(WP,arguments)}function qP(t,e,n,i,r,s,o,a,l){if(HP.apply(this,arguments),Na){if(Na){var c=Hu;Na=!1,Hu=null}else throw Error(O(198));qu||(qu=!0,Ip=c)}}function Ts(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function VE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function K_(t){if(Ts(t)!==t)throw Error(O(188))}function KP(t){var e=t.alternate;if(!e){if(e=Ts(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return K_(r),t;if(s===i)return K_(r),e;s=s.sibling}throw Error(O(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(O(189))}}if(n.alternate!==i)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function FE(t){return t=KP(t),t!==null?jE(t):null}function jE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jE(t);if(e!==null)return e;t=t.sibling}return null}var UE=ln.unstable_scheduleCallback,G_=ln.unstable_cancelCallback,GP=ln.unstable_shouldYield,QP=ln.unstable_requestPaint,Je=ln.unstable_now,YP=ln.unstable_getCurrentPriorityLevel,hm=ln.unstable_ImmediatePriority,zE=ln.unstable_UserBlockingPriority,Ku=ln.unstable_NormalPriority,XP=ln.unstable_LowPriority,$E=ln.unstable_IdlePriority,qh=null,Yn=null;function JP(t){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(qh,t,void 0,(t.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:tA,ZP=Math.log,eA=Math.LN2;function tA(t){return t>>>=0,t===0?32:31-(ZP(t)/eA|0)|0}var Dc=64,Mc=4194304;function wa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gu(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=wa(a):(s&=o,s!==0&&(i=wa(s)))}else o=n&~r,o!==0?i=wa(o):s!==0&&(i=wa(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Mn(e),r=1<<n,i|=t[n],e&=~r;return i}function nA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iA(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Mn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=nA(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function bp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function BE(){var t=Dc;return Dc<<=1,!(Dc&4194240)&&(Dc=64),t}function lf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Gl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mn(e),t[e]=n}function rA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Mn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function dm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Mn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Te=0;function WE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var HE,fm,qE,KE,GE,kp=!1,Oc=[],ir=null,rr=null,sr=null,sl=new Map,ol=new Map,Hi=[],sA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Q_(t,e){switch(t){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":sl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ol.delete(e.pointerId)}}function Zo(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Yl(e),e!==null&&fm(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function oA(t,e,n,i,r){switch(e){case"focusin":return ir=Zo(ir,t,e,n,i,r),!0;case"dragenter":return rr=Zo(rr,t,e,n,i,r),!0;case"mouseover":return sr=Zo(sr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return sl.set(s,Zo(sl.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ol.set(s,Zo(ol.get(s)||null,t,e,n,i,r)),!0}return!1}function QE(t){var e=Wr(t.target);if(e!==null){var n=Ts(e);if(n!==null){if(e=n.tag,e===13){if(e=VE(n),e!==null){t.blockedOn=e,GE(t.priority,function(){qE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Pp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);xp=i,n.target.dispatchEvent(i),xp=null}else return e=Yl(n),e!==null&&fm(e),t.blockedOn=n,!1;e.shift()}return!0}function Y_(t,e,n){yu(t)&&n.delete(e)}function aA(){kp=!1,ir!==null&&yu(ir)&&(ir=null),rr!==null&&yu(rr)&&(rr=null),sr!==null&&yu(sr)&&(sr=null),sl.forEach(Y_),ol.forEach(Y_)}function ea(t,e){t.blockedOn===e&&(t.blockedOn=null,kp||(kp=!0,ln.unstable_scheduleCallback(ln.unstable_NormalPriority,aA)))}function al(t){function e(r){return ea(r,t)}if(0<Oc.length){ea(Oc[0],t);for(var n=1;n<Oc.length;n++){var i=Oc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(ir!==null&&ea(ir,t),rr!==null&&ea(rr,t),sr!==null&&ea(sr,t),sl.forEach(e),ol.forEach(e),n=0;n<Hi.length;n++)i=Hi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Hi.length&&(n=Hi[0],n.blockedOn===null);)QE(n),n.blockedOn===null&&Hi.shift()}var no=Di.ReactCurrentBatchConfig,Qu=!0;function lA(t,e,n,i){var r=Te,s=no.transition;no.transition=null;try{Te=1,pm(t,e,n,i)}finally{Te=r,no.transition=s}}function cA(t,e,n,i){var r=Te,s=no.transition;no.transition=null;try{Te=4,pm(t,e,n,i)}finally{Te=r,no.transition=s}}function pm(t,e,n,i){if(Qu){var r=Pp(t,e,n,i);if(r===null)_f(t,e,i,Yu,n),Q_(t,i);else if(oA(r,t,e,n,i))i.stopPropagation();else if(Q_(t,i),e&4&&-1<sA.indexOf(t)){for(;r!==null;){var s=Yl(r);if(s!==null&&HE(s),s=Pp(t,e,n,i),s===null&&_f(t,e,i,Yu,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else _f(t,e,i,null,n)}}var Yu=null;function Pp(t,e,n,i){if(Yu=null,t=um(i),t=Wr(t),t!==null)if(e=Ts(t),e===null)t=null;else if(n=e.tag,n===13){if(t=VE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yu=t,null}function YE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YP()){case hm:return 1;case zE:return 4;case Ku:case XP:return 16;case $E:return 536870912;default:return 16}default:return 16}}var Qi=null,gm=null,_u=null;function XE(){if(_u)return _u;var t,e=gm,n=e.length,i,r="value"in Qi?Qi.value:Qi.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return _u=r.slice(t,1<i?1-i:void 0)}function vu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Nc(){return!0}function X_(){return!1}function hn(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Nc:X_,this.isPropagationStopped=X_,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nc)},persist:function(){},isPersistent:Nc}),e}var No={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mm=hn(No),Ql=Be({},No,{view:0,detail:0}),uA=hn(Ql),cf,uf,ta,Kh=Be({},Ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ym,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ta&&(ta&&t.type==="mousemove"?(cf=t.screenX-ta.screenX,uf=t.screenY-ta.screenY):uf=cf=0,ta=t),cf)},movementY:function(t){return"movementY"in t?t.movementY:uf}}),J_=hn(Kh),hA=Be({},Kh,{dataTransfer:0}),dA=hn(hA),fA=Be({},Ql,{relatedTarget:0}),hf=hn(fA),pA=Be({},No,{animationName:0,elapsedTime:0,pseudoElement:0}),gA=hn(pA),mA=Be({},No,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yA=hn(mA),_A=Be({},No,{data:0}),Z_=hn(_A),vA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=EA[t])?!!e[t]:!1}function ym(){return xA}var TA=Be({},Ql,{key:function(t){if(t.key){var e=vA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ym,charCode:function(t){return t.type==="keypress"?vu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),SA=hn(TA),IA=Be({},Kh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ev=hn(IA),bA=Be({},Ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ym}),kA=hn(bA),PA=Be({},No,{propertyName:0,elapsedTime:0,pseudoElement:0}),AA=hn(PA),RA=Be({},Kh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),CA=hn(RA),DA=[9,13,27,32],_m=Ii&&"CompositionEvent"in window,La=null;Ii&&"documentMode"in document&&(La=document.documentMode);var MA=Ii&&"TextEvent"in window&&!La,JE=Ii&&(!_m||La&&8<La&&11>=La),tv=" ",nv=!1;function ZE(t,e){switch(t){case"keyup":return DA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ex(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Us=!1;function OA(t,e){switch(t){case"compositionend":return ex(e);case"keypress":return e.which!==32?null:(nv=!0,tv);case"textInput":return t=e.data,t===tv&&nv?null:t;default:return null}}function NA(t,e){if(Us)return t==="compositionend"||!_m&&ZE(t,e)?(t=XE(),_u=gm=Qi=null,Us=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JE&&e.locale!=="ko"?null:e.data;default:return null}}var LA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LA[t.type]:e==="textarea"}function tx(t,e,n,i){DE(i),e=Xu(e,"onChange"),0<e.length&&(n=new mm("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Va=null,ll=null;function VA(t){dx(t,0)}function Gh(t){var e=Bs(t);if(IE(e))return t}function FA(t,e){if(t==="change")return e}var nx=!1;if(Ii){var df;if(Ii){var ff="oninput"in document;if(!ff){var rv=document.createElement("div");rv.setAttribute("oninput","return;"),ff=typeof rv.oninput=="function"}df=ff}else df=!1;nx=df&&(!document.documentMode||9<document.documentMode)}function sv(){Va&&(Va.detachEvent("onpropertychange",ix),ll=Va=null)}function ix(t){if(t.propertyName==="value"&&Gh(ll)){var e=[];tx(e,ll,t,um(t)),LE(VA,e)}}function jA(t,e,n){t==="focusin"?(sv(),Va=e,ll=n,Va.attachEvent("onpropertychange",ix)):t==="focusout"&&sv()}function UA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gh(ll)}function zA(t,e){if(t==="click")return Gh(e)}function $A(t,e){if(t==="input"||t==="change")return Gh(e)}function BA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ln=typeof Object.is=="function"?Object.is:BA;function cl(t,e){if(Ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!up.call(e,r)||!Ln(t[r],e[r]))return!1}return!0}function ov(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function av(t,e){var n=ov(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ov(n)}}function rx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sx(){for(var t=window,e=Wu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wu(t.document)}return e}function vm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function WA(t){var e=sx(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&rx(n.ownerDocument.documentElement,n)){if(i!==null&&vm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=av(n,s);var o=av(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var HA=Ii&&"documentMode"in document&&11>=document.documentMode,zs=null,Ap=null,Fa=null,Rp=!1;function lv(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rp||zs==null||zs!==Wu(i)||(i=zs,"selectionStart"in i&&vm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Fa&&cl(Fa,i)||(Fa=i,i=Xu(Ap,"onSelect"),0<i.length&&(e=new mm("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=zs)))}function Lc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $s={animationend:Lc("Animation","AnimationEnd"),animationiteration:Lc("Animation","AnimationIteration"),animationstart:Lc("Animation","AnimationStart"),transitionend:Lc("Transition","TransitionEnd")},pf={},ox={};Ii&&(ox=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function Qh(t){if(pf[t])return pf[t];if(!$s[t])return t;var e=$s[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ox)return pf[t]=e[n];return t}var ax=Qh("animationend"),lx=Qh("animationiteration"),cx=Qh("animationstart"),ux=Qh("transitionend"),hx=new Map,cv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(t,e){hx.set(t,e),xs(e,[t])}for(var gf=0;gf<cv.length;gf++){var mf=cv[gf],qA=mf.toLowerCase(),KA=mf[0].toUpperCase()+mf.slice(1);Tr(qA,"on"+KA)}Tr(ax,"onAnimationEnd");Tr(lx,"onAnimationIteration");Tr(cx,"onAnimationStart");Tr("dblclick","onDoubleClick");Tr("focusin","onFocus");Tr("focusout","onBlur");Tr(ux,"onTransitionEnd");ho("onMouseEnter",["mouseout","mouseover"]);ho("onMouseLeave",["mouseout","mouseover"]);ho("onPointerEnter",["pointerout","pointerover"]);ho("onPointerLeave",["pointerout","pointerover"]);xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ea));function uv(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,qP(i,e,void 0,t),t.currentTarget=null}function dx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;uv(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;uv(r,a,c),s=l}}}if(qu)throw t=Ip,qu=!1,Ip=null,t}function Ce(t,e){var n=e[Np];n===void 0&&(n=e[Np]=new Set);var i=t+"__bubble";n.has(i)||(fx(e,t,2,!1),n.add(i))}function yf(t,e,n){var i=0;e&&(i|=4),fx(n,t,i,e)}var Vc="_reactListening"+Math.random().toString(36).slice(2);function ul(t){if(!t[Vc]){t[Vc]=!0,wE.forEach(function(n){n!=="selectionchange"&&(GA.has(n)||yf(n,!1,t),yf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vc]||(e[Vc]=!0,yf("selectionchange",!1,e))}}function fx(t,e,n,i){switch(YE(e)){case 1:var r=lA;break;case 4:r=cA;break;default:r=pm}n=r.bind(null,e,n,t),r=void 0,!Sp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function _f(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Wr(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}LE(function(){var c=s,u=um(n),h=[];e:{var d=hx.get(t);if(d!==void 0){var f=mm,p=t;switch(t){case"keypress":if(vu(n)===0)break e;case"keydown":case"keyup":f=SA;break;case"focusin":p="focus",f=hf;break;case"focusout":p="blur",f=hf;break;case"beforeblur":case"afterblur":f=hf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=J_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=dA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=kA;break;case ax:case lx:case cx:f=gA;break;case ux:f=AA;break;case"scroll":f=uA;break;case"wheel":f=CA;break;case"copy":case"cut":case"paste":f=yA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=ev}var y=(e&4)!==0,_=!y&&t==="scroll",g=y?d!==null?d+"Capture":null:d;y=[];for(var m=c,v;m!==null;){v=m;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,g!==null&&(x=rl(m,g),x!=null&&y.push(hl(m,x,v)))),_)break;m=m.return}0<y.length&&(d=new f(d,p,null,n,u),h.push({event:d,listeners:y}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==xp&&(p=n.relatedTarget||n.fromElement)&&(Wr(p)||p[bi]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?Wr(p):null,p!==null&&(_=Ts(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(y=J_,x="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(y=ev,x="onPointerLeave",g="onPointerEnter",m="pointer"),_=f==null?d:Bs(f),v=p==null?d:Bs(p),d=new y(x,m+"leave",f,n,u),d.target=_,d.relatedTarget=v,x=null,Wr(u)===c&&(y=new y(g,m+"enter",p,n,u),y.target=v,y.relatedTarget=_,x=y),_=x,f&&p)t:{for(y=f,g=p,m=0,v=y;v;v=Cs(v))m++;for(v=0,x=g;x;x=Cs(x))v++;for(;0<m-v;)y=Cs(y),m--;for(;0<v-m;)g=Cs(g),v--;for(;m--;){if(y===g||g!==null&&y===g.alternate)break t;y=Cs(y),g=Cs(g)}y=null}else y=null;f!==null&&hv(h,d,f,y,!1),p!==null&&_!==null&&hv(h,_,p,y,!0)}}e:{if(d=c?Bs(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var T=FA;else if(iv(d))if(nx)T=$A;else{T=UA;var w=jA}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(T=zA);if(T&&(T=T(t,c))){tx(h,T,n,u);break e}w&&w(t,d,c),t==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&yp(d,"number",d.value)}switch(w=c?Bs(c):window,t){case"focusin":(iv(w)||w.contentEditable==="true")&&(zs=w,Ap=c,Fa=null);break;case"focusout":Fa=Ap=zs=null;break;case"mousedown":Rp=!0;break;case"contextmenu":case"mouseup":case"dragend":Rp=!1,lv(h,n,u);break;case"selectionchange":if(HA)break;case"keydown":case"keyup":lv(h,n,u)}var S;if(_m)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Us?ZE(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(JE&&n.locale!=="ko"&&(Us||b!=="onCompositionStart"?b==="onCompositionEnd"&&Us&&(S=XE()):(Qi=u,gm="value"in Qi?Qi.value:Qi.textContent,Us=!0)),w=Xu(c,b),0<w.length&&(b=new Z_(b,t,null,n,u),h.push({event:b,listeners:w}),S?b.data=S:(S=ex(n),S!==null&&(b.data=S)))),(S=MA?OA(t,n):NA(t,n))&&(c=Xu(c,"onBeforeInput"),0<c.length&&(u=new Z_("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=S))}dx(h,e)})}function hl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xu(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=rl(t,n),s!=null&&i.unshift(hl(t,s,r)),s=rl(t,e),s!=null&&i.push(hl(t,s,r))),t=t.return}return i}function Cs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hv(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=rl(n,s),l!=null&&o.unshift(hl(n,l,a))):r||(l=rl(n,s),l!=null&&o.push(hl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var QA=/\r\n?/g,YA=/\u0000|\uFFFD/g;function dv(t){return(typeof t=="string"?t:""+t).replace(QA,`
`).replace(YA,"")}function Fc(t,e,n){if(e=dv(e),dv(t)!==e&&n)throw Error(O(425))}function Ju(){}var Cp=null,Dp=null;function Mp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Op=typeof setTimeout=="function"?setTimeout:void 0,XA=typeof clearTimeout=="function"?clearTimeout:void 0,fv=typeof Promise=="function"?Promise:void 0,JA=typeof queueMicrotask=="function"?queueMicrotask:typeof fv<"u"?function(t){return fv.resolve(null).then(t).catch(ZA)}:Op;function ZA(t){setTimeout(function(){throw t})}function vf(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),al(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);al(e)}function or(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function pv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Lo=Math.random().toString(36).slice(2),Hn="__reactFiber$"+Lo,dl="__reactProps$"+Lo,bi="__reactContainer$"+Lo,Np="__reactEvents$"+Lo,eR="__reactListeners$"+Lo,tR="__reactHandles$"+Lo;function Wr(t){var e=t[Hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bi]||n[Hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=pv(t);t!==null;){if(n=t[Hn])return n;t=pv(t)}return e}t=n,n=t.parentNode}return null}function Yl(t){return t=t[Hn]||t[bi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function Yh(t){return t[dl]||null}var Lp=[],Ws=-1;function Sr(t){return{current:t}}function Ne(t){0>Ws||(t.current=Lp[Ws],Lp[Ws]=null,Ws--)}function Pe(t,e){Ws++,Lp[Ws]=t.current,t.current=e}var yr={},Ft=Sr(yr),Xt=Sr(!1),as=yr;function fo(t,e){var n=t.type.contextTypes;if(!n)return yr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Jt(t){return t=t.childContextTypes,t!=null}function Zu(){Ne(Xt),Ne(Ft)}function gv(t,e,n){if(Ft.current!==yr)throw Error(O(168));Pe(Ft,e),Pe(Xt,n)}function px(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(O(108,jP(t)||"Unknown",r));return Be({},n,i)}function eh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yr,as=Ft.current,Pe(Ft,t),Pe(Xt,Xt.current),!0}function mv(t,e,n){var i=t.stateNode;if(!i)throw Error(O(169));n?(t=px(t,e,as),i.__reactInternalMemoizedMergedChildContext=t,Ne(Xt),Ne(Ft),Pe(Ft,t)):Ne(Xt),Pe(Xt,n)}var hi=null,Xh=!1,wf=!1;function gx(t){hi===null?hi=[t]:hi.push(t)}function nR(t){Xh=!0,gx(t)}function Ir(){if(!wf&&hi!==null){wf=!0;var t=0,e=Te;try{var n=hi;for(Te=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}hi=null,Xh=!1}catch(r){throw hi!==null&&(hi=hi.slice(t+1)),UE(hm,Ir),r}finally{Te=e,wf=!1}}return null}var Hs=[],qs=0,th=null,nh=0,gn=[],mn=0,ls=null,pi=1,gi="";function Fr(t,e){Hs[qs++]=nh,Hs[qs++]=th,th=t,nh=e}function mx(t,e,n){gn[mn++]=pi,gn[mn++]=gi,gn[mn++]=ls,ls=t;var i=pi;t=gi;var r=32-Mn(i)-1;i&=~(1<<r),n+=1;var s=32-Mn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,pi=1<<32-Mn(e)+r|n<<r|i,gi=s+t}else pi=1<<s|n<<r|i,gi=t}function wm(t){t.return!==null&&(Fr(t,1),mx(t,1,0))}function Em(t){for(;t===th;)th=Hs[--qs],Hs[qs]=null,nh=Hs[--qs],Hs[qs]=null;for(;t===ls;)ls=gn[--mn],gn[mn]=null,gi=gn[--mn],gn[mn]=null,pi=gn[--mn],gn[mn]=null}var on=null,sn=null,je=!1,Pn=null;function yx(t,e){var n=vn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function yv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,on=t,sn=or(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,on=t,sn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ls!==null?{id:pi,overflow:gi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,on=t,sn=null,!0):!1;default:return!1}}function Vp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fp(t){if(je){var e=sn;if(e){var n=e;if(!yv(t,e)){if(Vp(t))throw Error(O(418));e=or(n.nextSibling);var i=on;e&&yv(t,e)?yx(i,n):(t.flags=t.flags&-4097|2,je=!1,on=t)}}else{if(Vp(t))throw Error(O(418));t.flags=t.flags&-4097|2,je=!1,on=t}}}function _v(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;on=t}function jc(t){if(t!==on)return!1;if(!je)return _v(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mp(t.type,t.memoizedProps)),e&&(e=sn)){if(Vp(t))throw _x(),Error(O(418));for(;e;)yx(t,e),e=or(e.nextSibling)}if(_v(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){sn=or(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}sn=null}}else sn=on?or(t.stateNode.nextSibling):null;return!0}function _x(){for(var t=sn;t;)t=or(t.nextSibling)}function po(){sn=on=null,je=!1}function xm(t){Pn===null?Pn=[t]:Pn.push(t)}var iR=Di.ReactCurrentBatchConfig;function In(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var ih=Sr(null),rh=null,Ks=null,Tm=null;function Sm(){Tm=Ks=rh=null}function Im(t){var e=ih.current;Ne(ih),t._currentValue=e}function jp(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function io(t,e){rh=t,Tm=Ks=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yt=!0),t.firstContext=null)}function En(t){var e=t._currentValue;if(Tm!==t)if(t={context:t,memoizedValue:e,next:null},Ks===null){if(rh===null)throw Error(O(308));Ks=t,rh.dependencies={lanes:0,firstContext:t}}else Ks=Ks.next=t;return e}var Hr=null;function bm(t){Hr===null?Hr=[t]:Hr.push(t)}function vx(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,bm(e)):(n.next=r.next,r.next=n),e.interleaved=n,ki(t,i)}function ki(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wi=!1;function km(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ar(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ye&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ki(t,n)}return r=i.interleaved,r===null?(e.next=e,bm(i)):(e.next=r.next,r.next=e),i.interleaved=e,ki(t,n)}function wu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,dm(t,n)}}function vv(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function sh(t,e,n,i){var r=t.updateQueue;Wi=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((i&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,y=a;switch(d=e,f=n,y.tag){case 1:if(p=y.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=Be({},h,d);break e;case 2:Wi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=r.effects,d===null?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;d=a,a=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(!0);if(u===null&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);us|=o,t.lanes=o,t.memoizedState=h}}function wv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(O(191,r));r.call(i)}}}var Ex=new vE.Component().refs;function Up(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jh={isMounted:function(t){return(t=t._reactInternals)?Ts(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Wt(),r=cr(t),s=xi(i,r);s.payload=e,n!=null&&(s.callback=n),e=ar(t,s,r),e!==null&&(On(e,t,r,i),wu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Wt(),r=cr(t),s=xi(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ar(t,s,r),e!==null&&(On(e,t,r,i),wu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Wt(),i=cr(t),r=xi(n,i);r.tag=2,e!=null&&(r.callback=e),e=ar(t,r,i),e!==null&&(On(e,t,i,n),wu(e,t,i))}};function Ev(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!cl(n,i)||!cl(r,s):!0}function xx(t,e,n){var i=!1,r=yr,s=e.contextType;return typeof s=="object"&&s!==null?s=En(s):(r=Jt(e)?as:Ft.current,i=e.contextTypes,s=(i=i!=null)?fo(t,r):yr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function xv(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Jh.enqueueReplaceState(e,e.state,null)}function zp(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=Ex,km(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=En(s):(s=Jt(e)?as:Ft.current,r.context=fo(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Up(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Jh.enqueueReplaceState(r,r.state,null),sh(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function na(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var i=n.stateNode}if(!i)throw Error(O(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===Ex&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function Uc(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Tv(t){var e=t._init;return e(t._payload)}function Tx(t){function e(g,m){if(t){var v=g.deletions;v===null?(g.deletions=[m],g.flags|=16):v.push(m)}}function n(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function i(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function r(g,m){return g=ur(g,m),g.index=0,g.sibling=null,g}function s(g,m,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<m?(g.flags|=2,m):v):(g.flags|=2,m)):(g.flags|=1048576,m)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,m,v,x){return m===null||m.tag!==6?(m=kf(v,g.mode,x),m.return=g,m):(m=r(m,v),m.return=g,m)}function l(g,m,v,x){var T=v.type;return T===js?u(g,m,v.props.children,x,v.key):m!==null&&(m.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Bi&&Tv(T)===m.type)?(x=r(m,v.props),x.ref=na(g,m,v),x.return=g,x):(x=bu(v.type,v.key,v.props,null,g.mode,x),x.ref=na(g,m,v),x.return=g,x)}function c(g,m,v,x){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Pf(v,g.mode,x),m.return=g,m):(m=r(m,v.children||[]),m.return=g,m)}function u(g,m,v,x,T){return m===null||m.tag!==7?(m=ns(v,g.mode,x,T),m.return=g,m):(m=r(m,v),m.return=g,m)}function h(g,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=kf(""+m,g.mode,v),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ac:return v=bu(m.type,m.key,m.props,null,g.mode,v),v.ref=na(g,null,m),v.return=g,v;case Fs:return m=Pf(m,g.mode,v),m.return=g,m;case Bi:var x=m._init;return h(g,x(m._payload),v)}if(va(m)||Xo(m))return m=ns(m,g.mode,v,null),m.return=g,m;Uc(g,m)}return null}function d(g,m,v,x){var T=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return T!==null?null:a(g,m,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ac:return v.key===T?l(g,m,v,x):null;case Fs:return v.key===T?c(g,m,v,x):null;case Bi:return T=v._init,d(g,m,T(v._payload),x)}if(va(v)||Xo(v))return T!==null?null:u(g,m,v,x,null);Uc(g,v)}return null}function f(g,m,v,x,T){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(v)||null,a(m,g,""+x,T);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ac:return g=g.get(x.key===null?v:x.key)||null,l(m,g,x,T);case Fs:return g=g.get(x.key===null?v:x.key)||null,c(m,g,x,T);case Bi:var w=x._init;return f(g,m,v,w(x._payload),T)}if(va(x)||Xo(x))return g=g.get(v)||null,u(m,g,x,T,null);Uc(m,x)}return null}function p(g,m,v,x){for(var T=null,w=null,S=m,b=m=0,A=null;S!==null&&b<v.length;b++){S.index>b?(A=S,S=null):A=S.sibling;var M=d(g,S,v[b],x);if(M===null){S===null&&(S=A);break}t&&S&&M.alternate===null&&e(g,S),m=s(M,m,b),w===null?T=M:w.sibling=M,w=M,S=A}if(b===v.length)return n(g,S),je&&Fr(g,b),T;if(S===null){for(;b<v.length;b++)S=h(g,v[b],x),S!==null&&(m=s(S,m,b),w===null?T=S:w.sibling=S,w=S);return je&&Fr(g,b),T}for(S=i(g,S);b<v.length;b++)A=f(S,g,b,v[b],x),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?b:A.key),m=s(A,m,b),w===null?T=A:w.sibling=A,w=A);return t&&S.forEach(function(U){return e(g,U)}),je&&Fr(g,b),T}function y(g,m,v,x){var T=Xo(v);if(typeof T!="function")throw Error(O(150));if(v=T.call(v),v==null)throw Error(O(151));for(var w=T=null,S=m,b=m=0,A=null,M=v.next();S!==null&&!M.done;b++,M=v.next()){S.index>b?(A=S,S=null):A=S.sibling;var U=d(g,S,M.value,x);if(U===null){S===null&&(S=A);break}t&&S&&U.alternate===null&&e(g,S),m=s(U,m,b),w===null?T=U:w.sibling=U,w=U,S=A}if(M.done)return n(g,S),je&&Fr(g,b),T;if(S===null){for(;!M.done;b++,M=v.next())M=h(g,M.value,x),M!==null&&(m=s(M,m,b),w===null?T=M:w.sibling=M,w=M);return je&&Fr(g,b),T}for(S=i(g,S);!M.done;b++,M=v.next())M=f(S,g,b,M.value,x),M!==null&&(t&&M.alternate!==null&&S.delete(M.key===null?b:M.key),m=s(M,m,b),w===null?T=M:w.sibling=M,w=M);return t&&S.forEach(function(H){return e(g,H)}),je&&Fr(g,b),T}function _(g,m,v,x){if(typeof v=="object"&&v!==null&&v.type===js&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ac:e:{for(var T=v.key,w=m;w!==null;){if(w.key===T){if(T=v.type,T===js){if(w.tag===7){n(g,w.sibling),m=r(w,v.props.children),m.return=g,g=m;break e}}else if(w.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Bi&&Tv(T)===w.type){n(g,w.sibling),m=r(w,v.props),m.ref=na(g,w,v),m.return=g,g=m;break e}n(g,w);break}else e(g,w);w=w.sibling}v.type===js?(m=ns(v.props.children,g.mode,x,v.key),m.return=g,g=m):(x=bu(v.type,v.key,v.props,null,g.mode,x),x.ref=na(g,m,v),x.return=g,g=x)}return o(g);case Fs:e:{for(w=v.key;m!==null;){if(m.key===w)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(g,m.sibling),m=r(m,v.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else e(g,m);m=m.sibling}m=Pf(v,g.mode,x),m.return=g,g=m}return o(g);case Bi:return w=v._init,_(g,m,w(v._payload),x)}if(va(v))return p(g,m,v,x);if(Xo(v))return y(g,m,v,x);Uc(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(g,m.sibling),m=r(m,v),m.return=g,g=m):(n(g,m),m=kf(v,g.mode,x),m.return=g,g=m),o(g)):n(g,m)}return _}var go=Tx(!0),Sx=Tx(!1),Xl={},Xn=Sr(Xl),fl=Sr(Xl),pl=Sr(Xl);function qr(t){if(t===Xl)throw Error(O(174));return t}function Pm(t,e){switch(Pe(pl,e),Pe(fl,t),Pe(Xn,Xl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vp(e,t)}Ne(Xn),Pe(Xn,e)}function mo(){Ne(Xn),Ne(fl),Ne(pl)}function Ix(t){qr(pl.current);var e=qr(Xn.current),n=vp(e,t.type);e!==n&&(Pe(fl,t),Pe(Xn,n))}function Am(t){fl.current===t&&(Ne(Xn),Ne(fl))}var ze=Sr(0);function oh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ef=[];function Rm(){for(var t=0;t<Ef.length;t++)Ef[t]._workInProgressVersionPrimary=null;Ef.length=0}var Eu=Di.ReactCurrentDispatcher,xf=Di.ReactCurrentBatchConfig,cs=0,$e=null,st=null,dt=null,ah=!1,ja=!1,gl=0,rR=0;function Pt(){throw Error(O(321))}function Cm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ln(t[n],e[n]))return!1;return!0}function Dm(t,e,n,i,r,s){if(cs=s,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Eu.current=t===null||t.memoizedState===null?lR:cR,t=n(i,r),ja){s=0;do{if(ja=!1,gl=0,25<=s)throw Error(O(301));s+=1,dt=st=null,e.updateQueue=null,Eu.current=uR,t=n(i,r)}while(ja)}if(Eu.current=lh,e=st!==null&&st.next!==null,cs=0,dt=st=$e=null,ah=!1,e)throw Error(O(300));return t}function Mm(){var t=gl!==0;return gl=0,t}function Bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?$e.memoizedState=dt=t:dt=dt.next=t,dt}function xn(){if(st===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var e=dt===null?$e.memoizedState:dt.next;if(e!==null)dt=e,st=t;else{if(t===null)throw Error(O(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},dt===null?$e.memoizedState=dt=t:dt=dt.next=t}return dt}function ml(t,e){return typeof e=="function"?e(t):e}function Tf(t){var e=xn(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var i=st,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((cs&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,$e.lanes|=u,us|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Ln(i,e.memoizedState)||(Yt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,$e.lanes|=s,us|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sf(t){var e=xn(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Ln(s,e.memoizedState)||(Yt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function bx(){}function kx(t,e){var n=$e,i=xn(),r=e(),s=!Ln(i.memoizedState,r);if(s&&(i.memoizedState=r,Yt=!0),i=i.queue,Om(Rx.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,yl(9,Ax.bind(null,n,i,r,e),void 0,null),pt===null)throw Error(O(349));cs&30||Px(n,e,r)}return r}function Px(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ax(t,e,n,i){e.value=n,e.getSnapshot=i,Cx(e)&&Dx(t)}function Rx(t,e,n){return n(function(){Cx(e)&&Dx(t)})}function Cx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ln(t,n)}catch{return!0}}function Dx(t){var e=ki(t,1);e!==null&&On(e,t,1,-1)}function Sv(t){var e=Bn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:t},e.queue=t,t=t.dispatch=aR.bind(null,$e,t),[e.memoizedState,t]}function yl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Mx(){return xn().memoizedState}function xu(t,e,n,i){var r=Bn();$e.flags|=t,r.memoizedState=yl(1|e,n,void 0,i===void 0?null:i)}function Zh(t,e,n,i){var r=xn();i=i===void 0?null:i;var s=void 0;if(st!==null){var o=st.memoizedState;if(s=o.destroy,i!==null&&Cm(i,o.deps)){r.memoizedState=yl(e,n,s,i);return}}$e.flags|=t,r.memoizedState=yl(1|e,n,s,i)}function Iv(t,e){return xu(8390656,8,t,e)}function Om(t,e){return Zh(2048,8,t,e)}function Ox(t,e){return Zh(4,2,t,e)}function Nx(t,e){return Zh(4,4,t,e)}function Lx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Vx(t,e,n){return n=n!=null?n.concat([t]):null,Zh(4,4,Lx.bind(null,e,t),n)}function Nm(){}function Fx(t,e){var n=xn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Cm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function jx(t,e){var n=xn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Cm(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Ux(t,e,n){return cs&21?(Ln(n,e)||(n=BE(),$e.lanes|=n,us|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yt=!0),t.memoizedState=n)}function sR(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var i=xf.transition;xf.transition={};try{t(!1),e()}finally{Te=n,xf.transition=i}}function zx(){return xn().memoizedState}function oR(t,e,n){var i=cr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},$x(t))Bx(e,n);else if(n=vx(t,e,n,i),n!==null){var r=Wt();On(n,t,i,r),Wx(n,e,i)}}function aR(t,e,n){var i=cr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if($x(t))Bx(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Ln(a,o)){var l=e.interleaved;l===null?(r.next=r,bm(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=vx(t,e,r,i),n!==null&&(r=Wt(),On(n,t,i,r),Wx(n,e,i))}}function $x(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function Bx(t,e){ja=ah=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Wx(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,dm(t,n)}}var lh={readContext:En,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useInsertionEffect:Pt,useLayoutEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useMutableSource:Pt,useSyncExternalStore:Pt,useId:Pt,unstable_isNewReconciler:!1},lR={readContext:En,useCallback:function(t,e){return Bn().memoizedState=[t,e===void 0?null:e],t},useContext:En,useEffect:Iv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xu(4194308,4,Lx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xu(4194308,4,t,e)},useInsertionEffect:function(t,e){return xu(4,2,t,e)},useMemo:function(t,e){var n=Bn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Bn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=oR.bind(null,$e,t),[i.memoizedState,t]},useRef:function(t){var e=Bn();return t={current:t},e.memoizedState=t},useState:Sv,useDebugValue:Nm,useDeferredValue:function(t){return Bn().memoizedState=t},useTransition:function(){var t=Sv(!1),e=t[0];return t=sR.bind(null,t[1]),Bn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=$e,r=Bn();if(je){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),pt===null)throw Error(O(349));cs&30||Px(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Iv(Rx.bind(null,i,s,t),[t]),i.flags|=2048,yl(9,Ax.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Bn(),e=pt.identifierPrefix;if(je){var n=gi,i=pi;n=(i&~(1<<32-Mn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=gl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cR={readContext:En,useCallback:Fx,useContext:En,useEffect:Om,useImperativeHandle:Vx,useInsertionEffect:Ox,useLayoutEffect:Nx,useMemo:jx,useReducer:Tf,useRef:Mx,useState:function(){return Tf(ml)},useDebugValue:Nm,useDeferredValue:function(t){var e=xn();return Ux(e,st.memoizedState,t)},useTransition:function(){var t=Tf(ml)[0],e=xn().memoizedState;return[t,e]},useMutableSource:bx,useSyncExternalStore:kx,useId:zx,unstable_isNewReconciler:!1},uR={readContext:En,useCallback:Fx,useContext:En,useEffect:Om,useImperativeHandle:Vx,useInsertionEffect:Ox,useLayoutEffect:Nx,useMemo:jx,useReducer:Sf,useRef:Mx,useState:function(){return Sf(ml)},useDebugValue:Nm,useDeferredValue:function(t){var e=xn();return st===null?e.memoizedState=t:Ux(e,st.memoizedState,t)},useTransition:function(){var t=Sf(ml)[0],e=xn().memoizedState;return[t,e]},useMutableSource:bx,useSyncExternalStore:kx,useId:zx,unstable_isNewReconciler:!1};function yo(t,e){try{var n="",i=e;do n+=FP(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function If(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function $p(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hR=typeof WeakMap=="function"?WeakMap:Map;function Hx(t,e,n){n=xi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){uh||(uh=!0,Jp=i),$p(t,e)},n}function qx(t,e,n){n=xi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){$p(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){$p(t,e),typeof i!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function bv(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new hR;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=IR.bind(null,t,e,n),e.then(t,t))}function kv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Pv(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xi(-1,1),e.tag=2,ar(n,e,1))),n.lanes|=1),t)}var dR=Di.ReactCurrentOwner,Yt=!1;function $t(t,e,n,i){e.child=t===null?Sx(e,null,n,i):go(e,t.child,n,i)}function Av(t,e,n,i,r){n=n.render;var s=e.ref;return io(e,r),i=Dm(t,e,n,i,s,r),n=Mm(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Pi(t,e,r)):(je&&n&&wm(e),e.flags|=1,$t(t,e,i,r),e.child)}function Rv(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Bm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Kx(t,e,s,i,r)):(t=bu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:cl,n(o,i)&&t.ref===e.ref)return Pi(t,e,r)}return e.flags|=1,t=ur(s,i),t.ref=e.ref,t.return=e,e.child=t}function Kx(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(cl(s,i)&&t.ref===e.ref)if(Yt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Yt=!0);else return e.lanes=t.lanes,Pi(t,e,r)}return Bp(t,e,n,i,r)}function Gx(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Qs,nn),nn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(Qs,nn),nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Pe(Qs,nn),nn|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Pe(Qs,nn),nn|=i;return $t(t,e,r,n),e.child}function Qx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bp(t,e,n,i,r){var s=Jt(n)?as:Ft.current;return s=fo(e,s),io(e,r),n=Dm(t,e,n,i,s,r),i=Mm(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Pi(t,e,r)):(je&&i&&wm(e),e.flags|=1,$t(t,e,n,r),e.child)}function Cv(t,e,n,i,r){if(Jt(n)){var s=!0;eh(e)}else s=!1;if(io(e,r),e.stateNode===null)Tu(t,e),xx(e,n,i),zp(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=En(c):(c=Jt(n)?as:Ft.current,c=fo(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&xv(e,o,i,c),Wi=!1;var d=e.memoizedState;o.state=d,sh(e,i,o,r),l=e.memoizedState,a!==i||d!==l||Xt.current||Wi?(typeof u=="function"&&(Up(e,n,u,i),l=e.memoizedState),(a=Wi||Ev(e,n,a,i,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,wx(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:In(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=En(l):(l=Jt(n)?as:Ft.current,l=fo(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&xv(e,o,i,l),Wi=!1,d=e.memoizedState,o.state=d,sh(e,i,o,r);var p=e.memoizedState;a!==h||d!==p||Xt.current||Wi?(typeof f=="function"&&(Up(e,n,f,i),p=e.memoizedState),(c=Wi||Ev(e,n,c,i,d,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Wp(t,e,n,i,s,r)}function Wp(t,e,n,i,r,s){Qx(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&mv(e,n,!1),Pi(t,e,s);i=e.stateNode,dR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=go(e,t.child,null,s),e.child=go(e,null,a,s)):$t(t,e,a,s),e.memoizedState=i.state,r&&mv(e,n,!0),e.child}function Yx(t){var e=t.stateNode;e.pendingContext?gv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gv(t,e.context,!1),Pm(t,e.containerInfo)}function Dv(t,e,n,i,r){return po(),xm(r),e.flags|=256,$t(t,e,n,i),e.child}var Hp={dehydrated:null,treeContext:null,retryLane:0};function qp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Xx(t,e,n){var i=e.pendingProps,r=ze.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Pe(ze,r&1),t===null)return Fp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=nd(o,i,0,null),t=ns(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=qp(n),e.memoizedState=Hp,t):Lm(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return fR(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=ur(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=ur(a,s):(s=ns(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?qp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Hp,i}return s=t.child,t=s.sibling,i=ur(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Lm(t,e){return e=nd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zc(t,e,n,i){return i!==null&&xm(i),go(e,t.child,null,n),t=Lm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fR(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=If(Error(O(422))),zc(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=nd({mode:"visible",children:i.children},r,0,null),s=ns(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&go(e,t.child,null,o),e.child.memoizedState=qp(o),e.memoizedState=Hp,s);if(!(e.mode&1))return zc(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(O(419)),i=If(s,i,void 0),zc(t,e,o,i)}if(a=(o&t.childLanes)!==0,Yt||a){if(i=pt,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ki(t,r),On(i,t,r,-1))}return $m(),i=If(Error(O(421))),zc(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=bR.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,sn=or(r.nextSibling),on=e,je=!0,Pn=null,t!==null&&(gn[mn++]=pi,gn[mn++]=gi,gn[mn++]=ls,pi=t.id,gi=t.overflow,ls=e),e=Lm(e,i.children),e.flags|=4096,e)}function Mv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),jp(t.return,e,n)}function bf(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Jx(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if($t(t,e,i.children,n),i=ze.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Mv(t,n,e);else if(t.tag===19)Mv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Pe(ze,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&oh(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),bf(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&oh(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}bf(e,!0,n,null,s);break;case"together":bf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),us|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=ur(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ur(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pR(t,e,n){switch(e.tag){case 3:Yx(e),po();break;case 5:Ix(e);break;case 1:Jt(e.type)&&eh(e);break;case 4:Pm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Pe(ih,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Pe(ze,ze.current&1),e.flags|=128,null):n&e.child.childLanes?Xx(t,e,n):(Pe(ze,ze.current&1),t=Pi(t,e,n),t!==null?t.sibling:null);Pe(ze,ze.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Jx(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Pe(ze,ze.current),i)break;return null;case 22:case 23:return e.lanes=0,Gx(t,e,n)}return Pi(t,e,n)}var Zx,Kp,eT,tT;Zx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kp=function(){};eT=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,qr(Xn.current);var s=null;switch(n){case"input":r=gp(t,r),i=gp(t,i),s=[];break;case"select":r=Be({},r,{value:void 0}),i=Be({},i,{value:void 0}),s=[];break;case"textarea":r=_p(t,r),i=_p(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Ju)}wp(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(nl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(nl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ce("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};tT=function(t,e,n,i){n!==i&&(e.flags|=4)};function ia(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function gR(t,e,n){var i=e.pendingProps;switch(Em(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return Jt(e.type)&&Zu(),At(e),null;case 3:return i=e.stateNode,mo(),Ne(Xt),Ne(Ft),Rm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(jc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pn!==null&&(tg(Pn),Pn=null))),Kp(t,e),At(e),null;case 5:Am(e);var r=qr(pl.current);if(n=e.type,t!==null&&e.stateNode!=null)eT(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(O(166));return At(e),null}if(t=qr(Xn.current),jc(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Hn]=e,i[dl]=s,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",i),Ce("close",i);break;case"iframe":case"object":case"embed":Ce("load",i);break;case"video":case"audio":for(r=0;r<Ea.length;r++)Ce(Ea[r],i);break;case"source":Ce("error",i);break;case"img":case"image":case"link":Ce("error",i),Ce("load",i);break;case"details":Ce("toggle",i);break;case"input":$_(i,s),Ce("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ce("invalid",i);break;case"textarea":W_(i,s),Ce("invalid",i)}wp(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Fc(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Fc(i.textContent,a,t),r=["children",""+a]):nl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ce("scroll",i)}switch(n){case"input":Rc(i),B_(i,s,!0);break;case"textarea":Rc(i),H_(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Ju)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=PE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Hn]=e,t[dl]=i,Zx(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ep(n,i),n){case"dialog":Ce("cancel",t),Ce("close",t),r=i;break;case"iframe":case"object":case"embed":Ce("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ea.length;r++)Ce(Ea[r],t);r=i;break;case"source":Ce("error",t),r=i;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),r=i;break;case"details":Ce("toggle",t),r=i;break;case"input":$_(t,i),r=gp(t,i),Ce("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Be({},i,{value:void 0}),Ce("invalid",t);break;case"textarea":W_(t,i),r=_p(t,i),Ce("invalid",t);break;default:r=i}wp(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?CE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&AE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&il(t,l):typeof l=="number"&&il(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(nl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ce("scroll",t):l!=null&&om(t,s,l,o))}switch(n){case"input":Rc(t),B_(t,i,!1);break;case"textarea":Rc(t),H_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+mr(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Zs(t,!!i.multiple,s,!1):i.defaultValue!=null&&Zs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Ju)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return At(e),null;case 6:if(t&&e.stateNode!=null)tT(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(O(166));if(n=qr(pl.current),qr(Xn.current),jc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Hn]=e,(s=i.nodeValue!==n)&&(t=on,t!==null))switch(t.tag){case 3:Fc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fc(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Hn]=e,e.stateNode=i}return At(e),null;case 13:if(Ne(ze),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&sn!==null&&e.mode&1&&!(e.flags&128))_x(),po(),e.flags|=98560,s=!1;else if(s=jc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(O(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(O(317));s[Hn]=e}else po(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),s=!1}else Pn!==null&&(tg(Pn),Pn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?ot===0&&(ot=3):$m())),e.updateQueue!==null&&(e.flags|=4),At(e),null);case 4:return mo(),Kp(t,e),t===null&&ul(e.stateNode.containerInfo),At(e),null;case 10:return Im(e.type._context),At(e),null;case 17:return Jt(e.type)&&Zu(),At(e),null;case 19:if(Ne(ze),s=e.memoizedState,s===null)return At(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)ia(s,!1);else{if(ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=oh(t),o!==null){for(e.flags|=128,ia(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pe(ze,ze.current&1|2),e.child}t=t.sibling}s.tail!==null&&Je()>_o&&(e.flags|=128,i=!0,ia(s,!1),e.lanes=4194304)}else{if(!i)if(t=oh(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ia(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!je)return At(e),null}else 2*Je()-s.renderingStartTime>_o&&n!==1073741824&&(e.flags|=128,i=!0,ia(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Je(),e.sibling=null,n=ze.current,Pe(ze,i?n&1|2:n&1),e):(At(e),null);case 22:case 23:return zm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?nn&1073741824&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function mR(t,e){switch(Em(e),e.tag){case 1:return Jt(e.type)&&Zu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mo(),Ne(Xt),Ne(Ft),Rm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Am(e),null;case 13:if(Ne(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));po()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(ze),null;case 4:return mo(),null;case 10:return Im(e.type._context),null;case 22:case 23:return zm(),null;case 24:return null;default:return null}}var $c=!1,Mt=!1,yR=typeof WeakSet=="function"?WeakSet:Set,z=null;function Gs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){qe(t,e,i)}else n.current=null}function Gp(t,e,n){try{n()}catch(i){qe(t,e,i)}}var Ov=!1;function _R(t,e){if(Cp=Qu,t=sx(),vm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,d=null;t:for(;;){for(var f;h!==n||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++c===r&&(a=o),d===s&&++u===i&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dp={focusedElem:t,selectionRange:n},Qu=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,_=p.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:In(e.type,y),_);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(x){qe(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return p=Ov,Ov=!1,p}function Ua(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Gp(e,n,s)}r=r.next}while(r!==i)}}function ed(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Qp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nT(t){var e=t.alternate;e!==null&&(t.alternate=null,nT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hn],delete e[dl],delete e[Np],delete e[eR],delete e[tR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function iT(t){return t.tag===5||t.tag===3||t.tag===4}function Nv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ju));else if(i!==4&&(t=t.child,t!==null))for(Yp(t,e,n),t=t.sibling;t!==null;)Yp(t,e,n),t=t.sibling}function Xp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Xp(t,e,n),t=t.sibling;t!==null;)Xp(t,e,n),t=t.sibling}var vt=null,bn=!1;function Ui(t,e,n){for(n=n.child;n!==null;)rT(t,e,n),n=n.sibling}function rT(t,e,n){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(qh,n)}catch{}switch(n.tag){case 5:Mt||Gs(n,e);case 6:var i=vt,r=bn;vt=null,Ui(t,e,n),vt=i,bn=r,vt!==null&&(bn?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(bn?(t=vt,n=n.stateNode,t.nodeType===8?vf(t.parentNode,n):t.nodeType===1&&vf(t,n),al(t)):vf(vt,n.stateNode));break;case 4:i=vt,r=bn,vt=n.stateNode.containerInfo,bn=!0,Ui(t,e,n),vt=i,bn=r;break;case 0:case 11:case 14:case 15:if(!Mt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Gp(n,e,o),r=r.next}while(r!==i)}Ui(t,e,n);break;case 1:if(!Mt&&(Gs(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){qe(n,e,a)}Ui(t,e,n);break;case 21:Ui(t,e,n);break;case 22:n.mode&1?(Mt=(i=Mt)||n.memoizedState!==null,Ui(t,e,n),Mt=i):Ui(t,e,n);break;default:Ui(t,e,n)}}function Lv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yR),e.forEach(function(i){var r=kR.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Sn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vt=a.stateNode,bn=!1;break e;case 3:vt=a.stateNode.containerInfo,bn=!0;break e;case 4:vt=a.stateNode.containerInfo,bn=!0;break e}a=a.return}if(vt===null)throw Error(O(160));rT(s,o,r),vt=null,bn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){qe(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sT(e,t),e=e.sibling}function sT(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Sn(e,t),zn(t),i&4){try{Ua(3,t,t.return),ed(3,t)}catch(y){qe(t,t.return,y)}try{Ua(5,t,t.return)}catch(y){qe(t,t.return,y)}}break;case 1:Sn(e,t),zn(t),i&512&&n!==null&&Gs(n,n.return);break;case 5:if(Sn(e,t),zn(t),i&512&&n!==null&&Gs(n,n.return),t.flags&32){var r=t.stateNode;try{il(r,"")}catch(y){qe(t,t.return,y)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&bE(r,s),Ep(a,o);var c=Ep(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?CE(r,h):u==="dangerouslySetInnerHTML"?AE(r,h):u==="children"?il(r,h):om(r,u,h,c)}switch(a){case"input":mp(r,s);break;case"textarea":kE(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Zs(r,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Zs(r,!!s.multiple,s.defaultValue,!0):Zs(r,!!s.multiple,s.multiple?[]:"",!1))}r[dl]=s}catch(y){qe(t,t.return,y)}}break;case 6:if(Sn(e,t),zn(t),i&4){if(t.stateNode===null)throw Error(O(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(y){qe(t,t.return,y)}}break;case 3:if(Sn(e,t),zn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{al(e.containerInfo)}catch(y){qe(t,t.return,y)}break;case 4:Sn(e,t),zn(t);break;case 13:Sn(e,t),zn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(jm=Je())),i&4&&Lv(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Mt=(c=Mt)||u,Sn(e,t),Mt=c):Sn(e,t),zn(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(z=t,u=t.child;u!==null;){for(h=z=u;z!==null;){switch(d=z,f=d.child,d.tag){case 0:case 11:case 14:case 15:Ua(4,d,d.return);break;case 1:Gs(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){i=d,n=d.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){qe(i,n,y)}}break;case 5:Gs(d,d.return);break;case 22:if(d.memoizedState!==null){Fv(h);continue}}f!==null?(f.return=d,z=f):Fv(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=RE("display",o))}catch(y){qe(t,t.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){qe(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Sn(e,t),zn(t),i&4&&Lv(t);break;case 21:break;default:Sn(e,t),zn(t)}}function zn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(iT(n)){var i=n;break e}n=n.return}throw Error(O(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(il(r,""),i.flags&=-33);var s=Nv(t);Xp(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Nv(t);Yp(t,a,o);break;default:throw Error(O(161))}}catch(l){qe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vR(t,e,n){z=t,oT(t)}function oT(t,e,n){for(var i=(t.mode&1)!==0;z!==null;){var r=z,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||$c;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Mt;a=$c;var c=Mt;if($c=o,(Mt=l)&&!c)for(z=r;z!==null;)o=z,l=o.child,o.tag===22&&o.memoizedState!==null?jv(r):l!==null?(l.return=o,z=l):jv(r);for(;s!==null;)z=s,oT(s),s=s.sibling;z=r,$c=a,Mt=c}Vv(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,z=s):Vv(t)}}function Vv(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mt||ed(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Mt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:In(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&wv(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}wv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&al(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Mt||e.flags&512&&Qp(e)}catch(d){qe(e,e.return,d)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function Fv(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function jv(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ed(4,e)}catch(l){qe(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){qe(e,r,l)}}var s=e.return;try{Qp(e)}catch(l){qe(e,s,l)}break;case 5:var o=e.return;try{Qp(e)}catch(l){qe(e,o,l)}}}catch(l){qe(e,e.return,l)}if(e===t){z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,z=a;break}z=e.return}}var wR=Math.ceil,ch=Di.ReactCurrentDispatcher,Vm=Di.ReactCurrentOwner,wn=Di.ReactCurrentBatchConfig,ye=0,pt=null,nt=null,Tt=0,nn=0,Qs=Sr(0),ot=0,_l=null,us=0,td=0,Fm=0,za=null,Gt=null,jm=0,_o=1/0,ui=null,uh=!1,Jp=null,lr=null,Bc=!1,Yi=null,hh=0,$a=0,Zp=null,Su=-1,Iu=0;function Wt(){return ye&6?Je():Su!==-1?Su:Su=Je()}function cr(t){return t.mode&1?ye&2&&Tt!==0?Tt&-Tt:iR.transition!==null?(Iu===0&&(Iu=BE()),Iu):(t=Te,t!==0||(t=window.event,t=t===void 0?16:YE(t.type)),t):1}function On(t,e,n,i){if(50<$a)throw $a=0,Zp=null,Error(O(185));Gl(t,n,i),(!(ye&2)||t!==pt)&&(t===pt&&(!(ye&2)&&(td|=n),ot===4&&qi(t,Tt)),Zt(t,i),n===1&&ye===0&&!(e.mode&1)&&(_o=Je()+500,Xh&&Ir()))}function Zt(t,e){var n=t.callbackNode;iA(t,e);var i=Gu(t,t===pt?Tt:0);if(i===0)n!==null&&G_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&G_(n),e===1)t.tag===0?nR(Uv.bind(null,t)):gx(Uv.bind(null,t)),JA(function(){!(ye&6)&&Ir()}),n=null;else{switch(WE(i)){case 1:n=hm;break;case 4:n=zE;break;case 16:n=Ku;break;case 536870912:n=$E;break;default:n=Ku}n=pT(n,aT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function aT(t,e){if(Su=-1,Iu=0,ye&6)throw Error(O(327));var n=t.callbackNode;if(ro()&&t.callbackNode!==n)return null;var i=Gu(t,t===pt?Tt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=dh(t,i);else{e=i;var r=ye;ye|=2;var s=cT();(pt!==t||Tt!==e)&&(ui=null,_o=Je()+500,ts(t,e));do try{TR();break}catch(a){lT(t,a)}while(!0);Sm(),ch.current=s,ye=r,nt!==null?e=0:(pt=null,Tt=0,e=ot)}if(e!==0){if(e===2&&(r=bp(t),r!==0&&(i=r,e=eg(t,r))),e===1)throw n=_l,ts(t,0),qi(t,i),Zt(t,Je()),n;if(e===6)qi(t,i);else{if(r=t.current.alternate,!(i&30)&&!ER(r)&&(e=dh(t,i),e===2&&(s=bp(t),s!==0&&(i=s,e=eg(t,s))),e===1))throw n=_l,ts(t,0),qi(t,i),Zt(t,Je()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(O(345));case 2:jr(t,Gt,ui);break;case 3:if(qi(t,i),(i&130023424)===i&&(e=jm+500-Je(),10<e)){if(Gu(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Wt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Op(jr.bind(null,t,Gt,ui),e);break}jr(t,Gt,ui);break;case 4:if(qi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Mn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Je()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*wR(i/1960))-i,10<i){t.timeoutHandle=Op(jr.bind(null,t,Gt,ui),i);break}jr(t,Gt,ui);break;case 5:jr(t,Gt,ui);break;default:throw Error(O(329))}}}return Zt(t,Je()),t.callbackNode===n?aT.bind(null,t):null}function eg(t,e){var n=za;return t.current.memoizedState.isDehydrated&&(ts(t,e).flags|=256),t=dh(t,e),t!==2&&(e=Gt,Gt=n,e!==null&&tg(e)),t}function tg(t){Gt===null?Gt=t:Gt.push.apply(Gt,t)}function ER(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Ln(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qi(t,e){for(e&=~Fm,e&=~td,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mn(e),i=1<<n;t[n]=-1,e&=~i}}function Uv(t){if(ye&6)throw Error(O(327));ro();var e=Gu(t,0);if(!(e&1))return Zt(t,Je()),null;var n=dh(t,e);if(t.tag!==0&&n===2){var i=bp(t);i!==0&&(e=i,n=eg(t,i))}if(n===1)throw n=_l,ts(t,0),qi(t,e),Zt(t,Je()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,jr(t,Gt,ui),Zt(t,Je()),null}function Um(t,e){var n=ye;ye|=1;try{return t(e)}finally{ye=n,ye===0&&(_o=Je()+500,Xh&&Ir())}}function hs(t){Yi!==null&&Yi.tag===0&&!(ye&6)&&ro();var e=ye;ye|=1;var n=wn.transition,i=Te;try{if(wn.transition=null,Te=1,t)return t()}finally{Te=i,wn.transition=n,ye=e,!(ye&6)&&Ir()}}function zm(){nn=Qs.current,Ne(Qs)}function ts(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,XA(n)),nt!==null)for(n=nt.return;n!==null;){var i=n;switch(Em(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Zu();break;case 3:mo(),Ne(Xt),Ne(Ft),Rm();break;case 5:Am(i);break;case 4:mo();break;case 13:Ne(ze);break;case 19:Ne(ze);break;case 10:Im(i.type._context);break;case 22:case 23:zm()}n=n.return}if(pt=t,nt=t=ur(t.current,null),Tt=nn=e,ot=0,_l=null,Fm=td=us=0,Gt=za=null,Hr!==null){for(e=0;e<Hr.length;e++)if(n=Hr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Hr=null}return t}function lT(t,e){do{var n=nt;try{if(Sm(),Eu.current=lh,ah){for(var i=$e.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ah=!1}if(cs=0,dt=st=$e=null,ja=!1,gl=0,Vm.current=null,n===null||n.return===null){ot=1,_l=e,nt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Tt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=kv(o);if(f!==null){f.flags&=-257,Pv(f,o,a,s,e),f.mode&1&&bv(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var y=new Set;y.add(l),e.updateQueue=y}else p.add(l);break e}else{if(!(e&1)){bv(s,c,e),$m();break e}l=Error(O(426))}}else if(je&&a.mode&1){var _=kv(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Pv(_,o,a,s,e),xm(yo(l,a));break e}}s=l=yo(l,a),ot!==4&&(ot=2),za===null?za=[s]:za.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=Hx(s,l,e);vv(s,g);break e;case 1:a=l;var m=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(lr===null||!lr.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=qx(s,a,e);vv(s,x);break e}}s=s.return}while(s!==null)}hT(n)}catch(T){e=T,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(!0)}function cT(){var t=ch.current;return ch.current=lh,t===null?lh:t}function $m(){(ot===0||ot===3||ot===2)&&(ot=4),pt===null||!(us&268435455)&&!(td&268435455)||qi(pt,Tt)}function dh(t,e){var n=ye;ye|=2;var i=cT();(pt!==t||Tt!==e)&&(ui=null,ts(t,e));do try{xR();break}catch(r){lT(t,r)}while(!0);if(Sm(),ye=n,ch.current=i,nt!==null)throw Error(O(261));return pt=null,Tt=0,ot}function xR(){for(;nt!==null;)uT(nt)}function TR(){for(;nt!==null&&!GP();)uT(nt)}function uT(t){var e=fT(t.alternate,t,nn);t.memoizedProps=t.pendingProps,e===null?hT(t):nt=e,Vm.current=null}function hT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=mR(n,e),n!==null){n.flags&=32767,nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ot=6,nt=null;return}}else if(n=gR(n,e,nn),n!==null){nt=n;return}if(e=e.sibling,e!==null){nt=e;return}nt=e=t}while(e!==null);ot===0&&(ot=5)}function jr(t,e,n){var i=Te,r=wn.transition;try{wn.transition=null,Te=1,SR(t,e,n,i)}finally{wn.transition=r,Te=i}return null}function SR(t,e,n,i){do ro();while(Yi!==null);if(ye&6)throw Error(O(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(rA(t,s),t===pt&&(nt=pt=null,Tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bc||(Bc=!0,pT(Ku,function(){return ro(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=wn.transition,wn.transition=null;var o=Te;Te=1;var a=ye;ye|=4,Vm.current=null,_R(t,n),sT(n,t),WA(Dp),Qu=!!Cp,Dp=Cp=null,t.current=n,vR(n),QP(),ye=a,Te=o,wn.transition=s}else t.current=n;if(Bc&&(Bc=!1,Yi=t,hh=r),s=t.pendingLanes,s===0&&(lr=null),JP(n.stateNode),Zt(t,Je()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(uh)throw uh=!1,t=Jp,Jp=null,t;return hh&1&&t.tag!==0&&ro(),s=t.pendingLanes,s&1?t===Zp?$a++:($a=0,Zp=t):$a=0,Ir(),null}function ro(){if(Yi!==null){var t=WE(hh),e=wn.transition,n=Te;try{if(wn.transition=null,Te=16>t?16:t,Yi===null)var i=!1;else{if(t=Yi,Yi=null,hh=0,ye&6)throw Error(O(331));var r=ye;for(ye|=4,z=t.current;z!==null;){var s=z,o=s.child;if(z.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(z=c;z!==null;){var u=z;switch(u.tag){case 0:case 11:case 15:Ua(8,u,s)}var h=u.child;if(h!==null)h.return=u,z=h;else for(;z!==null;){u=z;var d=u.sibling,f=u.return;if(nT(u),u===c){z=null;break}if(d!==null){d.return=f,z=d;break}z=f}}}var p=s.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,z=o;else e:for(;z!==null;){if(s=z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ua(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,z=g;break e}z=s.return}}var m=t.current;for(z=m;z!==null;){o=z;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,z=v;else e:for(o=m;z!==null;){if(a=z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ed(9,a)}}catch(T){qe(a,a.return,T)}if(a===o){z=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,z=x;break e}z=a.return}}if(ye=r,Ir(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(qh,t)}catch{}i=!0}return i}finally{Te=n,wn.transition=e}}return!1}function zv(t,e,n){e=yo(n,e),e=Hx(t,e,1),t=ar(t,e,1),e=Wt(),t!==null&&(Gl(t,1,e),Zt(t,e))}function qe(t,e,n){if(t.tag===3)zv(t,t,n);else for(;e!==null;){if(e.tag===3){zv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(lr===null||!lr.has(i))){t=yo(n,t),t=qx(e,t,1),e=ar(e,t,1),t=Wt(),e!==null&&(Gl(e,1,t),Zt(e,t));break}}e=e.return}}function IR(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Wt(),t.pingedLanes|=t.suspendedLanes&n,pt===t&&(Tt&n)===n&&(ot===4||ot===3&&(Tt&130023424)===Tt&&500>Je()-jm?ts(t,0):Fm|=n),Zt(t,e)}function dT(t,e){e===0&&(t.mode&1?(e=Mc,Mc<<=1,!(Mc&130023424)&&(Mc=4194304)):e=1);var n=Wt();t=ki(t,e),t!==null&&(Gl(t,e,n),Zt(t,n))}function bR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dT(t,n)}function kR(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(O(314))}i!==null&&i.delete(e),dT(t,n)}var fT;fT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xt.current)Yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yt=!1,pR(t,e,n);Yt=!!(t.flags&131072)}else Yt=!1,je&&e.flags&1048576&&mx(e,nh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Tu(t,e),t=e.pendingProps;var r=fo(e,Ft.current);io(e,n),r=Dm(null,e,i,t,r,n);var s=Mm();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(i)?(s=!0,eh(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,km(e),r.updater=Jh,e.stateNode=r,r._reactInternals=e,zp(e,i,t,n),e=Wp(null,e,i,!0,s,n)):(e.tag=0,je&&s&&wm(e),$t(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Tu(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=AR(i),t=In(i,t),r){case 0:e=Bp(null,e,i,t,n);break e;case 1:e=Cv(null,e,i,t,n);break e;case 11:e=Av(null,e,i,t,n);break e;case 14:e=Rv(null,e,i,In(i.type,t),n);break e}throw Error(O(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:In(i,r),Bp(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:In(i,r),Cv(t,e,i,r,n);case 3:e:{if(Yx(e),t===null)throw Error(O(387));i=e.pendingProps,s=e.memoizedState,r=s.element,wx(t,e),sh(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=yo(Error(O(423)),e),e=Dv(t,e,i,n,r);break e}else if(i!==r){r=yo(Error(O(424)),e),e=Dv(t,e,i,n,r);break e}else for(sn=or(e.stateNode.containerInfo.firstChild),on=e,je=!0,Pn=null,n=Sx(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(po(),i===r){e=Pi(t,e,n);break e}$t(t,e,i,n)}e=e.child}return e;case 5:return Ix(e),t===null&&Fp(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Mp(i,r)?o=null:s!==null&&Mp(i,s)&&(e.flags|=32),Qx(t,e),$t(t,e,o,n),e.child;case 6:return t===null&&Fp(e),null;case 13:return Xx(t,e,n);case 4:return Pm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=go(e,null,i,n):$t(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:In(i,r),Av(t,e,i,r,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Pe(ih,i._currentValue),i._currentValue=o,s!==null)if(Ln(s.value,o)){if(s.children===r.children&&!Xt.current){e=Pi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=xi(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),jp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(O(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),jp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$t(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,io(e,n),r=En(r),i=i(r),e.flags|=1,$t(t,e,i,n),e.child;case 14:return i=e.type,r=In(i,e.pendingProps),r=In(i.type,r),Rv(t,e,i,r,n);case 15:return Kx(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:In(i,r),Tu(t,e),e.tag=1,Jt(i)?(t=!0,eh(e)):t=!1,io(e,n),xx(e,i,r),zp(e,i,r,n),Wp(null,e,i,!0,t,n);case 19:return Jx(t,e,n);case 22:return Gx(t,e,n)}throw Error(O(156,e.tag))};function pT(t,e){return UE(t,e)}function PR(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,e,n,i){return new PR(t,e,n,i)}function Bm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function AR(t){if(typeof t=="function")return Bm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lm)return 11;if(t===cm)return 14}return 2}function ur(t,e){var n=t.alternate;return n===null?(n=vn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function bu(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Bm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case js:return ns(n.children,r,s,e);case am:o=8,r|=8;break;case hp:return t=vn(12,n,e,r|2),t.elementType=hp,t.lanes=s,t;case dp:return t=vn(13,n,e,r),t.elementType=dp,t.lanes=s,t;case fp:return t=vn(19,n,e,r),t.elementType=fp,t.lanes=s,t;case TE:return nd(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case EE:o=10;break e;case xE:o=9;break e;case lm:o=11;break e;case cm:o=14;break e;case Bi:o=16,i=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=vn(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function ns(t,e,n,i){return t=vn(7,t,i,e),t.lanes=n,t}function nd(t,e,n,i){return t=vn(22,t,i,e),t.elementType=TE,t.lanes=n,t.stateNode={isHidden:!1},t}function kf(t,e,n){return t=vn(6,t,null,e),t.lanes=n,t}function Pf(t,e,n){return e=vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function RR(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lf(0),this.expirationTimes=lf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lf(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Wm(t,e,n,i,r,s,o,a,l){return t=new RR(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=vn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},km(s),t}function CR(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function gT(t){if(!t)return yr;t=t._reactInternals;e:{if(Ts(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(Jt(n))return px(t,n,e)}return e}function mT(t,e,n,i,r,s,o,a,l){return t=Wm(n,i,!0,t,r,s,o,a,l),t.context=gT(null),n=t.current,i=Wt(),r=cr(n),s=xi(i,r),s.callback=e??null,ar(n,s,r),t.current.lanes=r,Gl(t,r,i),Zt(t,i),t}function id(t,e,n,i){var r=e.current,s=Wt(),o=cr(r);return n=gT(n),e.context===null?e.context=n:e.pendingContext=n,e=xi(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ar(r,e,o),t!==null&&(On(t,r,o,s),wu(t,r,o)),o}function fh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $v(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hm(t,e){$v(t,e),(t=t.alternate)&&$v(t,e)}function DR(){return null}var yT=typeof reportError=="function"?reportError:function(t){console.error(t)};function qm(t){this._internalRoot=t}rd.prototype.render=qm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));id(t,e,null,null)};rd.prototype.unmount=qm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hs(function(){id(null,t,null,null)}),e[bi]=null}};function rd(t){this._internalRoot=t}rd.prototype.unstable_scheduleHydration=function(t){if(t){var e=KE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hi.length&&e!==0&&e<Hi[n].priority;n++);Hi.splice(n,0,t),n===0&&QE(t)}};function Km(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Bv(){}function MR(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=fh(o);s.call(c)}}var o=mT(e,i,t,0,null,!1,!1,"",Bv);return t._reactRootContainer=o,t[bi]=o.current,ul(t.nodeType===8?t.parentNode:t),hs(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=fh(l);a.call(c)}}var l=Wm(t,0,!1,null,null,!1,!1,"",Bv);return t._reactRootContainer=l,t[bi]=l.current,ul(t.nodeType===8?t.parentNode:t),hs(function(){id(e,l,n,i)}),l}function od(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=fh(o);a.call(l)}}id(e,o,t,r)}else o=MR(n,e,t,r,i);return fh(o)}HE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wa(e.pendingLanes);n!==0&&(dm(e,n|1),Zt(e,Je()),!(ye&6)&&(_o=Je()+500,Ir()))}break;case 13:hs(function(){var i=ki(t,1);if(i!==null){var r=Wt();On(i,t,1,r)}}),Hm(t,1)}};fm=function(t){if(t.tag===13){var e=ki(t,134217728);if(e!==null){var n=Wt();On(e,t,134217728,n)}Hm(t,134217728)}};qE=function(t){if(t.tag===13){var e=cr(t),n=ki(t,e);if(n!==null){var i=Wt();On(n,t,e,i)}Hm(t,e)}};KE=function(){return Te};GE=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};Tp=function(t,e,n){switch(e){case"input":if(mp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Yh(i);if(!r)throw Error(O(90));IE(i),mp(i,r)}}}break;case"textarea":kE(t,n);break;case"select":e=n.value,e!=null&&Zs(t,!!n.multiple,e,!1)}};OE=Um;NE=hs;var OR={usingClientEntryPoint:!1,Events:[Yl,Bs,Yh,DE,ME,Um]},ra={findFiberByHostInstance:Wr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},NR={bundleType:ra.bundleType,version:ra.version,rendererPackageName:ra.rendererPackageName,rendererConfig:ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Di.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=FE(t),t===null?null:t.stateNode},findFiberByHostInstance:ra.findFiberByHostInstance||DR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wc.isDisabled&&Wc.supportsFiber)try{qh=Wc.inject(NR),Yn=Wc}catch{}}un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OR;un.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Km(e))throw Error(O(200));return CR(t,e,null,n)};un.createRoot=function(t,e){if(!Km(t))throw Error(O(299));var n=!1,i="",r=yT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Wm(t,1,!1,null,null,n,!1,i,r),t[bi]=e.current,ul(t.nodeType===8?t.parentNode:t),new qm(e)};un.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=FE(e),t=t===null?null:t.stateNode,t};un.flushSync=function(t){return hs(t)};un.hydrate=function(t,e,n){if(!sd(e))throw Error(O(200));return od(null,t,e,!0,n)};un.hydrateRoot=function(t,e,n){if(!Km(t))throw Error(O(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=yT;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mT(e,null,t,1,n??null,r,!1,s,o),t[bi]=e.current,ul(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new rd(e)};un.render=function(t,e,n){if(!sd(e))throw Error(O(200));return od(null,t,e,!1,n)};un.unmountComponentAtNode=function(t){if(!sd(t))throw Error(O(40));return t._reactRootContainer?(hs(function(){od(null,null,t,!1,function(){t._reactRootContainer=null,t[bi]=null})}),!0):!1};un.unstable_batchedUpdates=Um;un.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!sd(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return od(t,e,n,!1,i)};un.version="18.2.0-next-9e3b772b8-20220608";function _T(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_T)}catch(t){console.error(t)}}_T(),mE.exports=un;var Gm=mE.exports;const LR=sE(Gm),VR=rE({__proto__:null,default:LR},[Gm]);var Wv=Gm;cp.createRoot=Wv.createRoot,cp.hydrateRoot=Wv.hydrateRoot;function FR(){return E.jsxs("div",{className:"contenedor-incio",children:[E.jsx("div",{className:"container",children:E.jsxs("section",{id:"inicio",class:"section inicio-section",children:[E.jsx("div",{children:E.jsx("img",{src:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/25.png",alt:"Pikachu",class:"pikachu-img"})}),E.jsxs("div",{className:"text-inicio",children:[E.jsx("h1",{class:"title",children:"PokeGame"}),E.jsx("p",{class:"description",children:"Bienvenido a PokeGame React! Aqu podrs encontrar informacin sobre tus pokemones favoritos. Haz click en el botn de abajo para comenzar!"}),E.jsx("p",{children:"Encuentra a tu Pokemon favorito ahora!"}),E.jsx("a",{href:"/pokemon",class:"Btn-inicio",children:"Comenzar"})]})]})}),E.jsx("div",{className:"container",children:E.jsxs("section",{id:"inicio",class:"section inicio-section",children:[E.jsxs("div",{className:"text-inicio",children:[E.jsx("h1",{class:"title",children:"PokeGame"}),E.jsx("p",{class:"description",children:"Proyecto desarrollado con React y Firebase"}),E.jsx("p",{children:"Quieres ser el Top 1 adivinando Pokemons?"}),E.jsx("p",{children:"Adivina el Pokemon!"}),E.jsx("a",{href:"/juegoAdivinar",class:"Btn-inicio",children:"Jugar!"})]}),E.jsx("div",{children:E.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/a/a7/React-icon.svg",alt:"Pikachu",class:"pikachu-img"})})]})})]})}/**
 * @remix-run/router v1.15.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ke(){return Ke=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ke.apply(this,arguments)}var Xe;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Xe||(Xe={}));const Hv="popstate";function jR(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return vl("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:ds(r)}return zR(e,n,null,t)}function le(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vo(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function UR(){return Math.random().toString(36).substr(2,8)}function qv(t,e){return{usr:t.state,key:t.key,idx:e}}function vl(t,e,n,i){return n===void 0&&(n=null),Ke({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Mi(e):e,{state:n,key:e&&e.key||i||UR()})}function ds(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Mi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function zR(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Xe.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Ke({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=Xe.Pop;let _=u(),g=_==null?null:_-c;c=_,l&&l({action:a,location:y.location,delta:g})}function d(_,g){a=Xe.Push;let m=vl(y.location,_,g);n&&n(m,_),c=u()+1;let v=qv(m,c),x=y.createHref(m);try{o.pushState(v,"",x)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;r.location.assign(x)}s&&l&&l({action:a,location:y.location,delta:1})}function f(_,g){a=Xe.Replace;let m=vl(y.location,_,g);n&&n(m,_),c=u();let v=qv(m,c),x=y.createHref(m);o.replaceState(v,"",x),s&&l&&l({action:a,location:y.location,delta:0})}function p(_){let g=r.location.origin!=="null"?r.location.origin:r.location.href,m=typeof _=="string"?_:ds(_);return m=m.replace(/ $/,"%20"),le(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let y={get action(){return a},get location(){return t(r,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(Hv,h),l=_,()=>{r.removeEventListener(Hv,h),l=null}},createHref(_){return e(r,_)},createURL:p,encodeLocation(_){let g=p(_);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:d,replace:f,go(_){return o.go(_)}};return y}var He;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(He||(He={}));const $R=new Set(["lazy","caseSensitive","path","id","index","children"]);function BR(t){return t.index===!0}function ng(t,e,n,i){return n===void 0&&(n=[]),i===void 0&&(i={}),t.map((r,s)=>{let o=[...n,s],a=typeof r.id=="string"?r.id:o.join("-");if(le(r.index!==!0||!r.children,"Cannot specify children on an index route"),le(!i[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),BR(r)){let l=Ke({},r,e(r),{id:a});return i[a]=l,l}else{let l=Ke({},r,e(r),{id:a,children:void 0});return i[a]=l,r.children&&(l.children=ng(r.children,e,o,i)),l}})}function Ys(t,e,n){n===void 0&&(n="/");let i=typeof e=="string"?Mi(e):e,r=Vo(i.pathname||"/",n);if(r==null)return null;let s=vT(t);HR(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=iC(r);o=eC(s[a],l)}return o}function WR(t,e){let{route:n,pathname:i,params:r}=t;return{id:n.id,pathname:i,params:r,data:e[n.id],handle:n.handle}}function vT(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(le(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Ti([i,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(le(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),vT(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:JR(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of wT(s.path))r(s,o,l)}),e}function wT(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=wT(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function HR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ZR(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const qR=/^:[\w-]+$/,KR=3,GR=2,QR=1,YR=10,XR=-2,Kv=t=>t==="*";function JR(t,e){let n=t.split("/"),i=n.length;return n.some(Kv)&&(i+=XR),e&&(i+=GR),n.filter(r=>!Kv(r)).reduce((r,s)=>r+(qR.test(s)?KR:s===""?QR:YR),i)}function ZR(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function eC(t,e){let{routesMeta:n}=t,i={},r="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=r==="/"?e:e.slice(r.length)||"/",u=tC({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(i,u.params);let h=a.route;s.push({params:i,pathname:Ti([r,u.pathname]),pathnameBase:oC(Ti([r,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(r=Ti([r,u.pathnameBase]))}return s}function tC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=nC(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,u,h)=>{let{paramName:d,isOptional:f}=u;if(d==="*"){let y=a[h]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const p=a[h];return f&&!p?c[d]=void 0:c[d]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function nC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),vo(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function iC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vo(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Vo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function rC(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Mi(t):t;return{pathname:n?n.startsWith("/")?n:sC(n,e):e,search:aC(i),hash:lC(r)}}function sC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Af(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ET(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ad(t,e){let n=ET(t);return e?n.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function ld(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Mi(t):(r=Ke({},t),le(!r.pathname||!r.pathname.includes("?"),Af("?","pathname","search",r)),le(!r.pathname||!r.pathname.includes("#"),Af("#","pathname","hash",r)),le(!r.search||!r.search.includes("#"),Af("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!i&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;r.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=rC(r,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Ti=t=>t.join("/").replace(/\/\/+/g,"/"),oC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),aC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,lC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Qm{constructor(e,n,i,r){r===void 0&&(r=!1),this.status=e,this.statusText=n||"",this.internal=r,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function xT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const TT=["post","put","patch","delete"],cC=new Set(TT),uC=["get",...TT],hC=new Set(uC),dC=new Set([301,302,303,307,308]),fC=new Set([307,308]),Rf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},pC={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},sa={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ST=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gC=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),IT="remix-router-transitions";function mC(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",i=!n;le(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r;if(t.mapRouteProperties)r=t.mapRouteProperties;else if(t.detectErrorBoundary){let I=t.detectErrorBoundary;r=k=>({hasErrorBoundary:I(k)})}else r=gC;let s={},o=ng(t.routes,r,void 0,s),a,l=t.basename||"/",c=Ke({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),u=null,h=new Set,d=null,f=null,p=null,y=t.hydrationData!=null,_=Ys(o,t.history.location,l),g=null;if(_==null){let I=pn(404,{pathname:t.history.location.pathname}),{matches:k,route:R}=t0(o);_=k,g={[R.id]:I}}let m,v=_.some(I=>I.route.lazy),x=_.some(I=>I.route.loader);if(v)m=!1;else if(!x)m=!0;else if(c.v7_partialHydration){let I=t.hydrationData?t.hydrationData.loaderData:null,k=t.hydrationData?t.hydrationData.errors:null;m=_.every(R=>R.route.loader&&R.route.loader.hydrate!==!0&&(I&&I[R.route.id]!==void 0||k&&k[R.route.id]!==void 0))}else m=t.hydrationData!=null;let T,w={historyAction:t.history.action,location:t.history.location,matches:_,initialized:m,navigation:Rf,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||g,fetchers:new Map,blockers:new Map},S=Xe.Pop,b=!1,A,M=!1,U=new Map,H=null,ne=!1,ve=!1,se=[],fe=[],Y=new Map,N=0,B=-1,G=new Map,ce=new Set,we=new Map,kt=new Map,Re=new Set,yt=new Map,Ue=new Map,Li=!1;function Kk(){if(u=t.history.listen(I=>{let{action:k,location:R,delta:V}=I;if(Li){Li=!1;return}vo(Ue.size===0||V!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let W=M_({currentLocation:w.location,nextLocation:R,historyAction:k});if(W&&V!=null){Li=!0,t.history.go(V*-1),Ic(W,{state:"blocked",location:R,proceed(){Ic(W,{state:"proceeding",proceed:void 0,reset:void 0,location:R}),t.history.go(V)},reset(){let ae=new Map(w.blockers);ae.set(W,sa),en({blockers:ae})}});return}return Dr(k,R)}),n){kC(e,U);let I=()=>PC(e,U);e.addEventListener("pagehide",I),H=()=>e.removeEventListener("pagehide",I)}return w.initialized||Dr(Xe.Pop,w.location,{initialHydration:!0}),T}function Gk(){u&&u(),H&&H(),h.clear(),A&&A.abort(),w.fetchers.forEach((I,k)=>Sc(k)),w.blockers.forEach((I,k)=>D_(k))}function Qk(I){return h.add(I),()=>h.delete(I)}function en(I,k){k===void 0&&(k={}),w=Ke({},w,I);let R=[],V=[];c.v7_fetcherPersist&&w.fetchers.forEach((W,ae)=>{W.state==="idle"&&(Re.has(ae)?V.push(ae):R.push(ae))}),[...h].forEach(W=>W(w,{deletedFetchers:V,unstable_viewTransitionOpts:k.viewTransitionOpts,unstable_flushSync:k.flushSync===!0})),c.v7_fetcherPersist&&(R.forEach(W=>w.fetchers.delete(W)),V.forEach(W=>Sc(W)))}function Go(I,k,R){var V,W;let{flushSync:ae}=R===void 0?{}:R,X=w.actionData!=null&&w.navigation.formMethod!=null&&kn(w.navigation.formMethod)&&w.navigation.state==="loading"&&((V=I.state)==null?void 0:V._isRedirect)!==!0,Q;k.actionData?Object.keys(k.actionData).length>0?Q=k.actionData:Q=null:X?Q=w.actionData:Q=null;let K=k.loaderData?e0(w.loaderData,k.loaderData,k.matches||[],k.errors):w.loaderData,pe=w.blockers;pe.size>0&&(pe=new Map(pe),pe.forEach((be,_t)=>pe.set(_t,sa)));let ct=b===!0||w.navigation.formMethod!=null&&kn(w.navigation.formMethod)&&((W=I.state)==null?void 0:W._isRedirect)!==!0;a&&(o=a,a=void 0),ne||S===Xe.Pop||(S===Xe.Push?t.history.push(I,I.state):S===Xe.Replace&&t.history.replace(I,I.state));let oe;if(S===Xe.Pop){let be=U.get(w.location.pathname);be&&be.has(I.pathname)?oe={currentLocation:w.location,nextLocation:I}:U.has(I.pathname)&&(oe={currentLocation:I,nextLocation:w.location})}else if(M){let be=U.get(w.location.pathname);be?be.add(I.pathname):(be=new Set([I.pathname]),U.set(w.location.pathname,be)),oe={currentLocation:w.location,nextLocation:I}}en(Ke({},k,{actionData:Q,loaderData:K,historyAction:S,location:I,initialized:!0,navigation:Rf,revalidation:"idle",restoreScrollPosition:N_(I,k.matches||w.matches),preventScrollReset:ct,blockers:pe}),{viewTransitionOpts:oe,flushSync:ae===!0}),S=Xe.Pop,b=!1,M=!1,ne=!1,ve=!1,se=[],fe=[]}async function b_(I,k){if(typeof I=="number"){t.history.go(I);return}let R=ig(w.location,w.matches,l,c.v7_prependBasename,I,c.v7_relativeSplatPath,k==null?void 0:k.fromRouteId,k==null?void 0:k.relative),{path:V,submission:W,error:ae}=Gv(c.v7_normalizeFormMethod,!1,R,k),X=w.location,Q=vl(w.location,V,k&&k.state);Q=Ke({},Q,t.history.encodeLocation(Q));let K=k&&k.replace!=null?k.replace:void 0,pe=Xe.Push;K===!0?pe=Xe.Replace:K===!1||W!=null&&kn(W.formMethod)&&W.formAction===w.location.pathname+w.location.search&&(pe=Xe.Replace);let ct=k&&"preventScrollReset"in k?k.preventScrollReset===!0:void 0,oe=(k&&k.unstable_flushSync)===!0,be=M_({currentLocation:X,nextLocation:Q,historyAction:pe});if(be){Ic(be,{state:"blocked",location:Q,proceed(){Ic(be,{state:"proceeding",proceed:void 0,reset:void 0,location:Q}),b_(I,k)},reset(){let _t=new Map(w.blockers);_t.set(be,sa),en({blockers:_t})}});return}return await Dr(pe,Q,{submission:W,pendingError:ae,preventScrollReset:ct,replace:k&&k.replace,enableViewTransition:k&&k.unstable_viewTransition,flushSync:oe})}function Yk(){if(Yd(),en({revalidation:"loading"}),w.navigation.state!=="submitting"){if(w.navigation.state==="idle"){Dr(w.historyAction,w.location,{startUninterruptedRevalidation:!0});return}Dr(S||w.historyAction,w.navigation.location,{overrideNavigation:w.navigation})}}async function Dr(I,k,R){A&&A.abort(),A=null,S=I,ne=(R&&R.startUninterruptedRevalidation)===!0,sP(w.location,w.matches),b=(R&&R.preventScrollReset)===!0,M=(R&&R.enableViewTransition)===!0;let V=a||o,W=R&&R.overrideNavigation,ae=Ys(V,k,l),X=(R&&R.flushSync)===!0;if(!ae){let _t=pn(404,{pathname:k.pathname}),{matches:dn,route:ut}=t0(V);Xd(),Go(k,{matches:dn,loaderData:{},errors:{[ut.id]:_t}},{flushSync:X});return}if(w.initialized&&!ve&&EC(w.location,k)&&!(R&&R.submission&&kn(R.submission.formMethod))){Go(k,{matches:ae},{flushSync:X});return}A=new AbortController;let Q=aa(t.history,k,A.signal,R&&R.submission),K,pe;if(R&&R.pendingError)pe={[Ba(ae).route.id]:R.pendingError};else if(R&&R.submission&&kn(R.submission.formMethod)){let _t=await Xk(Q,k,R.submission,ae,{replace:R.replace,flushSync:X});if(_t.shortCircuited)return;K=_t.pendingActionData,pe=_t.pendingActionError,W=Cf(k,R.submission),X=!1,Q=new Request(Q.url,{signal:Q.signal})}let{shortCircuited:ct,loaderData:oe,errors:be}=await Jk(Q,k,ae,W,R&&R.submission,R&&R.fetcherSubmission,R&&R.replace,R&&R.initialHydration===!0,X,K,pe);ct||(A=null,Go(k,Ke({matches:ae},K?{actionData:K}:{},{loaderData:oe,errors:be})))}async function Xk(I,k,R,V,W){W===void 0&&(W={}),Yd();let ae=IC(k,R);en({navigation:ae},{flushSync:W.flushSync===!0});let X,Q=sg(V,k);if(!Q.route.action&&!Q.route.lazy)X={type:He.error,error:pn(405,{method:I.method,pathname:k.pathname,routeId:Q.route.id})};else if(X=await oa("action",I,Q,V,s,r,l,c.v7_relativeSplatPath),I.signal.aborted)return{shortCircuited:!0};if(Gr(X)){let K;return W&&W.replace!=null?K=W.replace:K=X.location===w.location.pathname+w.location.search,await Qo(w,X,{submission:R,replace:K}),{shortCircuited:!0}}if(Xs(X)){let K=Ba(V,Q.route.id);return(W&&W.replace)!==!0&&(S=Xe.Push),{pendingActionData:{},pendingActionError:{[K.route.id]:X.error}}}if(Kr(X))throw pn(400,{type:"defer-action"});return{pendingActionData:{[Q.route.id]:X.data}}}async function Jk(I,k,R,V,W,ae,X,Q,K,pe,ct){let oe=V||Cf(k,W),be=W||ae||r0(oe),_t=a||o,[dn,ut]=Qv(t.history,w,R,be,k,c.v7_partialHydration&&Q===!0,ve,se,fe,Re,we,ce,_t,l,pe,ct);if(Xd(Ie=>!(R&&R.some(Fe=>Fe.route.id===Ie))||dn&&dn.some(Fe=>Fe.route.id===Ie)),B=++N,dn.length===0&&ut.length===0){let Ie=R_();return Go(k,Ke({matches:R,loaderData:{},errors:ct||null},pe?{actionData:pe}:{},Ie?{fetchers:new Map(w.fetchers)}:{}),{flushSync:K}),{shortCircuited:!0}}if(!ne&&(!c.v7_partialHydration||!Q)){ut.forEach(Fe=>{let Un=w.fetchers.get(Fe.key),kc=la(void 0,Un?Un.data:void 0);w.fetchers.set(Fe.key,kc)});let Ie=pe||w.actionData;en(Ke({navigation:oe},Ie?Object.keys(Ie).length===0?{actionData:null}:{actionData:Ie}:{},ut.length>0?{fetchers:new Map(w.fetchers)}:{}),{flushSync:K})}ut.forEach(Ie=>{Y.has(Ie.key)&&Fi(Ie.key),Ie.controller&&Y.set(Ie.key,Ie.controller)});let Ps=()=>ut.forEach(Ie=>Fi(Ie.key));A&&A.signal.addEventListener("abort",Ps);let{results:Jd,loaderResults:As,fetcherResults:ji}=await k_(w.matches,R,dn,ut,I);if(I.signal.aborted)return{shortCircuited:!0};A&&A.signal.removeEventListener("abort",Ps),ut.forEach(Ie=>Y.delete(Ie.key));let Mr=n0(Jd);if(Mr){if(Mr.idx>=dn.length){let Ie=ut[Mr.idx-dn.length].key;ce.add(Ie)}return await Qo(w,Mr.result,{replace:X}),{shortCircuited:!0}}let{loaderData:Zd,errors:ef}=Zv(w,R,dn,As,ct,ut,ji,yt);yt.forEach((Ie,Fe)=>{Ie.subscribe(Un=>{(Un||Ie.done)&&yt.delete(Fe)})});let tf=R_(),Rs=C_(B),bc=tf||Rs||ut.length>0;return Ke({loaderData:Zd,errors:ef},bc?{fetchers:new Map(w.fetchers)}:{})}function Zk(I,k,R,V){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Y.has(I)&&Fi(I);let W=(V&&V.unstable_flushSync)===!0,ae=a||o,X=ig(w.location,w.matches,l,c.v7_prependBasename,R,c.v7_relativeSplatPath,k,V==null?void 0:V.relative),Q=Ys(ae,X,l);if(!Q){Yo(I,k,pn(404,{pathname:X}),{flushSync:W});return}let{path:K,submission:pe,error:ct}=Gv(c.v7_normalizeFormMethod,!0,X,V);if(ct){Yo(I,k,ct,{flushSync:W});return}let oe=sg(Q,K);if(b=(V&&V.preventScrollReset)===!0,pe&&kn(pe.formMethod)){eP(I,k,K,oe,Q,W,pe);return}we.set(I,{routeId:k,path:K}),tP(I,k,K,oe,Q,W,pe)}async function eP(I,k,R,V,W,ae,X){if(Yd(),we.delete(I),!V.route.action&&!V.route.lazy){let Fe=pn(405,{method:X.formMethod,pathname:R,routeId:k});Yo(I,k,Fe,{flushSync:ae});return}let Q=w.fetchers.get(I);Vi(I,bC(X,Q),{flushSync:ae});let K=new AbortController,pe=aa(t.history,R,K.signal,X);Y.set(I,K);let ct=N,oe=await oa("action",pe,V,W,s,r,l,c.v7_relativeSplatPath);if(pe.signal.aborted){Y.get(I)===K&&Y.delete(I);return}if(c.v7_fetcherPersist&&Re.has(I)){if(Gr(oe)||Xs(oe)){Vi(I,$i(void 0));return}}else{if(Gr(oe))if(Y.delete(I),B>ct){Vi(I,$i(void 0));return}else return ce.add(I),Vi(I,la(X)),Qo(w,oe,{fetcherSubmission:X});if(Xs(oe)){Yo(I,k,oe.error);return}}if(Kr(oe))throw pn(400,{type:"defer-action"});let be=w.navigation.location||w.location,_t=aa(t.history,be,K.signal),dn=a||o,ut=w.navigation.state!=="idle"?Ys(dn,w.navigation.location,l):w.matches;le(ut,"Didn't find any matches after fetcher action");let Ps=++N;G.set(I,Ps);let Jd=la(X,oe.data);w.fetchers.set(I,Jd);let[As,ji]=Qv(t.history,w,ut,X,be,!1,ve,se,fe,Re,we,ce,dn,l,{[V.route.id]:oe.data},void 0);ji.filter(Fe=>Fe.key!==I).forEach(Fe=>{let Un=Fe.key,kc=w.fetchers.get(Un),aP=la(void 0,kc?kc.data:void 0);w.fetchers.set(Un,aP),Y.has(Un)&&Fi(Un),Fe.controller&&Y.set(Un,Fe.controller)}),en({fetchers:new Map(w.fetchers)});let Mr=()=>ji.forEach(Fe=>Fi(Fe.key));K.signal.addEventListener("abort",Mr);let{results:Zd,loaderResults:ef,fetcherResults:tf}=await k_(w.matches,ut,As,ji,_t);if(K.signal.aborted)return;K.signal.removeEventListener("abort",Mr),G.delete(I),Y.delete(I),ji.forEach(Fe=>Y.delete(Fe.key));let Rs=n0(Zd);if(Rs){if(Rs.idx>=As.length){let Fe=ji[Rs.idx-As.length].key;ce.add(Fe)}return Qo(w,Rs.result)}let{loaderData:bc,errors:Ie}=Zv(w,w.matches,As,ef,void 0,ji,tf,yt);if(w.fetchers.has(I)){let Fe=$i(oe.data);w.fetchers.set(I,Fe)}C_(Ps),w.navigation.state==="loading"&&Ps>B?(le(S,"Expected pending action"),A&&A.abort(),Go(w.navigation.location,{matches:ut,loaderData:bc,errors:Ie,fetchers:new Map(w.fetchers)})):(en({errors:Ie,loaderData:e0(w.loaderData,bc,ut,Ie),fetchers:new Map(w.fetchers)}),ve=!1)}async function tP(I,k,R,V,W,ae,X){let Q=w.fetchers.get(I);Vi(I,la(X,Q?Q.data:void 0),{flushSync:ae});let K=new AbortController,pe=aa(t.history,R,K.signal);Y.set(I,K);let ct=N,oe=await oa("loader",pe,V,W,s,r,l,c.v7_relativeSplatPath);if(Kr(oe)&&(oe=await PT(oe,pe.signal,!0)||oe),Y.get(I)===K&&Y.delete(I),!pe.signal.aborted){if(Re.has(I)){Vi(I,$i(void 0));return}if(Gr(oe))if(B>ct){Vi(I,$i(void 0));return}else{ce.add(I),await Qo(w,oe);return}if(Xs(oe)){Yo(I,k,oe.error);return}le(!Kr(oe),"Unhandled fetcher deferred data"),Vi(I,$i(oe.data))}}async function Qo(I,k,R){let{submission:V,fetcherSubmission:W,replace:ae}=R===void 0?{}:R;k.revalidate&&(ve=!0);let X=vl(I.location,k.location,{_isRedirect:!0});if(le(X,"Expected a location on the redirect navigation"),n){let be=!1;if(k.reloadDocument)be=!0;else if(ST.test(k.location)){const _t=t.history.createURL(k.location);be=_t.origin!==e.location.origin||Vo(_t.pathname,l)==null}if(be){ae?e.location.replace(k.location):e.location.assign(k.location);return}}A=null;let Q=ae===!0?Xe.Replace:Xe.Push,{formMethod:K,formAction:pe,formEncType:ct}=I.navigation;!V&&!W&&K&&pe&&ct&&(V=r0(I.navigation));let oe=V||W;if(fC.has(k.status)&&oe&&kn(oe.formMethod))await Dr(Q,X,{submission:Ke({},oe,{formAction:k.location}),preventScrollReset:b});else{let be=Cf(X,V);await Dr(Q,X,{overrideNavigation:be,fetcherSubmission:W,preventScrollReset:b})}}async function k_(I,k,R,V,W){let ae=await Promise.all([...R.map(K=>oa("loader",W,K,k,s,r,l,c.v7_relativeSplatPath)),...V.map(K=>K.matches&&K.match&&K.controller?oa("loader",aa(t.history,K.path,K.controller.signal),K.match,K.matches,s,r,l,c.v7_relativeSplatPath):{type:He.error,error:pn(404,{pathname:K.path})})]),X=ae.slice(0,R.length),Q=ae.slice(R.length);return await Promise.all([i0(I,R,X,X.map(()=>W.signal),!1,w.loaderData),i0(I,V.map(K=>K.match),Q,V.map(K=>K.controller?K.controller.signal:null),!0)]),{results:ae,loaderResults:X,fetcherResults:Q}}function Yd(){ve=!0,se.push(...Xd()),we.forEach((I,k)=>{Y.has(k)&&(fe.push(k),Fi(k))})}function Vi(I,k,R){R===void 0&&(R={}),w.fetchers.set(I,k),en({fetchers:new Map(w.fetchers)},{flushSync:(R&&R.flushSync)===!0})}function Yo(I,k,R,V){V===void 0&&(V={});let W=Ba(w.matches,k);Sc(I),en({errors:{[W.route.id]:R},fetchers:new Map(w.fetchers)},{flushSync:(V&&V.flushSync)===!0})}function P_(I){return c.v7_fetcherPersist&&(kt.set(I,(kt.get(I)||0)+1),Re.has(I)&&Re.delete(I)),w.fetchers.get(I)||pC}function Sc(I){let k=w.fetchers.get(I);Y.has(I)&&!(k&&k.state==="loading"&&G.has(I))&&Fi(I),we.delete(I),G.delete(I),ce.delete(I),Re.delete(I),w.fetchers.delete(I)}function nP(I){if(c.v7_fetcherPersist){let k=(kt.get(I)||0)-1;k<=0?(kt.delete(I),Re.add(I)):kt.set(I,k)}else Sc(I);en({fetchers:new Map(w.fetchers)})}function Fi(I){let k=Y.get(I);le(k,"Expected fetch controller: "+I),k.abort(),Y.delete(I)}function A_(I){for(let k of I){let R=P_(k),V=$i(R.data);w.fetchers.set(k,V)}}function R_(){let I=[],k=!1;for(let R of ce){let V=w.fetchers.get(R);le(V,"Expected fetcher: "+R),V.state==="loading"&&(ce.delete(R),I.push(R),k=!0)}return A_(I),k}function C_(I){let k=[];for(let[R,V]of G)if(V<I){let W=w.fetchers.get(R);le(W,"Expected fetcher: "+R),W.state==="loading"&&(Fi(R),G.delete(R),k.push(R))}return A_(k),k.length>0}function iP(I,k){let R=w.blockers.get(I)||sa;return Ue.get(I)!==k&&Ue.set(I,k),R}function D_(I){w.blockers.delete(I),Ue.delete(I)}function Ic(I,k){let R=w.blockers.get(I)||sa;le(R.state==="unblocked"&&k.state==="blocked"||R.state==="blocked"&&k.state==="blocked"||R.state==="blocked"&&k.state==="proceeding"||R.state==="blocked"&&k.state==="unblocked"||R.state==="proceeding"&&k.state==="unblocked","Invalid blocker state transition: "+R.state+" -> "+k.state);let V=new Map(w.blockers);V.set(I,k),en({blockers:V})}function M_(I){let{currentLocation:k,nextLocation:R,historyAction:V}=I;if(Ue.size===0)return;Ue.size>1&&vo(!1,"A router only supports one blocker at a time");let W=Array.from(Ue.entries()),[ae,X]=W[W.length-1],Q=w.blockers.get(ae);if(!(Q&&Q.state==="proceeding")&&X({currentLocation:k,nextLocation:R,historyAction:V}))return ae}function Xd(I){let k=[];return yt.forEach((R,V)=>{(!I||I(V))&&(R.cancel(),k.push(V),yt.delete(V))}),k}function rP(I,k,R){if(d=I,p=k,f=R||null,!y&&w.navigation===Rf){y=!0;let V=N_(w.location,w.matches);V!=null&&en({restoreScrollPosition:V})}return()=>{d=null,p=null,f=null}}function O_(I,k){return f&&f(I,k.map(V=>WR(V,w.loaderData)))||I.key}function sP(I,k){if(d&&p){let R=O_(I,k);d[R]=p()}}function N_(I,k){if(d){let R=O_(I,k),V=d[R];if(typeof V=="number")return V}return null}function oP(I){s={},a=ng(I,r,void 0,s)}return T={get basename(){return l},get future(){return c},get state(){return w},get routes(){return o},get window(){return e},initialize:Kk,subscribe:Qk,enableScrollRestoration:rP,navigate:b_,fetch:Zk,revalidate:Yk,createHref:I=>t.history.createHref(I),encodeLocation:I=>t.history.encodeLocation(I),getFetcher:P_,deleteFetcher:nP,dispose:Gk,getBlocker:iP,deleteBlocker:D_,_internalFetchControllers:Y,_internalActiveDeferreds:yt,_internalSetRoutes:oP},T}function yC(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function ig(t,e,n,i,r,s,o,a){let l,c;if(o){l=[];for(let h of e)if(l.push(h),h.route.id===o){c=h;break}}else l=e,c=e[e.length-1];let u=ld(r||".",ad(l,s),Vo(t.pathname,n)||t.pathname,a==="path");return r==null&&(u.search=t.search,u.hash=t.hash),(r==null||r===""||r===".")&&c&&c.route.index&&!Ym(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),i&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Ti([n,u.pathname])),ds(u)}function Gv(t,e,n,i){if(!i||!yC(i))return{path:n};if(i.formMethod&&!SC(i.formMethod))return{path:n,error:pn(405,{method:i.formMethod})};let r=()=>({path:n,error:pn(400,{type:"invalid-body"})}),s=i.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=kT(n);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!kn(o))return r();let d=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((f,p)=>{let[y,_]=p;return""+f+y+"="+_+`
`},""):String(i.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:void 0,text:d}}}else if(i.formEncType==="application/json"){if(!kn(o))return r();try{let d=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:d,text:void 0}}}catch{return r()}}}le(typeof FormData=="function","FormData is not available in this environment");let l,c;if(i.formData)l=rg(i.formData),c=i.formData;else if(i.body instanceof FormData)l=rg(i.body),c=i.body;else if(i.body instanceof URLSearchParams)l=i.body,c=Jv(l);else if(i.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(i.body),c=Jv(l)}catch{return r()}let u={formMethod:o,formAction:a,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(kn(u.formMethod))return{path:n,submission:u};let h=Mi(n);return e&&h.search&&Ym(h.search)&&l.append("index",""),h.search="?"+l,{path:ds(h),submission:u}}function _C(t,e){let n=t;if(e){let i=t.findIndex(r=>r.route.id===e);i>=0&&(n=t.slice(0,i))}return n}function Qv(t,e,n,i,r,s,o,a,l,c,u,h,d,f,p,y){let _=y?Object.values(y)[0]:p?Object.values(p)[0]:void 0,g=t.createURL(e.location),m=t.createURL(r),v=y?Object.keys(y)[0]:void 0,T=_C(n,v).filter((S,b)=>{let{route:A}=S;if(A.lazy)return!0;if(A.loader==null)return!1;if(s)return A.loader.hydrate?!0:e.loaderData[A.id]===void 0&&(!e.errors||e.errors[A.id]===void 0);if(vC(e.loaderData,e.matches[b],S)||a.some(H=>H===S.route.id))return!0;let M=e.matches[b],U=S;return Yv(S,Ke({currentUrl:g,currentParams:M.params,nextUrl:m,nextParams:U.params},i,{actionResult:_,defaultShouldRevalidate:o||g.pathname+g.search===m.pathname+m.search||g.search!==m.search||bT(M,U)}))}),w=[];return u.forEach((S,b)=>{if(s||!n.some(ne=>ne.route.id===S.routeId)||c.has(b))return;let A=Ys(d,S.path,f);if(!A){w.push({key:b,routeId:S.routeId,path:S.path,matches:null,match:null,controller:null});return}let M=e.fetchers.get(b),U=sg(A,S.path),H=!1;h.has(b)?H=!1:l.includes(b)?H=!0:M&&M.state!=="idle"&&M.data===void 0?H=o:H=Yv(U,Ke({currentUrl:g,currentParams:e.matches[e.matches.length-1].params,nextUrl:m,nextParams:n[n.length-1].params},i,{actionResult:_,defaultShouldRevalidate:o})),H&&w.push({key:b,routeId:S.routeId,path:S.path,matches:A,match:U,controller:new AbortController})}),[T,w]}function vC(t,e,n){let i=!e||n.route.id!==e.route.id,r=t[n.route.id]===void 0;return i||r}function bT(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Yv(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function Xv(t,e,n){if(!t.lazy)return;let i=await t.lazy();if(!t.lazy)return;let r=n[t.id];le(r,"No route found in manifest");let s={};for(let o in i){let l=r[o]!==void 0&&o!=="hasErrorBoundary";vo(!l,'Route "'+r.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!$R.has(o)&&(s[o]=i[o])}Object.assign(r,s),Object.assign(r,Ke({},e(r),{lazy:void 0}))}async function oa(t,e,n,i,r,s,o,a,l){l===void 0&&(l={});let c,u,h,d=y=>{let _,g=new Promise((m,v)=>_=v);return h=()=>_(),e.signal.addEventListener("abort",h),Promise.race([y({request:e,params:n.params,context:l.requestContext}),g])};try{let y=n.route[t];if(n.route.lazy)if(y){let _,g=await Promise.all([d(y).catch(m=>{_=m}),Xv(n.route,s,r)]);if(_)throw _;u=g[0]}else if(await Xv(n.route,s,r),y=n.route[t],y)u=await d(y);else if(t==="action"){let _=new URL(e.url),g=_.pathname+_.search;throw pn(405,{method:e.method,pathname:g,routeId:n.route.id})}else return{type:He.data,data:void 0};else if(y)u=await d(y);else{let _=new URL(e.url),g=_.pathname+_.search;throw pn(404,{pathname:g})}le(u!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(y){c=He.error,u=y}finally{h&&e.signal.removeEventListener("abort",h)}if(TC(u)){let y=u.status;if(dC.has(y)){let g=u.headers.get("Location");if(le(g,"Redirects returned/thrown from loaders/actions must have a Location header"),!ST.test(g))g=ig(new URL(e.url),i.slice(0,i.indexOf(n)+1),o,!0,g,a);else if(!l.isStaticRequest){let m=new URL(e.url),v=g.startsWith("//")?new URL(m.protocol+g):new URL(g),x=Vo(v.pathname,o)!=null;v.origin===m.origin&&x&&(g=v.pathname+v.search+v.hash)}if(l.isStaticRequest)throw u.headers.set("Location",g),u;return{type:He.redirect,status:y,location:g,revalidate:u.headers.get("X-Remix-Revalidate")!==null,reloadDocument:u.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:c===He.error?He.error:He.data,response:u};let _;try{let g=u.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?u.body==null?_=null:_=await u.json():_=await u.text()}catch(g){return{type:He.error,error:g}}return c===He.error?{type:c,error:new Qm(y,u.statusText,_),headers:u.headers}:{type:He.data,data:_,statusCode:u.status,headers:u.headers}}if(c===He.error)return{type:c,error:u};if(xC(u)){var f,p;return{type:He.deferred,deferredData:u,statusCode:(f=u.init)==null?void 0:f.status,headers:((p=u.init)==null?void 0:p.headers)&&new Headers(u.init.headers)}}return{type:He.data,data:u}}function aa(t,e,n,i){let r=t.createURL(kT(e)).toString(),s={signal:n};if(i&&kn(i.formMethod)){let{formMethod:o,formEncType:a}=i;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(i.json)):a==="text/plain"?s.body=i.text:a==="application/x-www-form-urlencoded"&&i.formData?s.body=rg(i.formData):s.body=i.formData}return new Request(r,s)}function rg(t){let e=new URLSearchParams;for(let[n,i]of t.entries())e.append(n,typeof i=="string"?i:i.name);return e}function Jv(t){let e=new FormData;for(let[n,i]of t.entries())e.append(n,i);return e}function wC(t,e,n,i,r){let s={},o=null,a,l=!1,c={};return n.forEach((u,h)=>{let d=e[h].route.id;if(le(!Gr(u),"Cannot handle redirect results in processLoaderData"),Xs(u)){let f=Ba(t,d),p=u.error;i&&(p=Object.values(i)[0],i=void 0),o=o||{},o[f.route.id]==null&&(o[f.route.id]=p),s[d]=void 0,l||(l=!0,a=xT(u.error)?u.error.status:500),u.headers&&(c[d]=u.headers)}else Kr(u)?(r.set(d,u.deferredData),s[d]=u.deferredData.data):s[d]=u.data,u.statusCode!=null&&u.statusCode!==200&&!l&&(a=u.statusCode),u.headers&&(c[d]=u.headers)}),i&&(o=i,s[Object.keys(i)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function Zv(t,e,n,i,r,s,o,a){let{loaderData:l,errors:c}=wC(e,n,i,r,a);for(let u=0;u<s.length;u++){let{key:h,match:d,controller:f}=s[u];le(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let p=o[u];if(!(f&&f.signal.aborted))if(Xs(p)){let y=Ba(t.matches,d==null?void 0:d.route.id);c&&c[y.route.id]||(c=Ke({},c,{[y.route.id]:p.error})),t.fetchers.delete(h)}else if(Gr(p))le(!1,"Unhandled fetcher revalidation redirect");else if(Kr(p))le(!1,"Unhandled fetcher deferred data");else{let y=$i(p.data);t.fetchers.set(h,y)}}return{loaderData:l,errors:c}}function e0(t,e,n,i){let r=Ke({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(r[o]=e[o]):t[o]!==void 0&&s.route.loader&&(r[o]=t[o]),i&&i.hasOwnProperty(o))break}return r}function Ba(t,e){return(e?t.slice(0,t.findIndex(i=>i.route.id===e)+1):[...t]).reverse().find(i=>i.route.hasErrorBoundary===!0)||t[0]}function t0(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function pn(t,e){let{pathname:n,routeId:i,method:r,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",r&&n&&i?a="You made a "+r+' request to "'+n+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a='Route "'+i+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",r&&n&&i?a="You made a "+r.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":r&&(a='Invalid request method "'+r.toUpperCase()+'"')),new Qm(t||500,o,new Error(a),!0)}function n0(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Gr(n))return{result:n,idx:e}}}function kT(t){let e=typeof t=="string"?Mi(t):t;return ds(Ke({},e,{hash:""}))}function EC(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function Kr(t){return t.type===He.deferred}function Xs(t){return t.type===He.error}function Gr(t){return(t&&t.type)===He.redirect}function xC(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function TC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function SC(t){return hC.has(t.toLowerCase())}function kn(t){return cC.has(t.toLowerCase())}async function i0(t,e,n,i,r,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(h=>h.route.id===l.route.id),u=c!=null&&!bT(c,l)&&(s&&s[l.route.id])!==void 0;if(Kr(a)&&(r||u)){let h=i[o];le(h,"Expected an AbortSignal for revalidating fetcher deferred result"),await PT(a,h,r).then(d=>{d&&(n[o]=d||n[o])})}}}async function PT(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:He.data,data:t.deferredData.unwrappedData}}catch(r){return{type:He.error,error:r}}return{type:He.data,data:t.deferredData.data}}}function Ym(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function sg(t,e){let n=typeof e=="string"?Mi(e).search:e.search;if(t[t.length-1].route.index&&Ym(n||""))return t[t.length-1];let i=ET(t);return i[i.length-1]}function r0(t){let{formMethod:e,formAction:n,formEncType:i,text:r,formData:s,json:o}=t;if(!(!e||!n||!i)){if(r!=null)return{formMethod:e,formAction:n,formEncType:i,formData:void 0,json:void 0,text:r};if(s!=null)return{formMethod:e,formAction:n,formEncType:i,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:i,formData:void 0,json:o,text:void 0}}}function Cf(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function IC(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function la(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function bC(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function $i(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function kC(t,e){try{let n=t.sessionStorage.getItem(IT);if(n){let i=JSON.parse(n);for(let[r,s]of Object.entries(i||{}))s&&Array.isArray(s)&&e.set(r,new Set(s||[]))}}catch{}}function PC(t,e){if(e.size>0){let n={};for(let[i,r]of e)n[i]=[...r];try{t.sessionStorage.setItem(IT,JSON.stringify(n))}catch(i){vo(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.22.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wl(){return wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wl.apply(this,arguments)}const cd=P.createContext(null),AT=P.createContext(null),br=P.createContext(null),ud=P.createContext(null),oi=P.createContext({outlet:null,matches:[],isDataRoute:!1}),RT=P.createContext(null);function AC(t,e){let{relative:n}=e===void 0?{}:e;Fo()||le(!1);let{basename:i,navigator:r}=P.useContext(br),{hash:s,pathname:o,search:a}=DT(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:Ti([i,o])),r.createHref({pathname:l,search:a,hash:s})}function Fo(){return P.useContext(ud)!=null}function Jl(){return Fo()||le(!1),P.useContext(ud).location}function CT(t){P.useContext(br).static||P.useLayoutEffect(t)}function Zl(){let{isDataRoute:t}=P.useContext(oi);return t?WC():RC()}function RC(){Fo()||le(!1);let t=P.useContext(cd),{basename:e,future:n,navigator:i}=P.useContext(br),{matches:r}=P.useContext(oi),{pathname:s}=Jl(),o=JSON.stringify(ad(r,n.v7_relativeSplatPath)),a=P.useRef(!1);return CT(()=>{a.current=!0}),P.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let h=ld(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ti([e,h.pathname])),(u.replace?i.replace:i.push)(h,u.state,u)},[e,i,o,s,t])}const CC=P.createContext(null);function DC(t){let e=P.useContext(oi).outlet;return e&&P.createElement(CC.Provider,{value:t},e)}function MC(){let{matches:t}=P.useContext(oi),e=t[t.length-1];return e?e.params:{}}function DT(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=P.useContext(br),{matches:r}=P.useContext(oi),{pathname:s}=Jl(),o=JSON.stringify(ad(r,i.v7_relativeSplatPath));return P.useMemo(()=>ld(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function OC(t,e,n,i){Fo()||le(!1);let{navigator:r}=P.useContext(br),{matches:s}=P.useContext(oi),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Jl(),u;if(e){var h;let _=typeof e=="string"?Mi(e):e;l==="/"||(h=_.pathname)!=null&&h.startsWith(l)||le(!1),u=_}else u=c;let d=u.pathname||"/",f=d;if(l!=="/"){let _=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(_.length).join("/")}let p=Ys(t,{pathname:f}),y=jC(p&&p.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Ti([l,r.encodeLocation?r.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Ti([l,r.encodeLocation?r.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n,i);return e&&y?P.createElement(ud.Provider,{value:{location:wl({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Xe.Pop}},y):y}function NC(){let t=BC(),e=xT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:r},n):null,null)}const LC=P.createElement(NC,null);class VC extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(oi.Provider,{value:this.props.routeContext},P.createElement(RT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function FC(t){let{routeContext:e,match:n,children:i}=t,r=P.useContext(cd);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(oi.Provider,{value:e},i)}function jC(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id]));u>=0||le(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:d,errors:f}=n,p=h.route.loader&&d[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||p){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,d)=>{let f,p=!1,y=null,_=null;n&&(f=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||LC,l&&(c<0&&d===0?(HC("route-fallback",!1),p=!0,_=null):c===d&&(p=!0,_=h.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,d+1)),m=()=>{let v;return f?v=y:p?v=_:h.route.Component?v=P.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=u,P.createElement(FC,{match:h,routeContext:{outlet:u,matches:g,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?P.createElement(VC,{location:n.location,revalidation:n.revalidation,component:y,error:f,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var MT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(MT||{}),ph=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ph||{});function UC(t){let e=P.useContext(cd);return e||le(!1),e}function zC(t){let e=P.useContext(AT);return e||le(!1),e}function $C(t){let e=P.useContext(oi);return e||le(!1),e}function OT(t){let e=$C(),n=e.matches[e.matches.length-1];return n.route.id||le(!1),n.route.id}function BC(){var t;let e=P.useContext(RT),n=zC(ph.UseRouteError),i=OT(ph.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function WC(){let{router:t}=UC(MT.UseNavigateStable),e=OT(ph.UseNavigateStable),n=P.useRef(!1);return CT(()=>{n.current=!0}),P.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,wl({fromRouteId:e},s)))},[t,e])}const s0={};function HC(t,e,n){!e&&!s0[t]&&(s0[t]=!0)}function qC(t){let{to:e,replace:n,state:i,relative:r}=t;Fo()||le(!1);let{future:s,static:o}=P.useContext(br),{matches:a}=P.useContext(oi),{pathname:l}=Jl(),c=Zl(),u=ld(e,ad(a,s.v7_relativeSplatPath),l,r==="path"),h=JSON.stringify(u);return P.useEffect(()=>c(JSON.parse(h),{replace:n,state:i,relative:r}),[c,h,r,n,i]),null}function NT(t){return DC(t.context)}function KC(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Xe.Pop,navigator:s,static:o=!1,future:a}=t;Fo()&&le(!1);let l=e.replace(/^\/*/,"/"),c=P.useMemo(()=>({basename:l,navigator:s,static:o,future:wl({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=Mi(i));let{pathname:u="/",search:h="",hash:d="",state:f=null,key:p="default"}=i,y=P.useMemo(()=>{let _=Vo(u,l);return _==null?null:{location:{pathname:_,search:h,hash:d,state:f,key:p},navigationType:r}},[l,u,h,d,f,p,r]);return y==null?null:P.createElement(br.Provider,{value:c},P.createElement(ud.Provider,{children:n,value:y}))}new Promise(()=>{});function GC(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:P.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:P.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:P.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.22.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function El(){return El=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},El.apply(this,arguments)}function QC(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function YC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function XC(t,e){return t.button===0&&(!e||e==="_self")&&!YC(t)}const JC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],ZC="6";try{window.__reactRouterVersion=ZC}catch{}function e2(t,e){return mC({basename:e==null?void 0:e.basename,future:El({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:jR({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||t2(),routes:t,mapRouteProperties:GC,window:e==null?void 0:e.window}).initialize()}function t2(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=El({},e,{errors:n2(e.errors)})),e}function n2(t){if(!t)return null;let e=Object.entries(t),n={};for(let[i,r]of e)if(r&&r.__type==="RouteErrorResponse")n[i]=new Qm(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){if(r.__subType){let s=window[r.__subType];if(typeof s=="function")try{let o=new s(r.message);o.stack="",n[i]=o}catch{}}if(n[i]==null){let s=new Error(r.message);s.stack="",n[i]=s}}else n[i]=r;return n}const i2=P.createContext({isTransitioning:!1}),r2=P.createContext(new Map),s2="startTransition",o0=bP[s2],o2="flushSync",a0=VR[o2];function a2(t){o0?o0(t):t()}function ca(t){a0?a0(t):t()}let l2=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",n(i))}})}};function c2(t){let{fallbackElement:e,router:n,future:i}=t,[r,s]=P.useState(n.state),[o,a]=P.useState(),[l,c]=P.useState({isTransitioning:!1}),[u,h]=P.useState(),[d,f]=P.useState(),[p,y]=P.useState(),_=P.useRef(new Map),{v7_startTransition:g}=i||{},m=P.useCallback(S=>{g?a2(S):S()},[g]),v=P.useCallback((S,b)=>{let{deletedFetchers:A,unstable_flushSync:M,unstable_viewTransitionOpts:U}=b;A.forEach(ne=>_.current.delete(ne)),S.fetchers.forEach((ne,ve)=>{ne.data!==void 0&&_.current.set(ve,ne.data)});let H=n.window==null||typeof n.window.document.startViewTransition!="function";if(!U||H){M?ca(()=>s(S)):m(()=>s(S));return}if(M){ca(()=>{d&&(u&&u.resolve(),d.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:U.currentLocation,nextLocation:U.nextLocation})});let ne=n.window.document.startViewTransition(()=>{ca(()=>s(S))});ne.finished.finally(()=>{ca(()=>{h(void 0),f(void 0),a(void 0),c({isTransitioning:!1})})}),ca(()=>f(ne));return}d?(u&&u.resolve(),d.skipTransition(),y({state:S,currentLocation:U.currentLocation,nextLocation:U.nextLocation})):(a(S),c({isTransitioning:!0,flushSync:!1,currentLocation:U.currentLocation,nextLocation:U.nextLocation}))},[n.window,d,u,_,m]);P.useLayoutEffect(()=>n.subscribe(v),[n,v]),P.useEffect(()=>{l.isTransitioning&&!l.flushSync&&h(new l2)},[l]),P.useEffect(()=>{if(u&&o&&n.window){let S=o,b=u.promise,A=n.window.document.startViewTransition(async()=>{m(()=>s(S)),await b});A.finished.finally(()=>{h(void 0),f(void 0),a(void 0),c({isTransitioning:!1})}),f(A)}},[m,o,u,n.window]),P.useEffect(()=>{u&&o&&r.location.key===o.location.key&&u.resolve()},[u,d,r.location,o]),P.useEffect(()=>{!l.isTransitioning&&p&&(a(p.state),c({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),y(void 0))},[l.isTransitioning,p]),P.useEffect(()=>{},[]);let x=P.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:S=>n.navigate(S),push:(S,b,A)=>n.navigate(S,{state:b,preventScrollReset:A==null?void 0:A.preventScrollReset}),replace:(S,b,A)=>n.navigate(S,{replace:!0,state:b,preventScrollReset:A==null?void 0:A.preventScrollReset})}),[n]),T=n.basename||"/",w=P.useMemo(()=>({router:n,navigator:x,static:!1,basename:T}),[n,x,T]);return P.createElement(P.Fragment,null,P.createElement(cd.Provider,{value:w},P.createElement(AT.Provider,{value:r},P.createElement(r2.Provider,{value:_.current},P.createElement(i2.Provider,{value:l},P.createElement(KC,{basename:T,location:r.location,navigationType:r.historyAction,navigator:x,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},r.initialized||n.future.v7_partialHydration?P.createElement(u2,{routes:n.routes,future:n.future,state:r}):e))))),null)}function u2(t){let{routes:e,future:n,state:i}=t;return OC(e,void 0,i,n)}const h2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",d2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xi=P.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:h}=e,d=QC(e,JC),{basename:f}=P.useContext(br),p,y=!1;if(typeof c=="string"&&d2.test(c)&&(p=c,h2))try{let v=new URL(window.location.href),x=c.startsWith("//")?new URL(v.protocol+c):new URL(c),T=Vo(x.pathname,f);x.origin===v.origin&&T!=null?c=T+x.search+x.hash:y=!0}catch{}let _=AC(c,{relative:r}),g=f2(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:r,unstable_viewTransition:h});function m(v){i&&i(v),v.defaultPrevented||g(v)}return P.createElement("a",El({},d,{href:p||_,onClick:y||s?i:m,ref:n,target:l}))});var l0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(l0||(l0={}));var c0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(c0||(c0={}));function f2(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Zl(),c=Jl(),u=DT(t,{relative:o});return P.useCallback(h=>{if(XC(h,n)){h.preventDefault();let d=i!==void 0?i:ds(c)===ds(u);l(t,{replace:d,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,u,i,r,n,t,s,o,a])}function LT(){return E.jsx(E.Fragment,{children:E.jsxs("ul",{children:[E.jsx("li",{children:E.jsx(Xi,{to:"/",children:"Inicio"})}),E.jsx("li",{children:E.jsx(Xi,{to:"/pokemon",children:"Pokedex"})}),E.jsx("li",{children:E.jsx(Xi,{to:"/juegoAdivinar",children:"Mini Juego"})}),E.jsx("li",{children:E.jsx(Xi,{to:"/leaderboard",children:"Leaderboard"})})]})})}var u0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},p2=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},FT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),i.push(n[u],n[h],n[d],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):p2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||h==null)throw new g2;const d=s<<2|a>>4;if(i.push(d),c!==64){const f=a<<4&240|c>>2;if(i.push(f),h!==64){const p=c<<6&192|h;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class g2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const m2=function(t){const e=VT(t);return FT.encodeByteArray(e,!0)},gh=function(t){return m2(t).replace(/\./g,"")},jT=function(t){try{return FT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=()=>y2().__FIREBASE_DEFAULTS__,v2=()=>{if(typeof process>"u"||typeof u0>"u")return;const t=u0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},w2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jT(t[1]);return e&&JSON.parse(e)},hd=()=>{try{return _2()||v2()||w2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},UT=t=>{var e,n;return(n=(e=hd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},E2=t=>{const e=UT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},zT=()=>{var t;return(t=hd())===null||t===void 0?void 0:t.config},$T=t=>{var e;return(e=hd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[gh(JSON.stringify(n)),gh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function S2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function I2(){var t;const e=(t=hd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function b2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function k2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function P2(){const t=rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function A2(){return!I2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BT(){try{return typeof indexedDB=="object"}catch{return!1}}function R2(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="FirebaseError";class Oi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=C2,Object.setPrototypeOf(this,Oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ec.prototype.create)}}class ec{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?D2(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Oi(r,a,i)}}function D2(t,e){return t.replace(M2,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const M2=/\{\$([^}]+)}/g;function O2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function mh(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(h0(s)&&h0(o)){if(!mh(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function h0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function xa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Ta(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function N2(t,e){const n=new L2(t,e);return n.subscribe.bind(n)}class L2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");V2(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Df),r.error===void 0&&(r.error=Df),r.complete===void 0&&(r.complete=Df);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Df(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t){return t&&t._delegate?t._delegate:t}class fs{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new x2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(U2(e))try{this.getOrInitializeService({instanceIdentifier:Ur})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Ur){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ur){return this.instances.has(e)}getOptions(e=Ur){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:j2(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ur){return this.component?this.component.multipleInstances?e:Ur:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function j2(t){return t===Ur?void 0:t}function U2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new F2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const $2={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},B2=ge.INFO,W2={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},H2=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=W2[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xm{constructor(e){this.name=e,this._logLevel=B2,this._logHandler=H2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const q2=(t,e)=>e.some(n=>t instanceof n);let d0,f0;function K2(){return d0||(d0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function G2(){return f0||(f0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WT=new WeakMap,og=new WeakMap,HT=new WeakMap,Mf=new WeakMap,Jm=new WeakMap;function Q2(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(hr(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&WT.set(n,t)}).catch(()=>{}),Jm.set(e,t),e}function Y2(t){if(og.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});og.set(t,e)}let ag={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return og.get(t);if(e==="objectStoreNames")return t.objectStoreNames||HT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function X2(t){ag=t(ag)}function J2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Of(this),e,...n);return HT.set(i,e.sort?e.sort():[e]),hr(i)}:G2().includes(t)?function(...e){return t.apply(Of(this),e),hr(WT.get(this))}:function(...e){return hr(t.apply(Of(this),e))}}function Z2(t){return typeof t=="function"?J2(t):(t instanceof IDBTransaction&&Y2(t),q2(t,K2())?new Proxy(t,ag):t)}function hr(t){if(t instanceof IDBRequest)return Q2(t);if(Mf.has(t))return Mf.get(t);const e=Z2(t);return e!==t&&(Mf.set(t,e),Jm.set(e,t)),e}const Of=t=>Jm.get(t);function eD(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=hr(o);return i&&o.addEventListener("upgradeneeded",l=>{i(hr(o.result),l.oldVersion,l.newVersion,hr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const tD=["get","getKey","getAll","getAllKeys","count"],nD=["put","add","delete","clear"],Nf=new Map;function p0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nf.get(e))return Nf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=nD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||tD.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return Nf.set(e,s),s}X2(t=>({...t,get:(e,n,i)=>p0(e,n)||t.get(e,n,i),has:(e,n)=>!!p0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function rD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lg="@firebase/app",g0="0.9.27";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new Xm("@firebase/app"),sD="@firebase/app-compat",oD="@firebase/analytics-compat",aD="@firebase/analytics",lD="@firebase/app-check-compat",cD="@firebase/app-check",uD="@firebase/auth",hD="@firebase/auth-compat",dD="@firebase/database",fD="@firebase/database-compat",pD="@firebase/functions",gD="@firebase/functions-compat",mD="@firebase/installations",yD="@firebase/installations-compat",_D="@firebase/messaging",vD="@firebase/messaging-compat",wD="@firebase/performance",ED="@firebase/performance-compat",xD="@firebase/remote-config",TD="@firebase/remote-config-compat",SD="@firebase/storage",ID="@firebase/storage-compat",bD="@firebase/firestore",kD="@firebase/firestore-compat",PD="firebase",AD="10.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="[DEFAULT]",RD={[lg]:"fire-core",[sD]:"fire-core-compat",[aD]:"fire-analytics",[oD]:"fire-analytics-compat",[cD]:"fire-app-check",[lD]:"fire-app-check-compat",[uD]:"fire-auth",[hD]:"fire-auth-compat",[dD]:"fire-rtdb",[fD]:"fire-rtdb-compat",[pD]:"fire-fn",[gD]:"fire-fn-compat",[mD]:"fire-iid",[yD]:"fire-iid-compat",[_D]:"fire-fcm",[vD]:"fire-fcm-compat",[wD]:"fire-perf",[ED]:"fire-perf-compat",[xD]:"fire-rc",[TD]:"fire-rc-compat",[SD]:"fire-gcs",[ID]:"fire-gcs-compat",[bD]:"fire-fst",[kD]:"fire-fst-compat","fire-js":"fire-js",[PD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new Map,ug=new Map;function CD(t,e){try{t.container.addComponent(e)}catch(n){ps.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wo(t){const e=t.name;if(ug.has(e))return ps.debug(`There were multiple attempts to register component ${e}.`),!1;ug.set(e,t);for(const n of yh.values())CD(n,t);return!0}function Zm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},dr=new ec("app","Firebase",DD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=AD;function qT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:cg,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw dr.create("bad-app-name",{appName:String(r)});if(n||(n=zT()),!n)throw dr.create("no-options");const s=yh.get(r);if(s){if(mh(n,s.options)&&mh(i,s.config))return s;throw dr.create("duplicate-app",{appName:r})}const o=new z2(r);for(const l of ug.values())o.addComponent(l);const a=new MD(n,i,o);return yh.set(r,a),a}function KT(t=cg){const e=yh.get(t);if(!e&&t===cg&&zT())return qT();if(!e)throw dr.create("no-app",{appName:t});return e}function fr(t,e,n){var i;let r=(i=RD[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ps.warn(a.join(" "));return}wo(new fs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD="firebase-heartbeat-database",ND=1,xl="firebase-heartbeat-store";let Lf=null;function GT(){return Lf||(Lf=eD(OD,ND,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xl)}catch(n){console.warn(n)}}}}).catch(t=>{throw dr.create("idb-open",{originalErrorMessage:t.message})})),Lf}async function LD(t){try{const n=(await GT()).transaction(xl),i=await n.objectStore(xl).get(QT(t));return await n.done,i}catch(e){if(e instanceof Oi)ps.warn(e.message);else{const n=dr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ps.warn(n.message)}}}async function m0(t,e){try{const i=(await GT()).transaction(xl,"readwrite");await i.objectStore(xl).put(e,QT(t)),await i.done}catch(n){if(n instanceof Oi)ps.warn(n.message);else{const i=dr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ps.warn(i.message)}}}function QT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=1024,FD=30*24*60*60*1e3;class jD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zD(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=y0();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=FD}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=y0(),{heartbeatsToSend:i,unsentEntries:r}=UD(this._heartbeatsCache.heartbeats),s=gh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function y0(){return new Date().toISOString().substring(0,10)}function UD(t,e=VD){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),_0(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),_0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class zD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BT()?R2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await LD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return m0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return m0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function _0(t){return gh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(t){wo(new fs("platform-logger",e=>new iD(e),"PRIVATE")),wo(new fs("heartbeat",e=>new jD(e),"PRIVATE")),fr(lg,g0,t),fr(lg,g0,"esm2017"),fr("fire-js","")}$D("");function ey(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function YT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BD=YT,XT=new ec("auth","Firebase",YT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Xm("@firebase/auth");function WD(t,...e){_h.logLevel<=ge.WARN&&_h.warn(`Auth (${jo}): ${t}`,...e)}function ku(t,...e){_h.logLevel<=ge.ERROR&&_h.error(`Auth (${jo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(t,...e){throw ty(t,...e)}function Jn(t,...e){return ty(t,...e)}function JT(t,e,n){const i=Object.assign(Object.assign({},BD()),{[e]:n});return new ec("auth","Firebase",i).create(e,{appName:t.name})}function HD(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Tn(t,"argument-error"),JT(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ty(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return XT.create(t,...e)}function J(t,e,...n){if(!t)throw ty(e,...n)}function mi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ku(e),new Error(e)}function Ai(t,e){t||mi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function qD(){return v0()==="http:"||v0()==="https:"}function v0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qD()||b2()||"connection"in navigator)?navigator.onLine:!0}function GD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ai(n>e,"Short delay should be less than long delay!"),this.isMobile=S2()||k2()}get(){return KD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t,e){Ai(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=new nc(3e4,6e4);function kr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ni(t,e,n,i,r={}){return eS(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=tc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),ZT.fetch()(tS(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function eS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},QD),e);try{const r=new JD(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Hc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Hc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Hc(t,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw JT(t,u,c);Tn(t,u)}}catch(r){if(r instanceof Oi)throw r;Tn(t,"network-request-failed",{message:String(r)})}}async function ic(t,e,n,i,r={}){const s=await Ni(t,e,n,i,r);return"mfaPendingCredential"in s&&Tn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function tS(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?ny(t.config,r):`${t.config.apiScheme}://${r}`}function XD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JD{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Jn(this.auth,"network-request-failed")),YD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Jn(t,e,i);return r.customData._tokenResponse=n,r}function w0(t){return t!==void 0&&t.enterprise!==void 0}class ZD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return XD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function eM(t,e){return Ni(t,"GET","/v2/recaptchaConfig",kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tM(t,e){return Ni(t,"POST","/v1/accounts:delete",e)}async function nM(t,e){return Ni(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iM(t,e=!1){const n=jt(t),i=await n.getIdToken(e),r=iy(i);J(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Wa(Vf(r.auth_time)),issuedAtTime:Wa(Vf(r.iat)),expirationTime:Wa(Vf(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Vf(t){return Number(t)*1e3}function iy(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return ku("JWT malformed, contained fewer than 3 sections"),null;try{const r=jT(n);return r?JSON.parse(r):(ku("Failed to decode base64 JWT payload"),null)}catch(r){return ku("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function rM(t){const e=iy(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Oi&&sM(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function sM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wa(this.lastLoginAt),this.creationTime=Wa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vh(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Eo(t,nM(n,{idToken:i}));J(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?cM(s.providerUserInfo):[],a=lM(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new nS(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function aM(t){const e=jt(t);await vh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lM(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function cM(t){return t.map(e=>{var{providerId:n}=e,i=ey(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uM(t,e){const n=await eS(t,{},async()=>{const i=tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=tS(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ZT.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hM(t,e){return Ni(t,"POST","/v2/accounts:revokeToken",kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return J(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await uM(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new Tl;return i&&(J(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(J(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(J(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Tl,this.toJSON())}_performRefresh(){return mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class is{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=ey(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new nS(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Eo(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return iM(this,e)}reload(){return aM(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new is(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await vh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Eo(this,tM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,u;const h=(i=n.displayName)!==null&&i!==void 0?i:void 0,d=(r=n.email)!==null&&r!==void 0?r:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,g=(c=n.createdAt)!==null&&c!==void 0?c:void 0,m=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:v,emailVerified:x,isAnonymous:T,providerData:w,stsTokenManager:S}=n;J(v&&S,e,"internal-error");const b=Tl.fromJSON(this.name,S);J(typeof v=="string",e,"internal-error"),zi(h,e.name),zi(d,e.name),J(typeof x=="boolean",e,"internal-error"),J(typeof T=="boolean",e,"internal-error"),zi(f,e.name),zi(p,e.name),zi(y,e.name),zi(_,e.name),zi(g,e.name),zi(m,e.name);const A=new is({uid:v,auth:e,email:d,emailVerified:x,displayName:h,isAnonymous:T,photoURL:p,phoneNumber:f,tenantId:y,stsTokenManager:b,createdAt:g,lastLoginAt:m});return w&&Array.isArray(w)&&(A.providerData=w.map(M=>Object.assign({},M))),_&&(A._redirectEventId=_),A}static async _fromIdTokenResponse(e,n,i=!1){const r=new Tl;r.updateFromServerResponse(n);const s=new is({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await vh(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0=new Map;function yi(t){Ai(t instanceof Function,"Expected a class definition");let e=E0.get(t);return e?(Ai(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,E0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}iS.type="NONE";const x0=iS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(t,e,n){return`firebase:${t}:${e}:${n}`}class so{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Pu(this.userKey,r.apiKey,s),this.fullPersistenceKey=Pu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?is._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new so(yi(x0),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||yi(x0);const o=Pu(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=is._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new so(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new so(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lS(e))return"Blackberry";if(cS(e))return"Webos";if(ry(e))return"Safari";if((e.includes("chrome/")||sS(e))&&!e.includes("edge/"))return"Chrome";if(aS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function rS(t=rt()){return/firefox\//i.test(t)}function ry(t=rt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sS(t=rt()){return/crios\//i.test(t)}function oS(t=rt()){return/iemobile/i.test(t)}function aS(t=rt()){return/android/i.test(t)}function lS(t=rt()){return/blackberry/i.test(t)}function cS(t=rt()){return/webos/i.test(t)}function dd(t=rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dM(t=rt()){var e;return dd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fM(){return P2()&&document.documentMode===10}function uS(t=rt()){return dd(t)||aS(t)||cS(t)||lS(t)||/windows phone/i.test(t)||oS(t)}function pM(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(t,e=[]){let n;switch(t){case"Browser":n=T0(rt());break;case"Worker":n=`${T0(rt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM(t,e={}){return Ni(t,"GET","/v2/passwordPolicy",kr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=6;class _M{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:yM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new S0(this),this.idTokenSubscription=new S0(this),this.beforeStateQueue=new gM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=yi(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await so.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?jt(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(yi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mM(this),n=new _M(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ec("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await hM(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&yi(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await so.create(this,[yi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&WD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Pr(t){return jt(t)}class S0{constructor(e){this.auth=e,this.observer=null,this.addObserver=N2(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wM(t){fd=t}function dS(t){return fd.loadJS(t)}function EM(){return fd.recaptchaEnterpriseScript}function xM(){return fd.gapiScript}function TM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const SM="recaptcha-enterprise",IM="NO_RECAPTCHA";class bM{constructor(e){this.type=SM,this.auth=Pr(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{eM(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new ZD(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;w0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(IM)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&w0(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=EM();l.length!==0&&(l+=a),dS(l).then(()=>{r(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function I0(t,e,n,i=!1){const r=new bM(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function dg(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await I0(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await I0(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(t,e){const n=Zm(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(mh(s,e??{}))return r;Tn(r,"already-initialized")}return n.initialize({options:e})}function PM(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(yi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function AM(t,e,n){const i=Pr(t);J(i._canInitEmulator,i,"emulator-config-failed"),J(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),s=fS(e),{host:o,port:a}=RM(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||CM()}function fS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function RM(t){const e=fS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:b0(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:b0(o)}}}function b0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function CM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return mi("not implemented")}_getIdTokenResponse(e){return mi("not implemented")}_linkToIdToken(e,n){return mi("not implemented")}_getReauthenticationResolver(e){return mi("not implemented")}}async function DM(t,e){return Ni(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MM(t,e){return ic(t,"POST","/v1/accounts:signInWithPassword",kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OM(t,e){return ic(t,"POST","/v1/accounts:signInWithEmailLink",kr(t,e))}async function NM(t,e){return ic(t,"POST","/v1/accounts:signInWithEmailLink",kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends sy{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Sl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Sl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dg(e,n,"signInWithPassword",MM);case"emailLink":return OM(e,{email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dg(e,i,"signUpPassword",DM);case"emailLink":return NM(e,{idToken:n,email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(t,e){return ic(t,"POST","/v1/accounts:signInWithIdp",kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM="http://localhost";class gs extends sy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Tn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=ey(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new gs(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return oo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,oo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,oo(e,n)}buildRequest(){const e={requestUri:LM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=tc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FM(t){const e=xa(Ta(t)).link,n=e?xa(Ta(e)).deep_link_id:null,i=xa(Ta(t)).deep_link_id;return(i?xa(Ta(i)).link:null)||i||n||e||t}class oy{constructor(e){var n,i,r,s,o,a;const l=xa(Ta(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(i=l.oobCode)!==null&&i!==void 0?i:null,h=VM((r=l.mode)!==null&&r!==void 0?r:null);J(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=FM(e);try{return new oy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(){this.providerId=Uo.PROVIDER_ID}static credential(e,n){return Sl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=oy.parseLink(n);return J(i,"argument-error"),Sl._fromEmailAndCode(e,i.code,i.tenantId)}}Uo.PROVIDER_ID="password";Uo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Uo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends ay{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends rc{constructor(){super("facebook.com")}static credential(e){return gs._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ki.credential(e.oauthAccessToken)}catch{return null}}}Ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ki.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An extends rc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return gs._fromParams({providerId:An.PROVIDER_ID,signInMethod:An.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return An.credentialFromTaggedObject(e)}static credentialFromError(e){return An.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return An.credential(n,i)}catch{return null}}}An.GOOGLE_SIGN_IN_METHOD="google.com";An.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn extends rc{constructor(){super("github.com")}static credential(e){return gs._fromParams({providerId:Rn.PROVIDER_ID,signInMethod:Rn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rn.credentialFromTaggedObject(e)}static credentialFromError(e){return Rn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rn.credential(e.oauthAccessToken)}catch{return null}}}Rn.GITHUB_SIGN_IN_METHOD="github.com";Rn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends rc{constructor(){super("twitter.com")}static credential(e,n){return gs._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Gi.credential(n,i)}catch{return null}}}Gi.TWITTER_SIGN_IN_METHOD="twitter.com";Gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jM(t,e){return ic(t,"POST","/v1/accounts:signUp",kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await is._fromIdTokenResponse(e,i,r),o=k0(i);return new ms({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=k0(i);return new ms({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function k0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends Oi{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,wh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new wh(e,n,i,r)}}function pS(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?wh._fromErrorAndOperation(t,s,e,i):s})}async function UM(t,e,n=!1){const i=await Eo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ms._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await Eo(t,pS(i,r,e,t),n);J(s.idToken,i,"internal-error");const o=iy(s.idToken);J(o,i,"internal-error");const{sub:a}=o;return J(t.uid===a,i,"user-mismatch"),ms._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Tn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gS(t,e,n=!1){const i="signIn",r=await pS(t,i,e),s=await ms._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function $M(t,e){return gS(Pr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mS(t){const e=Pr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function BM(t,e,n){const i=Pr(t),o=await dg(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jM).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&mS(t),l}),a=await ms._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function WM(t,e,n){return $M(jt(t),Uo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&mS(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HM(t,e){return Ni(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qM(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=jt(t),s={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Eo(i,HM(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function KM(t,e,n,i){return jt(t).onIdTokenChanged(e,n,i)}function GM(t,e,n){return jt(t).beforeAuthStateChanged(e,n)}function ly(t,e,n,i){return jt(t).onAuthStateChanged(e,n,i)}function QM(t){return jt(t).signOut()}const Eh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Eh,"1"),this.storage.removeItem(Eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(){const t=rt();return ry(t)||dd(t)}const XM=1e3,JM=10;class _S extends yS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=YM()&&pM(),this.fallbackToPolling=uS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(i);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);fM()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,JM):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},XM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_S.type="LOCAL";const ZM=_S;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS extends yS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vS.type="SESSION";const wS=vS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new pd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await eO(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=cy("",20);r.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(){return window}function nO(t){Zn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(){return typeof Zn().WorkerGlobalScope<"u"&&typeof Zn().importScripts=="function"}async function iO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function sO(){return ES()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="firebaseLocalStorageDb",oO=1,xh="firebaseLocalStorage",TS="fbase_key";class sc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gd(t,e){return t.transaction([xh],e?"readwrite":"readonly").objectStore(xh)}function aO(){const t=indexedDB.deleteDatabase(xS);return new sc(t).toPromise()}function fg(){const t=indexedDB.open(xS,oO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(xh,{keyPath:TS})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(xh)?e(i):(i.close(),await aO(),e(await fg()))})})}async function P0(t,e,n){const i=gd(t,!0).put({[TS]:e,value:n});return new sc(i).toPromise()}async function lO(t,e){const n=gd(t,!1).get(e),i=await new sc(n).toPromise();return i===void 0?null:i.value}function A0(t,e){const n=gd(t,!0).delete(e);return new sc(n).toPromise()}const cO=800,uO=3;class SS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>uO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ES()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pd._getInstance(sO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await iO(),!this.activeServiceWorker)return;this.sender=new tO(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fg();return await P0(e,Eh,"1"),await A0(e,Eh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>P0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>lO(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>A0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=gd(r,!1).getAll();return new sc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SS.type="LOCAL";const hO=SS;new nc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(t,e){return e?yi(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy extends sy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return oo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dO(t){return gS(t.auth,new uy(t),t.bypassAuthState)}function fO(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),zM(n,new uy(t),t.bypassAuthState)}async function pO(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),UM(n,new uy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dO;case"linkViaPopup":case"linkViaRedirect":return pO;case"reauthViaPopup":case"reauthViaRedirect":return fO;default:Tn(this.auth,"internal-error")}}resolve(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=new nc(2e3,1e4);async function R0(t,e,n){const i=Pr(t);HD(t,e,ay);const r=IS(i,n);return new Qr(i,"signInViaPopup",e,r).executeNotNull()}class Qr extends bS{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Qr.currentPopupAction&&Qr.currentPopupAction.cancel(),Qr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){Ai(this.filter.length===1,"Popup operations only handle one event");const e=cy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gO.get())};e()}}Qr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO="pendingRedirect",Au=new Map;class yO extends bS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Au.get(this.auth._key());if(!e){try{const i=await _O(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Au.set(this.auth._key(),e)}return this.bypassAuthState||Au.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _O(t,e){const n=EO(e),i=wO(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function vO(t,e){Au.set(t._key(),e)}function wO(t){return yi(t._redirectPersistence)}function EO(t){return Pu(mO,t.config.apiKey,t.name)}async function xO(t,e,n=!1){const i=Pr(t),r=IS(i,e),o=await new yO(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=10*60*1e3;class SO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!kS(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Jn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TO&&this.cachedEventUids.clear(),this.cachedEventUids.has(C0(e))}saveEventToCache(e){this.cachedEventUids.add(C0(e)),this.lastProcessedEventTime=Date.now()}}function C0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function IO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(t,e={}){return Ni(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PO=/^https?/;async function AO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bO(t);for(const n of e)try{if(RO(n))return}catch{}Tn(t,"unauthorized-domain")}function RO(t){const e=hg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!PO.test(n))return!1;if(kO.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=new nc(3e4,6e4);function D0(){const t=Zn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function DO(t){return new Promise((e,n)=>{var i,r,s;function o(){D0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{D0(),n(Jn(t,"network-request-failed"))},timeout:CO.get()})}if(!((r=(i=Zn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Zn().gapi)===null||s===void 0)&&s.load)o();else{const a=TM("iframefcb");return Zn()[a]=()=>{gapi.load?o():n(Jn(t,"network-request-failed"))},dS(`${xM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Ru=null,e})}let Ru=null;function MO(t){return Ru=Ru||DO(t),Ru}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=new nc(5e3,15e3),NO="__/auth/iframe",LO="emulator/auth/iframe",VO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jO(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ny(e,LO):`https://${t.config.authDomain}/${NO}`,i={apiKey:e.apiKey,appName:t.name,v:jo},r=FO.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${tc(i).slice(1)}`}async function UO(t){const e=await MO(t),n=Zn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:jO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VO,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Jn(t,"network-request-failed"),a=Zn().setTimeout(()=>{s(o)},OO.get());function l(){Zn().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$O=500,BO=600,WO="_blank",HO="http://localhost";class M0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qO(t,e,n,i=$O,r=BO){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},zO),{width:i.toString(),height:r.toString(),top:s,left:o}),c=rt().toLowerCase();n&&(a=sS(c)?WO:n),rS(c)&&(e=e||HO,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(dM(c)&&a!=="_self")return KO(e||"",a),new M0(null);const h=window.open(e||"",a,u);J(h,t,"popup-blocked");try{h.focus()}catch{}return new M0(h)}function KO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO="__/auth/handler",QO="emulator/auth/handler",YO=encodeURIComponent("fac");async function O0(t,e,n,i,r,s){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:jo,eventId:r};if(e instanceof ay){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",O2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof rc){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${YO}=${encodeURIComponent(l)}`:"";return`${XO(t)}?${tc(a).slice(1)}${c}`}function XO({config:t}){return t.emulator?ny(t,QO):`https://${t.authDomain}/${GO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="webStorageSupport";class JO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wS,this._completeRedirectFn=xO,this._overrideRedirectResult=vO}async _openPopup(e,n,i,r){var s;Ai((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await O0(e,n,i,hg(),r);return qO(e,o,cy())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await O0(e,n,i,hg(),r);return nO(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Ai(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await UO(e),i=new SO(e);return n.register("authEvent",r=>(J(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ff,{type:Ff},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Ff];o!==void 0&&n(!!o),Tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=AO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uS()||ry()||dd()}}const ZO=JO;var N0="@firebase/auth",L0="1.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nN(t){wo(new fs("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hS(t)},c=new vM(i,r,s,l);return PM(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),wo(new fs("auth-internal",e=>{const n=Pr(e.getProvider("auth").getImmediate());return(i=>new eN(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fr(N0,L0,tN(t)),fr(N0,L0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=5*60,rN=$T("authIdTokenMaxAge")||iN;let V0=null;const sN=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>rN)return;const r=n==null?void 0:n.token;V0!==r&&(V0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Kn(t=KT()){const e=Zm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=kM(t,{popupRedirectResolver:ZO,persistence:[hO,ZM,wS]}),i=$T("authTokenSyncURL");if(i){const s=sN(i);GM(n,s,()=>s(n.currentUser)),KM(n,o=>s(o))}const r=UT("auth");return r&&AM(n,`http://${r}`),n}function oN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}wM({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Jn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",oN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nN("Browser");function aN(){const[t,e]=P.useState(null),n=Kn();if(P.useEffect(()=>{ly(n,r=>{e(r)})},[]),console.log(n.currentUser),n.currentUser){let r=n.currentUser.uid,s=n.currentUser.displayName;console.log("Usuario logueado: "+s+" con uid: "+r)}function i(){const r=Kn();QM(r).then(()=>{console.log("Sesin cerrada")}).catch(s=>{})}return E.jsx(E.Fragment,{children:E.jsx("header",{children:E.jsxs("div",{className:"menu-arriba",children:[E.jsxs("div",{className:"img-logo",children:[E.jsx(Xi,{to:"/",children:E.jsx("img",{src:"../img/PokeGame.png",alt:"Logo Pokemon"})}),"                    "]}),E.jsxs("div",{className:"menu-derecha",children:[E.jsx("label",{className:"label-menu",htmlFor:"checkboxMenu",children:E.jsxs("div",{className:"img-menu",children:[E.jsx("img",{src:"../img/5.svg",className:"header-icon header-icon-menu fa-solid fa-bars",alt:""}),E.jsx("p",{children:"Men"})]})}),E.jsx("input",{style:{display:"none"},type:"checkbox",id:"checkboxMenu"}),E.jsx("nav",{className:"header-nav",children:E.jsx(LT,{})}),!t&&E.jsx("div",{className:"iniciarsesion",children:E.jsxs("button",{className:"Btn-login",children:[E.jsx("div",{className:"sign",children:E.jsx("svg",{viewBox:"0 0 512 512",style:{transform:"scaleY(-1)"},children:E.jsx("path",{d:"M217.9 105.9L340.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L217.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1L32 320c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM352 416l64 0c17.7 0 32-14.3 32-32l0-256c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0c53 0 96 43 96 96l0 256c0 53-43 96-96 96l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"})})}),E.jsx("div",{className:"text",children:E.jsx(Xi,{to:"/login",children:"Login"})})]})}),t&&E.jsxs("div",{className:"cerrarsesion",children:[E.jsx("p",{className:"sesion-nombre",children:t.displayName}),E.jsxs("button",{className:"Btn",onClick:i,children:[E.jsx("div",{className:"sign",children:E.jsx("svg",{viewBox:"0 0 512 512",children:E.jsx("path",{d:"M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"})})}),E.jsx("div",{className:"text",children:"Logout"})]})]})]})]})})})}function lN(){const[t,e]=P.useState(0),[n,i]=P.useState([]),[r,s]=P.useState({}),[o,a]=P.useState(""),[l,c]=P.useState(!1),[u,h]=P.useState(!1),d=Zl();function f(){h(!0),fetch(`https://pokeapi.co/api/v2/pokemon?offset=${t}&limit=9`).then(m=>m.json()).then(m=>{h(!1),i(v=>[...v,...m.results]),e(v=>v+9),m.results.forEach(v=>{p(v.name)})})}function p(m){h(!0),fetch(`https://pokeapi.co/api/v2/pokemon/${m}/`).then(v=>v.json()).then(v=>{h(!1),s(x=>({...x,[m]:v})),console.log(v)})}const y={bug:"#26de81",dragon:"#ffeaa7",electric:"#fed330",fairy:"#FF0069",fighting:"#30336b",fire:"#f0932b",flying:"#81ecec",grass:"#00b894",ground:"#EFB549",ghost:"#a55eea",ice:"#74b9ff",normal:"#95afc0",poison:"#6c5ce7",psychic:"#a29bfe",rock:"#2d3436",water:"#0190FF"};function _(m){d(`/pokemon/${o}`)}const g=m=>{m.key==="Enter"&&_()};return P.useEffect(()=>{f()},[]),E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"input-group",children:[E.jsx("input",{id:"input-field",type:"text",value:o,onChange:m=>a(m.target.value),onKeyUp:g,placeholder:"Buscar..."}),E.jsx("button",{onClick:_,className:"submit-button",children:E.jsx("span",{children:"SEARCH"})})]}),E.jsx("div",{className:"container",children:E.jsx("div",{className:"container-pokemons",children:n.map((m,v)=>{const x=r[m.name],T=x&&x.types[0].type.name,w=y[T];return E.jsx(Xi,{to:`/pokemon/${v+1}`,children:E.jsxs("div",{className:"card",style:{background:x?`radial-gradient(circle at 50% 0%, ${w} 36%, #ffffff 36%)`:""},onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[E.jsxs("p",{className:"hp",children:[E.jsx("span",{children:"HP "}),x&&x.stats[0].base_stat]}),E.jsxs("p",{className:"poke-id",children:["# ",x&&x.id]}),E.jsx("img",{src:x&&`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${x.id}.png`}),E.jsx("h2",{className:"poke-name name",children:m.name}),E.jsxs("div",{className:"types",children:[E.jsx("div",{className:"type",style:{background:w},children:E.jsx("span",{children:x&&x.types[0].type.name})}),x&&x.types.length>1&&E.jsx("div",{className:"type",style:{background:y[x.types[1].type.name]},children:E.jsx("span",{children:x.types[1].type.name})})]}),E.jsxs("div",{className:"stats",children:[E.jsxs("div",{children:[E.jsx("h3",{children:x&&x.stats[1].base_stat}),E.jsx("p",{children:"Attack"})]}),E.jsxs("div",{children:[E.jsx("h3",{children:x&&x.stats[2].base_stat}),E.jsx("p",{children:"Defense"})]}),E.jsxs("div",{children:[E.jsx("h3",{children:x&&x.stats[5].base_stat}),E.jsx("p",{children:"Speed"})]})]})]},v)})})})}),E.jsx("article",{id:"preload",children:u&&E.jsx("div",{className:"o-pokeball c-loader u-tada"})}),E.jsx("br",{}),E.jsx("div",{className:"container-final",children:E.jsxs("button",{className:"button",onClick:f,children:[E.jsx("img",{src:"../img/pokeball.svg",className:"pokeball",alt:""}),E.jsx("img",{src:"../img/pikapika.svg",className:"pika",alt:""}),E.jsx("span",{className:"go",children:"More"}),E.jsx("span",{className:"pword",children:E.jsx("i",{className:"ri-arrow-down-s-line"})})]})})]})}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function oc(t){return t+.5|0}const Ji=(t,e,n)=>Math.max(Math.min(t,n),e);function Sa(t){return Ji(oc(t*2.55),0,255)}function pr(t){return Ji(oc(t*255),0,255)}function di(t){return Ji(oc(t/2.55)/100,0,1)}function F0(t){return Ji(oc(t*100),0,100)}const fn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},pg=[..."0123456789ABCDEF"],cN=t=>pg[t&15],uN=t=>pg[(t&240)>>4]+pg[t&15],qc=t=>(t&240)>>4===(t&15),hN=t=>qc(t.r)&&qc(t.g)&&qc(t.b)&&qc(t.a);function dN(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&fn[t[1]]*17,g:255&fn[t[2]]*17,b:255&fn[t[3]]*17,a:e===5?fn[t[4]]*17:255}:(e===7||e===9)&&(n={r:fn[t[1]]<<4|fn[t[2]],g:fn[t[3]]<<4|fn[t[4]],b:fn[t[5]]<<4|fn[t[6]],a:e===9?fn[t[7]]<<4|fn[t[8]]:255})),n}const fN=(t,e)=>t<255?e(t):"";function pN(t){var e=hN(t)?cN:uN;return t?"#"+e(t.r)+e(t.g)+e(t.b)+fN(t.a,e):void 0}const gN=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function PS(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function mN(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function yN(t,e,n){const i=PS(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function _N(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function hy(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=_N(n,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function dy(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(pr)}function fy(t,e,n){return dy(PS,t,e,n)}function vN(t,e,n){return dy(yN,t,e,n)}function wN(t,e,n){return dy(mN,t,e,n)}function AS(t){return(t%360+360)%360}function EN(t){const e=gN.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Sa(+e[5]):pr(+e[5]));const r=AS(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=vN(r,s,o):e[1]==="hsv"?i=wN(r,s,o):i=fy(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function xN(t,e){var n=hy(t);n[0]=AS(n[0]+e),n=fy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function TN(t){if(!t)return;const e=hy(t),n=e[0],i=F0(e[1]),r=F0(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${di(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const j0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},U0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function SN(){const t={},e=Object.keys(U0),n=Object.keys(j0);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,j0[s]);s=parseInt(U0[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Kc;function IN(t){Kc||(Kc=SN(),Kc.transparent=[0,0,0,0]);const e=Kc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const bN=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function kN(t){const e=bN.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Sa(o):Ji(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Sa(i):Ji(i,0,255)),r=255&(e[4]?Sa(r):Ji(r,0,255)),s=255&(e[6]?Sa(s):Ji(s,0,255)),{r:i,g:r,b:s,a:n}}}function PN(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${di(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const jf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ds=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function AN(t,e,n){const i=Ds(di(t.r)),r=Ds(di(t.g)),s=Ds(di(t.b));return{r:pr(jf(i+n*(Ds(di(e.r))-i))),g:pr(jf(r+n*(Ds(di(e.g))-r))),b:pr(jf(s+n*(Ds(di(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Gc(t,e,n){if(t){let i=hy(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=fy(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function RS(t,e){return t&&Object.assign(e||{},t)}function z0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=pr(t[3]))):(e=RS(t,{r:0,g:0,b:0,a:1}),e.a=pr(e.a)),e}function RN(t){return t.charAt(0)==="r"?kN(t):EN(t)}class Il{constructor(e){if(e instanceof Il)return e;const n=typeof e;let i;n==="object"?i=z0(e):n==="string"&&(i=dN(e)||IN(e)||RN(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=RS(this._rgb);return e&&(e.a=di(e.a)),e}set rgb(e){this._rgb=z0(e)}rgbString(){return this._valid?PN(this._rgb):void 0}hexString(){return this._valid?pN(this._rgb):void 0}hslString(){return this._valid?TN(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=AN(this._rgb,e._rgb,n)),this}clone(){return new Il(this.rgb)}alpha(e){return this._rgb.a=pr(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=oc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Gc(this._rgb,2,e),this}darken(e){return Gc(this._rgb,2,-e),this}saturate(e){return Gc(this._rgb,1,e),this}desaturate(e){return Gc(this._rgb,1,-e),this}rotate(e){return xN(this._rgb,e),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function ai(){}const CN=(()=>{let t=0;return()=>t++})();function _e(t){return t===null||typeof t>"u"}function Oe(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function he(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ge(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function tn(t,e){return Ge(t)?t:e}function ie(t,e){return typeof t>"u"?e:t}const DN=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,CS=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ke(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function xe(t,e,n,i){let r,s,o;if(Oe(t))if(s=t.length,i)for(r=s-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<s;r++)e.call(n,t[r],r);else if(he(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function Th(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Sh(t){if(Oe(t))return t.map(Sh);if(he(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Sh(t[n[r]]);return e}return t}function DS(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function MN(t,e,n,i){if(!DS(t))return;const r=e[t],s=n[t];he(r)&&he(s)?bl(r,s,i):e[t]=Sh(s)}function bl(t,e,n){const i=Oe(e)?e:[e],r=i.length;if(!he(t))return t;n=n||{};const s=n.merger||MN;let o;for(let a=0;a<r;++a){if(o=i[a],!he(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function Ha(t,e){return bl(t,e,{merger:ON})}function ON(t,e,n){if(!DS(t))return;const i=e[t],r=n[t];he(i)&&he(r)?Ha(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Sh(r))}const $0={"":t=>t,x:t=>t.x,y:t=>t.y};function NN(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function LN(t){const e=NN(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function _r(t,e){return($0[e]||($0[e]=LN(e)))(t)}function py(t){return t.charAt(0).toUpperCase()+t.slice(1)}const kl=t=>typeof t<"u",vr=t=>typeof t=="function",B0=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function VN(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ve=Math.PI,Le=2*Ve,FN=Le+Ve,Ih=Number.POSITIVE_INFINITY,jN=Ve/180,Ze=Ve/2,Or=Ve/4,W0=Ve*2/3,Zi=Math.log10,ei=Math.sign;function qa(t,e,n){return Math.abs(t-e)<n}function H0(t){const e=Math.round(t);t=qa(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Zi(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function UN(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function xo(t){return!isNaN(parseFloat(t))&&isFinite(t)}function zN(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function MS(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Cn(t){return t*(Ve/180)}function gy(t){return t*(180/Ve)}function q0(t){if(!Ge(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function OS(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Ve&&(s+=Le),{angle:s,distance:r}}function gg(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function $N(t,e){return(t-e+FN)%Le-Ve}function rn(t){return(t%Le+Le)%Le}function Pl(t,e,n,i){const r=rn(t),s=rn(e),o=rn(n),a=rn(s-r),l=rn(o-r),c=rn(r-s),u=rn(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function ft(t,e,n){return Math.max(e,Math.min(n,t))}function BN(t){return ft(t,-32768,32767)}function _i(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function my(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const vi=(t,e,n,i)=>my(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),WN=(t,e,n)=>my(t,n,i=>t[i][e]>=n);function HN(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const NS=["push","pop","shift","splice","unshift"];function qN(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),NS.forEach(n=>{const i="_onData"+py(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function K0(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(NS.forEach(s=>{delete t[s]}),delete t._chartjs)}function LS(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const VS=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function FS(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,VS.call(window,()=>{i=!1,t.apply(e,n)}))}}function KN(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const yy=t=>t==="start"?"left":t==="end"?"right":"center",Ct=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,GN=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function jS(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(r=ft(Math.min(vi(a,l,c).lo,n?i:vi(e,l,o.getPixelForValue(c)).lo),0,i-1)),d?s=ft(Math.max(vi(a,o.axis,u,!0).hi+1,n?0:vi(e,l,o.getPixelForValue(u),!0).hi+1),r,i)-r:s=i-r}return{start:r,count:s}}function US(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Qc=t=>t===0||t===1,G0=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Le/n)),Q0=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Le/n)+1,Ka={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ze)+1,easeOutSine:t=>Math.sin(t*Ze),easeInOutSine:t=>-.5*(Math.cos(Ve*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Qc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Qc(t)?t:G0(t,.075,.3),easeOutElastic:t=>Qc(t)?t:Q0(t,.075,.3),easeInOutElastic(t){return Qc(t)?t:t<.5?.5*G0(t*2,.1125,.45):.5+.5*Q0(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Ka.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Ka.easeInBounce(t*2)*.5:Ka.easeOutBounce(t*2-1)*.5+.5};function _y(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Y0(t){return _y(t)?t:new Il(t)}function Uf(t){return _y(t)?t:new Il(t).saturate(.5).darken(.1).hexString()}const QN=["x","y","borderWidth","radius","tension"],YN=["color","borderColor","backgroundColor"];function XN(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:YN},numbers:{type:"number",properties:QN}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function JN(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const X0=new Map;function ZN(t,e){e=e||{};const n=t+JSON.stringify(e);let i=X0.get(n);return i||(i=new Intl.NumberFormat(t,e),X0.set(n,i)),i}function ac(t,e,n){return ZN(e,n).format(t)}const zS={values(t){return Oe(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=eL(t,n)}const o=Zi(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ac(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Zi(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?zS.numeric.call(this,t,e,n):""}};function eL(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var md={formatters:zS};function tL(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:md.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ys=Object.create(null),mg=Object.create(null);function Ga(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function zf(t,e,n){return typeof e=="string"?bl(Ga(t,e),n):bl(Ga(t,""),e)}class nL{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Uf(r.backgroundColor),this.hoverBorderColor=(i,r)=>Uf(r.borderColor),this.hoverColor=(i,r)=>Uf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return zf(this,e,n)}get(e){return Ga(this,e)}describe(e,n){return zf(mg,e,n)}override(e,n){return zf(ys,e,n)}route(e,n,i,r){const s=Ga(this,e),o=Ga(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return he(l)?Object.assign({},c,l):ie(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Qe=new nL({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[XN,JN,tL]);function iL(t){return!t||_e(t.size)||_e(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function bh(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function rL(t,e,n,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],h!=null&&!Oe(h))o=bh(t,r,s,o,h);else if(Oe(h))for(c=0,u=h.length;c<u;c++)d=h[c],d!=null&&!Oe(d)&&(o=bh(t,r,s,o,d));t.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function Nr(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function J0(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function yg(t,e,n,i){$S(t,e,n,i,null)}function $S(t,e,n,i,r){let s,o,a,l,c,u,h,d;const f=e.pointStyle,p=e.rotation,y=e.radius;let _=(p||0)*jN;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(_),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),f){default:r?t.ellipse(n,i,r/2,y,0,0,Le):t.arc(n,i,y,0,Le),t.closePath();break;case"triangle":u=r?r/2:y,t.moveTo(n+Math.sin(_)*u,i-Math.cos(_)*y),_+=W0,t.lineTo(n+Math.sin(_)*u,i-Math.cos(_)*y),_+=W0,t.lineTo(n+Math.sin(_)*u,i-Math.cos(_)*y),t.closePath();break;case"rectRounded":c=y*.516,l=y-c,o=Math.cos(_+Or)*l,h=Math.cos(_+Or)*(r?r/2-c:l),a=Math.sin(_+Or)*l,d=Math.sin(_+Or)*(r?r/2-c:l),t.arc(n-h,i-a,c,_-Ve,_-Ze),t.arc(n+d,i-o,c,_-Ze,_),t.arc(n+h,i+a,c,_,_+Ze),t.arc(n-d,i+o,c,_+Ze,_+Ve),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*y,u=r?r/2:l,t.rect(n-u,i-l,2*u,2*l);break}_+=Or;case"rectRot":h=Math.cos(_)*(r?r/2:y),o=Math.cos(_)*y,a=Math.sin(_)*y,d=Math.sin(_)*(r?r/2:y),t.moveTo(n-h,i-a),t.lineTo(n+d,i-o),t.lineTo(n+h,i+a),t.lineTo(n-d,i+o),t.closePath();break;case"crossRot":_+=Or;case"cross":h=Math.cos(_)*(r?r/2:y),o=Math.cos(_)*y,a=Math.sin(_)*y,d=Math.sin(_)*(r?r/2:y),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"star":h=Math.cos(_)*(r?r/2:y),o=Math.cos(_)*y,a=Math.sin(_)*y,d=Math.sin(_)*(r?r/2:y),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o),_+=Or,h=Math.cos(_)*(r?r/2:y),o=Math.cos(_)*y,a=Math.sin(_)*y,d=Math.sin(_)*(r?r/2:y),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"line":o=r?r/2:Math.cos(_)*y,a=Math.sin(_)*y,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(_)*(r?r/2:y),i+Math.sin(_)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function wi(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function yd(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function _d(t){t.restore()}function sL(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function oL(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function aL(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),_e(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function lL(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function cL(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function _s(t,e,n,i,r,s={}){const o=Oe(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,aL(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&cL(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),_e(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),lL(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function Al(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Ve,Ve,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Ve,Ze,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Ze,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-Ze,!0),t.lineTo(n+o.topLeft,i)}const uL=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,hL=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function dL(t,e){const n=(""+t).match(uL);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const fL=t=>+t||0;function vy(t,e){const n={},i=he(e),r=i?Object.keys(e):e,s=he(t)?i?o=>ie(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=fL(s(o));return n}function BS(t){return vy(t,{top:"y",right:"x",bottom:"y",left:"x"})}function rs(t){return vy(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ut(t){const e=BS(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function at(t,e){t=t||{},e=e||Qe.font;let n=ie(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=ie(t.style,e.style);i&&!(""+i).match(hL)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:ie(t.family,e.family),lineHeight:dL(ie(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:ie(t.weight,e.weight),string:""};return r.string=iL(r),r}function Ia(t,e,n,i){let r=!0,s,o,a;for(s=0,o=t.length;s<o;++s)if(a=t[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),n!==void 0&&Oe(a)&&(a=a[n%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function pL(t,e,n){const{min:i,max:r}=t,s=CS(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Ar(t,e){return Object.assign(Object.create(t),e)}function wy(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=KS("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>wy([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return HS(a,l,()=>xL(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return ew(a).includes(l)},ownKeys(a){return ew(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function To(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:WS(t,i),setContext:s=>To(t,s,n,i),override:s=>To(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return HS(s,o,()=>mL(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function WS(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:vr(n)?n:()=>n,isIndexable:vr(i)?i:()=>i}}const gL=(t,e)=>t?t+py(e):e,Ey=(t,e)=>he(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function HS(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function mL(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return vr(a)&&o.isScriptable(e)&&(a=yL(e,a,t,n)),Oe(a)&&a.length&&(a=_L(e,a,t,o.isIndexable)),Ey(e,a)&&(a=To(a,r,s&&s[e],o)),a}function yL(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),Ey(t,l)&&(l=xy(r._scopes,r,t,l)),l}function _L(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(he(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=xy(c,r,t,u);e.push(To(h,s,o&&o[t],a))}}return e}function qS(t,e,n){return vr(t)?t(e,n):t}const vL=(t,e)=>t===!0?e:typeof t=="string"?_r(e,t):void 0;function wL(t,e,n,i,r){for(const s of e){const o=vL(n,s);if(o){t.add(o);const a=qS(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function xy(t,e,n,i){const r=e._rootScopes,s=qS(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=Z0(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=Z0(a,o,s,l,i),l===null)?!1:wy(Array.from(a),[""],r,s,()=>EL(e,n,i))}function Z0(t,e,n,i,r){for(;n;)n=wL(t,e,n,i,r);return n}function EL(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return Oe(r)&&he(n)?n:r||{}}function xL(t,e,n,i){let r;for(const s of e)if(r=KS(gL(s,t),n),typeof r<"u")return Ey(t,r)?xy(n,i,t,r):r}function KS(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function ew(t){let e=t._keys;return e||(e=t._keys=TL(t._scopes)),e}function TL(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function GS(t,e,n,i){const{iScale:r}=t,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=e[c],o[a]={r:r.parse(_r(u,s),c)};return o}const SL=Number.EPSILON||1e-14,So=(t,e)=>e<t.length&&!t[e].skip&&t[e],QS=t=>t==="x"?"y":"x";function IL(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=gg(s,r),l=gg(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:s.x-h*(o.x-r.x),y:s.y-h*(o.y-r.y)},next:{x:s.x+d*(o.x-r.x),y:s.y+d*(o.y-r.y)}}}function bL(t,e,n){const i=t.length;let r,s,o,a,l,c=So(t,0);for(let u=0;u<i-1;++u)if(l=c,c=So(t,u+1),!(!l||!c)){if(qa(e[u],0,SL)){n[u]=n[u+1]=0;continue}r=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=r*o*e[u],n[u+1]=s*o*e[u])}}function kL(t,e,n="x"){const i=QS(n),r=t.length;let s,o,a,l=So(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=So(t,c+1),!a)continue;const u=a[n],h=a[i];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${i}`]=h-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${i}`]=h+s*e[c])}}function PL(t,e="x"){const n=QS(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=So(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=So(t,o+1),!!l){if(c){const u=c[e]-l[e];r[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?ei(r[o-1])!==ei(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}bL(t,r,s),kL(t,s,e)}function Yc(t,e,n){return Math.max(Math.min(t,n),e)}function AL(t,e){let n,i,r,s,o,a=wi(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&wi(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=Yc(r.cp1x,e.left,e.right),r.cp1y=Yc(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Yc(r.cp2x,e.left,e.right),r.cp2y=Yc(r.cp2y,e.top,e.bottom)))}function RL(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")PL(t,r);else{let c=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=IL(c,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&AL(t,n)}function Ty(){return typeof window<"u"&&typeof document<"u"}function Sy(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function kh(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const vd=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function CL(t,e){return vd(t).getPropertyValue(e)}const DL=["top","right","bottom","left"];function ss(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=DL[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const ML=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function OL(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(ML(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function zr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=vd(n),s=r.boxSizing==="border-box",o=ss(r,"padding"),a=ss(r,"border","width"),{x:l,y:c,box:u}=OL(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}function NL(t,e,n){let i,r;if(e===void 0||n===void 0){const s=Sy(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=vd(s),l=ss(a,"border","width"),c=ss(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=kh(a.maxWidth,s,"clientWidth"),r=kh(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||Ih,maxHeight:r||Ih}}const Xc=t=>Math.round(t*10)/10;function LL(t,e,n,i){const r=vd(t),s=ss(r,"margin"),o=kh(r.maxWidth,t,"clientWidth")||Ih,a=kh(r.maxHeight,t,"clientHeight")||Ih,l=NL(t,e,n);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const d=ss(r,"border","width"),f=ss(r,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=Xc(Math.min(c,o,l.maxWidth)),u=Xc(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Xc(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=Xc(Math.floor(u*i))),{width:c,height:u}}function tw(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const VL=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Ty()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function nw(t,e){const n=CL(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function $r(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function FL(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function jL(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=$r(t,r,n),a=$r(r,s,n),l=$r(s,e,n),c=$r(o,a,n),u=$r(a,l,n);return $r(c,u,n)}const UL=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},zL=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ao(t,e,n){return t?UL(e,n):zL()}function YS(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function XS(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function JS(t){return t==="angle"?{between:Pl,compare:$N,normalize:rn}:{between:_i,compare:(e,n)=>e-n,normalize:e=>e}}function iw({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function $L(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=JS(i),l=e.length;let{start:c,end:u,loop:h}=t,d,f;if(h){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(e[c%l][i]),r,s);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function ZS(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=JS(i),{start:u,end:h,loop:d,style:f}=$L(t,e,n),p=[];let y=!1,_=null,g,m,v;const x=()=>l(r,v,g)&&a(r,v)!==0,T=()=>a(s,g)===0||l(s,v,g),w=()=>y||x(),S=()=>!y||T();for(let b=u,A=u;b<=h;++b)m=e[b%o],!m.skip&&(g=c(m[i]),g!==v&&(y=l(g,r,s),_===null&&w()&&(_=a(g,r)===0?b:A),_!==null&&S()&&(p.push(iw({start:_,end:b,loop:d,count:o,style:f})),_=null),A=b,v=g));return _!==null&&p.push(iw({start:_,end:h,loop:d,count:o,style:f})),p}function eI(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=ZS(i[r],t.points,e);s.length&&n.push(...s)}return n}function BL(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function WL(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function HL(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=BL(n,r,s,i);if(i===!0)return rw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return rw(t,WL(n,o,l,c),n,e)}function rw(t,e,n,i){return!i||!i.setContext||!n?e:qL(t,e,n,i)}function qL(t,e,n,i){const r=t._chart.getContext(),s=sw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,h=e[0].start,d=h;function f(p,y,_,g){const m=a?-1:1;if(p!==y){for(p+=l;n[p%l].skip;)p-=m;for(;n[y%l].skip;)y+=m;p%l!==y%l&&(c.push({start:p%l,end:y%l,loop:_,style:g}),u=g,h=y%l)}}for(const p of e){h=a?h:p.start;let y=n[h%l],_;for(d=h+1;d<=p.end;d++){const g=n[d%l];_=sw(i.setContext(Ar(r,{type:"segment",p0:y,p1:g,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),KL(_,u)&&f(h,d-1,p.loop,u),y=g,u=_}h<d-1&&f(h,d-1,p.loop,u)}return c}function sw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function KL(t,e){if(!e)return!1;const n=[],i=function(r,s){return _y(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class GL{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=VS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var li=new GL;const ow="transparent",QL={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=Y0(t||ow),r=i.valid&&Y0(e||ow);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class YL{constructor(e,n,i,r){const s=n[i];r=Ia([e.to,r,s,e.from]);const o=Ia([e.from,s,r]);this._active=!0,this._fn=e.fn||QL[e.type||typeof o],this._easing=Ka[e.easing]||Ka.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Ia([e.to,n,r,e.from]),this._from=Ia([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class tI{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!he(e))return;const n=Object.keys(Qe.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!he(s))return;const o={};for(const a of n)o[a]=s[a];(Oe(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=JL(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&XL(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[c];let h=s[c];const d=i.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[c]=u;continue}s[c]=h=new YL(d,e,c,u),r.push(h)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return li.add(this._chart,i),!0}}function XL(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function JL(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function aw(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function ZL(t,e,n){if(n===!1)return!1;const i=aw(t,n),r=aw(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function eV(t){let e,n,i,r;return he(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function nI(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function lw(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(i.all)continue;break}c=t.values[l],Ge(c)&&(s||e===0||ei(e)===ei(c))&&(e+=c)}return e}}function tV(t){const e=Object.keys(t),n=new Array(e.length);let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i],n[i]={x:s,y:t[s]};return n}function cw(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function nV(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function iV(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function rV(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function uw(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function hw(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=nV(s,o,i),h=e.length;let d;for(let f=0;f<h;++f){const p=e[f],{[l]:y,[c]:_}=p,g=p._stacks||(p._stacks={});d=g[c]=rV(r,u,y),d[a]=_,d._top=uw(d,o,!0,i.type),d._bottom=uw(d,o,!1,i.type);const m=d._visualValues||(d._visualValues={});m[a]=_}}function $f(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function sV(t,e){return Ar(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function oV(t,e,n){return Ar(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ua(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const Bf=t=>t==="reset"||t==="none",dw=(t,e)=>e?t:Object.assign({},t),aV=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:nI(n,!0),values:null};class Nn{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=cw(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ua(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(h,d,f,p)=>h==="x"?d:h==="r"?p:f,s=n.xAxisID=ie(i.xAxisID,$f(e,"x")),o=n.yAxisID=ie(i.yAxisID,$f(e,"y")),a=n.rAxisID=ie(i.rAxisID,$f(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),u=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&K0(this._data,this),e._stacked&&ua(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(he(n))this._data=tV(n);else if(i!==n){if(i){K0(i,this);const r=this._cachedMeta;ua(r),r._parsed=[]}n&&Object.isExtensible(n)&&qN(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=cw(n.vScale,n),n.stack!==i.stack&&(r=!0,ua(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&hw(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,h,d;if(this._parsing===!1)i._parsed=r,i._sorted=!0,d=r;else{Oe(r[e])?d=this.parseArrayData(i,r,e,n):he(r[e])?d=this.parseObjectData(i,r,e,n):d=this.parsePrimitiveData(i,r,e,n);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)i._parsed[u+e]=h=d[u],l&&(f()&&(l=!1),c=h);i._sorted=l}o&&hw(this,d)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,h=new Array(r);let d,f,p;for(d=0,f=r;d<f;++d)p=d+i,h[d]={[a]:u||s.parse(c[p],p),[l]:o.parse(n[p],p)};return h}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,u,h;for(l=0,c=r;l<c;++l)u=l+i,h=n[u],a[l]={x:s.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,h,d,f;for(u=0,h=r;u<h;++u)d=u+i,f=n[d],c[u]={x:s.parse(_r(f,a),d),y:o.parse(_r(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:nI(r,!0),values:n._stacks[e.axis]._visualValues};return lw(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=lw(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=aV(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=iV(a);let d,f;function p(){f=r[d];const y=f[a.axis];return!Ge(f[e.axis])||u>y||h<y}for(d=0;d<o&&!(!p()&&(this.updateRangeFromParsed(c,e,f,l),s));++d);if(s){for(d=o-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],Ge(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=eV(ie(this.options.clip,ZL(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const h=r[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=oV(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=sV(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&kl(i);if(a)return dw(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(Qe.elements[e]),p=()=>this.getContext(i,r,n),y=c.resolveNamedOptions(d,f,p,h);return y.$shared&&(y.$shared=l,s[o]=Object.freeze(dw(y,l))),y}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(e,i,n))}const c=new tI(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Bf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){Bf(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!Bf(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&ua(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}L(Nn,"defaults",{}),L(Nn,"datasetElementType",null),L(Nn,"dataElementType",null);function lV(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=n.length;r<s;r++)i=i.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=LS(i.sort((r,s)=>r-s))}return t._cache.$bar}function cV(t){const e=t.iScale,n=lV(e,t.type);let i=e._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(kl(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=n.length;r<s;++r)o=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),l();return i}function uV(t,e,n,i){const r=n.barThickness;let s,o;return _e(r)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[t]-s/2}}function hV(t,e,n,i){const r=e.pixels,s=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function dV(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function iI(t,e,n,i){return Oe(t)?dV(t,e,n,i):e[n.axis]=n.parse(t,i),e}function fw(t,e,n,i){const r=t.iScale,s=t.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=e[c],h={},h[r.axis]=a||r.parse(o[c],c),l.push(iI(d,h,s,c));return l}function Wf(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function fV(t,e,n){return t!==0?ei(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function pV(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}function gV(t,e,n,i){let r=e.borderSkipped;const s={};if(!r){t.borderSkipped=s;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=pV(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[pw(u,o,a,l)]=!0,r=c)),s[pw(r,o,a,l)]=!0,t.borderSkipped=s}function pw(t,e,n,i){return i?(t=mV(t,e,n),t=gw(t,n,e)):t=gw(t,e,n),t}function mV(t,e,n){return t===e?n:t===n?e:t}function gw(t,e,n){return t==="start"?e:t==="end"?n:t}function yV(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Cu extends Nn{parsePrimitiveData(e,n,i,r){return fw(e,n,i,r)}parseArrayData(e,n,i,r){return fw(e,n,i,r)}parseObjectData(e,n,i,r){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let d,f,p,y;for(d=i,f=i+r;d<f;++d)y=n[d],p={},p[s.axis]=s.parse(_r(y,c),d),h.push(iI(_r(y,u),p,o,d));return h}updateRangeFromParsed(e,n,i,r){super.updateRangeFromParsed(e,n,i,r);const s=i._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:r}=n,s=this.getParsed(e),o=s._custom,a=Wf(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,r);for(let f=n;f<n+i;f++){const p=this.getParsed(f),y=s||_e(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),_=this._calculateBarIndexPixels(f,u),g=(p._stacks||{})[a.axis],m={horizontal:c,base:y.base,enableBorderRadius:!g||Wf(p._custom)||o===g._top||o===g._bottom,x:c?y.head:_.center,y:c?_.center:y.head,height:c?_.size:Math.abs(y.size),width:c?Math.abs(y.size):_.size};d&&(m.options=h||this.resolveDataElementOptions(f,e[f].active?"active":r));const v=m.options||e[f].options;gV(m,v,g,o),yV(m,v,u.ratio),this.updateElement(e[f],f,m,r)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=i.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),u=c&&c[l.vScale.axis];if(_e(u)||isNaN(u))return!0};for(const l of r)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,i){const r=this._getStacks(e,i),s=n!==void 0?r.indexOf(n):-1;return s===-1?r.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,r=[];let s,o;for(s=0,o=n.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=e.barThickness;return{min:a||cV(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=Wf(c);let h=l[n.axis],d=0,f=i?this.applyStack(n,l,i):h,p,y;f!==h&&(d=f-h,f=h),u&&(h=c.barStart,f=c.barEnd-c.barStart,h!==0&&ei(h)!==ei(c.barEnd)&&(d=0),d+=h);const _=!_e(s)&&!u?s:d;let g=n.getPixelForValue(_);if(this.chart.getDataVisibility(e)?p=n.getPixelForValue(d+f):p=g,y=p-g,Math.abs(y)<o){y=fV(y,n,a)*o,h===a&&(g-=y/2);const m=n.getPixelForDecimal(0),v=n.getPixelForDecimal(1),x=Math.min(m,v),T=Math.max(m,v);g=Math.max(Math.min(g,T),x),p=g+y,i&&!u&&(l._stacks[n.axis]._visualValues[r]=n.getValueForPixel(p)-n.getValueForPixel(g))}if(g===n.getPixelForValue(a)){const m=ei(y)*n.getLineWidthForValue(a)/2;g+=m,y-=m}return{size:y,base:g,head:p,center:p+y/2}}_calculateBarIndexPixels(e,n){const i=n.scale,r=this.options,s=r.skipNull,o=ie(r.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,u=r.barThickness==="flex"?hV(e,n,r,c):uV(e,n,r,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[n.axis]!==null&&i[s].draw(this._ctx)}}L(Cu,"id","bar"),L(Cu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),L(Cu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Du extends Nn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,i,r){const s=super.parsePrimitiveData(e,n,i,r);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+i).radius;return s}parseArrayData(e,n,i,r){const s=super.parseArrayData(e,n,i,r);for(let o=0;o<s.length;o++){const a=n[i+o];s[o]._custom=ie(a[2],this.resolveDataElementOptions(o+i).radius)}return s}parseObjectData(e,n,i,r){const s=super.parseObjectData(e,n,i,r);for(let o=0;o<s.length;o++){const a=n[i+o];s[o]._custom=ie(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let i=e.length-1;i>=0;--i)n=Math.max(n,e[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=n,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:i[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,r),u=o.axis,h=a.axis;for(let d=n;d<n+i;d++){const f=e[d],p=!s&&this.getParsed(d),y={},_=y[u]=s?o.getPixelForDecimal(.5):o.getPixelForValue(p[u]),g=y[h]=s?a.getBasePixel():a.getPixelForValue(p[h]);y.skip=isNaN(_)||isNaN(g),c&&(y.options=l||this.resolveDataElementOptions(d,f.active?"active":r),s&&(y.options.radius=0)),this.updateElement(f,d,y,r)}}resolveDataElementOptions(e,n){const i=this.getParsed(e);let r=super.resolveDataElementOptions(e,n);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return n!=="active"&&(r.radius=0),r.radius+=ie(i&&i._custom,s),r}}L(Du,"id","bubble"),L(Du,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),L(Du,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function _V(t,e,n){let i=1,r=1,s=0,o=0;if(e<Le){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(v,x,T)=>Pl(v,a,l,!0)?1:Math.max(x,x*n,T,T*n),p=(v,x,T)=>Pl(v,a,l,!0)?-1:Math.min(x,x*n,T,T*n),y=f(0,c,h),_=f(Ze,u,d),g=p(Ve,c,h),m=p(Ve+Ze,u,d);i=(y-g)/2,r=(_-m)/2,s=-(y+g)/2,o=-(_+m)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}class Yr extends Nn{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let s=l=>+i[l];if(he(i[e])){const{key:l="value"}=this._parsing;s=c=>+_r(i[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=s(o)}}_getRotation(){return Cn(this.options.rotation-90)}_getCircumference(){return Cn(this.options.circumference)}_getRotationExtents(){let e=Le,n=-Le;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),o=r._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,r=this._cachedMeta,s=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(DN(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:p,offsetY:y}=_V(h,u,l),_=(i.width-o)/d,g=(i.height-o)/f,m=Math.max(Math.min(_,g)/2,0),v=CS(this.options.radius,m),x=Math.max(v*l,0),T=(v-x)/this._getVisibleDatasetWeightTotal();this.offsetX=p*v,this.offsetY=y*v,r.total=this.calculateTotal(),this.outerRadius=v-T*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-T*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const i=this.options,r=this._cachedMeta,s=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/Le)}updateElements(e,n,i,r){const s=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=s&&c.animateScale,f=d?0:this.innerRadius,p=d?0:this.outerRadius,{sharedOptions:y,includeOptions:_}=this._getSharedOptions(n,r);let g=this._getRotation(),m;for(m=0;m<n;++m)g+=this._circumference(m,s);for(m=n;m<n+i;++m){const v=this._circumference(m,s),x=e[m],T={x:u+this.offsetX,y:h+this.offsetY,startAngle:g,endAngle:g+v,circumference:v,outerRadius:p,innerRadius:f};_&&(T.options=y||this.resolveDataElementOptions(m,x.active?"active":r)),g+=v,this.updateElement(x,m,T,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,r;for(r=0;r<n.length;r++){const s=e._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Le*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=ac(n._parsed[e],i.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const i=this.chart;let r,s,o,a,l;if(!e){for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){o=i.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,s=e.length;r<s;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,r=e.length;i<r;++i){const s=this.resolveDataElementOptions(i);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(ie(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}L(Yr,"id","doughnut"),L(Yr,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),L(Yr,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),L(Yr,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class Mu extends Nn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=jS(n,r,o);this._drawStart=a,this._drawCount=l,US(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,r),d=o.axis,f=a.axis,{spanGaps:p,segment:y}=this.options,_=xo(p)?p:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||s||r==="none",m=n+i,v=e.length;let x=n>0&&this.getParsed(n-1);for(let T=0;T<v;++T){const w=e[T],S=g?w:{};if(T<n||T>=m){S.skip=!0;continue}const b=this.getParsed(T),A=_e(b[f]),M=S[d]=o.getPixelForValue(b[d],T),U=S[f]=s||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,b,l):b[f],T);S.skip=isNaN(M)||isNaN(U)||A,S.stop=T>0&&Math.abs(b[d]-x[d])>_,y&&(S.parsed=b,S.raw=c.data[T]),h&&(S.options=u||this.resolveDataElementOptions(T,w.active?"active":r)),g||this.updateElement(w,T,S,r),x=b}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}L(Mu,"id","line"),L(Mu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),L(Mu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Qa extends Nn{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=ac(n._parsed[e].r,i.options.locale);return{label:r[e]||"",value:s}}parseObjectData(e,n,i,r){return GS.bind(this)(e,n,i,r)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,r)=>{const s=this.getParsed(r).r;!isNaN(s)&&this.chart.getDataVisibility(r)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,i=e.options,r=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(r/2,0),o=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,i,r){const s=r==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,d=c.getIndexAngle(0)-.5*Ve;let f=d,p;const y=360/this.countVisibleElements();for(p=0;p<n;++p)f+=this._computeAngle(p,r,y);for(p=n;p<n+i;p++){const _=e[p];let g=f,m=f+this._computeAngle(p,r,y),v=o.getDataVisibility(p)?c.getDistanceFromCenterForValue(this.getParsed(p).r):0;f=m,s&&(l.animateScale&&(v=0),l.animateRotate&&(g=m=d));const x={x:u,y:h,innerRadius:0,outerRadius:v,startAngle:g,endAngle:m,options:this.resolveDataElementOptions(p,_.active?"active":r)};this.updateElement(_,p,x,r)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&n++}),n}_computeAngle(e,n,i){return this.chart.getDataVisibility(e)?Cn(this.resolveDataElementOptions(e,n).angle||i):0}}L(Qa,"id","polarArea"),L(Qa,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),L(Qa,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class _g extends Yr{}L(_g,"id","pie"),L(_g,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Ou extends Nn{getLabelAndValue(e){const n=this._cachedMeta.vScale,i=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(e,n,i,r){return GS.bind(this)(e,n,i,r)}update(e){const n=this._cachedMeta,i=n.dataset,r=n.data||[],s=n.iScale.getLabels();if(i.points=r,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===r.length,options:o};this.updateElement(i,void 0,a,e)}this.updateElements(r,0,r.length,e)}updateElements(e,n,i,r){const s=this._cachedMeta.rScale,o=r==="reset";for(let a=n;a<n+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":r),u=s.getPointPositionForValue(a,this.getParsed(a).r),h=o?s.xCenter:u.x,d=o?s.yCenter:u.y,f={x:h,y:d,angle:u.angle,skip:isNaN(h)||isNaN(d),options:c};this.updateElement(l,a,f,r)}}}L(Ou,"id","radar"),L(Ou,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),L(Ou,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Nu extends Nn{getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=n,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:i=[]}=n,r=this.chart._animationsDisabled;let{start:s,count:o}=jS(n,i,r);if(this._drawStart=s,this._drawCount=o,US(n)&&(s=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,r),h=this.getSharedOptions(u),d=this.includeOptions(r,h),f=o.axis,p=a.axis,{spanGaps:y,segment:_}=this.options,g=xo(y)?y:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||s||r==="none";let v=n>0&&this.getParsed(n-1);for(let x=n;x<n+i;++x){const T=e[x],w=this.getParsed(x),S=m?T:{},b=_e(w[p]),A=S[f]=o.getPixelForValue(w[f],x),M=S[p]=s||b?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,w,l):w[p],x);S.skip=isNaN(A)||isNaN(M)||b,S.stop=x>0&&Math.abs(w[f]-v[f])>g,_&&(S.parsed=w,S.raw=c.data[x]),d&&(S.options=h||this.resolveDataElementOptions(x,T.active?"active":r)),m||this.updateElement(T,x,S,r),v=w}this.updateSharedOptions(h,r,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,r=i.options&&i.options.borderWidth||0;if(!n.length)return r;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,s,o)/2}}L(Nu,"id","scatter"),L(Nu,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),L(Nu,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var vV=Object.freeze({__proto__:null,BarController:Cu,BubbleController:Du,DoughnutController:Yr,LineController:Mu,PieController:_g,PolarAreaController:Qa,RadarController:Ou,ScatterController:Nu});function Lr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Iy{constructor(e){L(this,"options");this.options=e||{}}static override(e){Object.assign(Iy.prototype,e)}init(){}formats(){return Lr()}parse(){return Lr()}format(){return Lr()}add(){return Lr()}diff(){return Lr()}startOf(){return Lr()}endOf(){return Lr()}}var wV={_date:Iy};function EV(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?WN:vi;if(i){if(r._sharedOptions){const c=s[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const h=l(s,e,n-u),d=l(s,e,n+u);return{lo:h.lo,hi:d.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function lc(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:h,hi:d}=EV(s[a],e,o,r);for(let f=h;f<=d;++f){const p=u[f];p.skip||i(p,c,f)}}}function xV(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Hf(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||lc(t,n,e,function(a,l,c){!r&&!wi(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function TV(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=OS(o,{x:e.x,y:e.y});Pl(h,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return lc(t,n,e,s),r}function SV(t,e,n,i,r,s){let o=[];const a=xV(n);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(e.x,e.y,r);if(i&&!f)return;const p=u.getCenterPoint(r);if(!(!!s||t.isPointInArea(p))&&!f)return;const _=a(e,p);_<l?(o=[{element:u,datasetIndex:h,index:d}],l=_):_===l&&o.push({element:u,datasetIndex:h,index:d})}return lc(t,n,e,c),o}function qf(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?TV(t,e,n,r):SV(t,e,n,i,r,s)}function mw(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return lc(t,n,e,(l,c,u)=>{l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var IV={evaluateInteractionItems:lc,modes:{index(t,e,n,i){const r=zr(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Hf(t,r,s,i,o):qf(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){const r=zr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Hf(t,r,s,i,o):qf(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){const r=zr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Hf(t,r,s,i,o)},nearest(t,e,n,i){const r=zr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return qf(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=zr(e,t);return mw(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=zr(e,t);return mw(t,r,"y",n.intersect,i)}}};const rI=["left","top","right","bottom"];function ha(t,e){return t.filter(n=>n.pos===e)}function yw(t,e){return t.filter(n=>rI.indexOf(n.pos)===-1&&n.box.axis===e)}function da(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function bV(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function kV(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!rI.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function PV(t,e){const n=kV(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&e.availableHeight)}return n}function AV(t){const e=bV(t),n=da(e.filter(c=>c.box.fullSize),!0),i=da(ha(e,"left"),!0),r=da(ha(e,"right")),s=da(ha(e,"top"),!0),o=da(ha(e,"bottom")),a=yw(e,"x"),l=yw(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:ha(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function _w(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function sI(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function RV(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!he(r)){n.size&&(t[r]-=n.size);const h=i[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?s.height:s.width),n.size=h.size/h.count,t[r]+=n.size}s.getPadding&&sI(o,s.getPadding());const a=Math.max(0,e.outerWidth-_w(o,t,"left","right")),l=Math.max(0,e.outerHeight-_w(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function CV(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function DV(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function ba(t,e,n,i){const r=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,DV(a.horizontal,e));const{same:h,other:d}=RV(e,n,a,i);c|=h&&r.length,u=u||d,l.fullSize||r.push(a)}return c&&ba(r,e,n,i)||u}function Jc(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function vw(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;kl(c.start)&&(o=c.start),l.fullSize?Jc(l,r.left,o,n.outerWidth-r.right-r.left,d):Jc(l,e.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,d=c.size||l.width;kl(c.start)&&(s=c.start),l.fullSize?Jc(l,s,r.top,d,n.outerHeight-r.bottom-r.top):Jc(l,s,e.top+c.placed,d,h),c.start=s,c.placed+=h,s=l.right}}e.x=s,e.y=o}var Nt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=Ut(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=AV(t.boxes),l=a.vertical,c=a.horizontal;xe(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const u=l.reduce((y,_)=>_.box.options&&_.box.options.display===!1?y:y+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},r);sI(d,Ut(i));const f=Object.assign({maxPadding:d,w:s,h:o,x:r.left,y:r.top},r),p=PV(l.concat(c),h);ba(a.fullSize,f,h,p),ba(l,f,h,p),ba(c,f,h,p)&&ba(l,f,h,p),CV(f),vw(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,vw(a.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},xe(a.chartArea,y=>{const _=y.box;Object.assign(_,t.chartArea),_.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class oI{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class MV extends oI{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Lu="$chartjs",OV={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ww=t=>t===null||t==="";function NV(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[Lu]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ww(r)){const s=nw(t,"width");s!==void 0&&(t.width=s)}if(ww(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=nw(t,"height");s!==void 0&&(t.height=s)}return t}const aI=VL?{passive:!0}:!1;function LV(t,e,n){t.addEventListener(e,n,aI)}function VV(t,e,n){t.canvas.removeEventListener(e,n,aI)}function FV(t,e){const n=OV[t.type]||t.type,{x:i,y:r}=zr(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Ph(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function jV(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Ph(a.addedNodes,i),o=o&&!Ph(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function UV(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Ph(a.removedNodes,i),o=o&&!Ph(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Rl=new Map;let Ew=0;function lI(){const t=window.devicePixelRatio;t!==Ew&&(Ew=t,Rl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function zV(t,e){Rl.size||window.addEventListener("resize",lI),Rl.set(t,e)}function $V(t){Rl.delete(t),Rl.size||window.removeEventListener("resize",lI)}function BV(t,e,n){const i=t.canvas,r=i&&Sy(i);if(!r)return;const s=FS((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),zV(t,s),o}function Kf(t,e,n){n&&n.disconnect(),e==="resize"&&$V(t)}function WV(t,e,n){const i=t.canvas,r=FS(s=>{t.ctx!==null&&n(FV(s,t))},t);return LV(i,e,r),r}class HV extends oI{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(NV(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Lu])return!1;const i=n[Lu].initial;["height","width"].forEach(s=>{const o=i[s];_e(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[Lu],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:jV,detach:UV,resize:BV}[n]||WV;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:Kf,detach:Kf,resize:Kf}[n]||VV)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return LL(e,n,i,r)}isAttached(e){const n=Sy(e);return!!(n&&n.isConnected)}}function qV(t){return!Ty()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?MV:HV}class Vn{constructor(){L(this,"x");L(this,"y");L(this,"active",!1);L(this,"options");L(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return xo(this.x)&&xo(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}L(Vn,"defaults",{}),L(Vn,"defaultRoutes");function KV(t,e){const n=t.options.ticks,i=GV(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?YV(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return XV(e,c,s,o/r),c;const u=QV(s,e,r);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(Zc(e,c,u,_e(f)?0:a-f,a),h=0,d=o-1;h<d;h++)Zc(e,c,u,s[h],s[h+1]);return Zc(e,c,u,l,_e(f)?e.length:l+f),c}return Zc(e,c,u),c}function GV(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function QV(t,e,n){const i=JV(t),r=e.length/n;if(!i)return Math.max(r,1);const s=UN(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function YV(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function XV(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function Zc(t,e,n,i,r){const s=ie(i,0),o=Math.min(ie(r,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function JV(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const ZV=t=>t==="left"?"right":t==="right"?"left":t,xw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Tw=(t,e)=>Math.min(e||t,t);function Sw(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function eF(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function tF(t,e){xe(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function fa(t){return t.drawTicks?t.tickLength:0}function Iw(t,e){if(!t.display)return 0;const n=at(t.font,e),i=Ut(t.padding);return(Oe(t.text)?t.text.length:1)*n.lineHeight+i.height}function nF(t,e){return Ar(t,{scale:e,type:"scale"})}function iF(t,e,n){return Ar(t,{tick:n,index:e,type:"tick"})}function rF(t,e,n){let i=yy(t);return(n&&e!=="right"||!n&&e==="right")&&(i=ZV(i)),i}function sF(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,d,f,p;const y=o-r,_=a-s;if(t.isHorizontal()){if(f=Ct(i,s,a),he(n)){const g=Object.keys(n)[0],m=n[g];p=u[g].getPixelForValue(m)+y-e}else n==="center"?p=(c.bottom+c.top)/2+y-e:p=xw(t,n,e);d=a-s}else{if(he(n)){const g=Object.keys(n)[0],m=n[g];f=u[g].getPixelForValue(m)-_+e}else n==="center"?f=(c.left+c.right)/2-_+e:f=xw(t,n,e);p=Ct(i,o,r),h=n==="left"?-Ze:Ze}return{titleX:f,titleY:p,maxWidth:d,rotation:h}}class Ss extends Vn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=tn(e,Number.POSITIVE_INFINITY),n=tn(n,Number.NEGATIVE_INFINITY),i=tn(i,Number.POSITIVE_INFINITY),r=tn(r,Number.NEGATIVE_INFINITY),{min:tn(e,i),max:tn(n,r),minDefined:Ge(e),maxDefined:Ge(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:tn(n,tn(i,n)),max:tn(i,tn(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ke(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=pL(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Sw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=KV(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ke(this.options.afterUpdate,[this])}beforeSetDimensions(){ke(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ke(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ke(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ke(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=ke(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){ke(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ke(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=Tw(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=ft(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),h+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-fa(e.grid)-n.padding-Iw(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=gy(Math.min(Math.asin(ft((u.highest.height+6)/a,-1,1)),Math.asin(ft(l/c,-1,1))-Math.asin(ft(d/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){ke(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ke(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Iw(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=fa(s)+l):(e.height=this.maxHeight,e.width=fa(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=i.padding*2,p=Cn(this.labelRotation),y=Math.cos(p),_=Math.sin(p);if(a){const g=i.mirror?0:_*h.width+y*d.height;e.height=Math.min(this.maxHeight,e.height+g+f)}else{const g=i.mirror?0:y*h.width+_*d.height;e.width=Math.min(this.maxWidth,e.width+g+f)}this._calculatePadding(c,u,_,y)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=r*e.width,f=i*n.height):(d=i*e.height,f=r*n.width):s==="start"?f=n.width:s==="end"?d=e.width:s!=="inner"&&(d=e.width/2,f=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;s==="start"?(u=0,h=e.height):s==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ke(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)_e(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Sw(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/Tw(n,i));let c=0,u=0,h,d,f,p,y,_,g,m,v,x,T;for(h=0;h<n;h+=l){if(p=e[h].label,y=this._resolveTickFontOptions(h),r.font=_=y.string,g=s[_]=s[_]||{data:{},gc:[]},m=y.lineHeight,v=x=0,!_e(p)&&!Oe(p))v=bh(r,g.data,g.gc,v,p),x=m;else if(Oe(p))for(d=0,f=p.length;d<f;++d)T=p[d],!_e(T)&&!Oe(T)&&(v=bh(r,g.data,g.gc,v,T),x+=m);o.push(v),a.push(x),c=Math.max(v,c),u=Math.max(x,u)}tF(s,n);const w=o.indexOf(c),S=a.indexOf(u),b=A=>({width:o[A]||0,height:a[A]||0});return{first:b(0),last:b(n-1),widest:b(w),highest:b(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return BN(this._alignToPixels?Nr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=iF(this.getContext(),e,i))}return this.$context||(this.$context=nF(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Cn(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=fa(s),f=[],p=a.setContext(this.getContext()),y=p.display?p.width:0,_=y/2,g=function(fe){return Nr(i,fe,y)};let m,v,x,T,w,S,b,A,M,U,H,ne;if(o==="top")m=g(this.bottom),S=this.bottom-d,A=m-_,U=g(e.top)+_,ne=e.bottom;else if(o==="bottom")m=g(this.top),U=e.top,ne=g(e.bottom)-_,S=m+_,A=this.top+d;else if(o==="left")m=g(this.right),w=this.right-d,b=m-_,M=g(e.left)+_,H=e.right;else if(o==="right")m=g(this.left),M=e.left,H=g(e.right)-_,w=m+_,b=this.left+d;else if(n==="x"){if(o==="center")m=g((e.top+e.bottom)/2+.5);else if(he(o)){const fe=Object.keys(o)[0],Y=o[fe];m=g(this.chart.scales[fe].getPixelForValue(Y))}U=e.top,ne=e.bottom,S=m+_,A=S+d}else if(n==="y"){if(o==="center")m=g((e.left+e.right)/2);else if(he(o)){const fe=Object.keys(o)[0],Y=o[fe];m=g(this.chart.scales[fe].getPixelForValue(Y))}w=m-_,b=w-d,M=e.left,H=e.right}const ve=ie(r.ticks.maxTicksLimit,h),se=Math.max(1,Math.ceil(h/ve));for(v=0;v<h;v+=se){const fe=this.getContext(v),Y=s.setContext(fe),N=a.setContext(fe),B=Y.lineWidth,G=Y.color,ce=N.dash||[],we=N.dashOffset,kt=Y.tickWidth,Re=Y.tickColor,yt=Y.tickBorderDash||[],Ue=Y.tickBorderDashOffset;x=eF(this,v,l),x!==void 0&&(T=Nr(i,x,B),c?w=b=M=H=T:S=A=U=ne=T,f.push({tx1:w,ty1:S,tx2:b,ty2:A,x1:M,y1:U,x2:H,y2:ne,width:B,color:G,borderDash:ce,borderDashOffset:we,tickWidth:kt,tickColor:Re,tickBorderDash:yt,tickBorderDashOffset:Ue}))}return this._ticksLength=h,this._borderValue=m,f}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=s,d=fa(i.grid),f=d+u,p=h?-u:f,y=-Cn(this.labelRotation),_=[];let g,m,v,x,T,w,S,b,A,M,U,H,ne="middle";if(r==="top")w=this.bottom-p,S=this._getXAxisLabelAlignment();else if(r==="bottom")w=this.top+p,S=this._getXAxisLabelAlignment();else if(r==="left"){const se=this._getYAxisLabelAlignment(d);S=se.textAlign,T=se.x}else if(r==="right"){const se=this._getYAxisLabelAlignment(d);S=se.textAlign,T=se.x}else if(n==="x"){if(r==="center")w=(e.top+e.bottom)/2+f;else if(he(r)){const se=Object.keys(r)[0],fe=r[se];w=this.chart.scales[se].getPixelForValue(fe)+f}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")T=(e.left+e.right)/2-f;else if(he(r)){const se=Object.keys(r)[0],fe=r[se];T=this.chart.scales[se].getPixelForValue(fe)}S=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?ne="top":l==="end"&&(ne="bottom"));const ve=this._getLabelSizes();for(g=0,m=a.length;g<m;++g){v=a[g],x=v.label;const se=s.setContext(this.getContext(g));b=this.getPixelForTick(g)+s.labelOffset,A=this._resolveTickFontOptions(g),M=A.lineHeight,U=Oe(x)?x.length:1;const fe=U/2,Y=se.color,N=se.textStrokeColor,B=se.textStrokeWidth;let G=S;o?(T=b,S==="inner"&&(g===m-1?G=this.options.reverse?"left":"right":g===0?G=this.options.reverse?"right":"left":G="center"),r==="top"?c==="near"||y!==0?H=-U*M+M/2:c==="center"?H=-ve.highest.height/2-fe*M+M:H=-ve.highest.height+M/2:c==="near"||y!==0?H=M/2:c==="center"?H=ve.highest.height/2-fe*M:H=ve.highest.height-U*M,h&&(H*=-1),y!==0&&!se.showLabelBackdrop&&(T+=M/2*Math.sin(y))):(w=b,H=(1-U)*M/2);let ce;if(se.showLabelBackdrop){const we=Ut(se.backdropPadding),kt=ve.heights[g],Re=ve.widths[g];let yt=H-we.top,Ue=0-we.left;switch(ne){case"middle":yt-=kt/2;break;case"bottom":yt-=kt;break}switch(S){case"center":Ue-=Re/2;break;case"right":Ue-=Re;break;case"inner":g===m-1?Ue-=Re:g>0&&(Ue-=Re/2);break}ce={left:Ue,top:yt,width:Re+we.width,height:kt+we.height,color:se.backdropColor}}_.push({label:x,font:A,textOffset:H,options:{rotation:y,color:Y,strokeColor:N,strokeWidth:B,textAlign:G,textBaseline:ne,translation:[T,w],backdrop:ce}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Cn(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=Nr(e,this.left,o)-o/2,u=Nr(e,this.right,a)+a/2,h=d=l):(h=Nr(e,this.top,o)-o/2,d=Nr(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&yd(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;_s(i,c,0,u,l,a)}r&&_d(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=at(i.font),o=Ut(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||he(n)?(l+=o.bottom,Oe(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=sF(this,l,n,a);_s(e,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:d,textAlign:rF(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=ie(e.grid&&e.grid.z,-1),r=ie(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ss.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return at(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class eu{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;lF(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,oF(e,o,i),this.override&&Qe.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in Qe[r]&&(delete Qe[r][i],this.override&&delete ys[i])}}function oF(t,e,n){const i=bl(Object.create(null),[n?Qe.get(n):{},Qe.get(e),t.defaults]);Qe.set(e,i),t.defaultRoutes&&aF(e,t.defaultRoutes),t.descriptors&&Qe.describe(e,t.descriptors)}function aF(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Qe.route(s,r,l,a)})}function lF(t){return"id"in t&&"defaults"in t}class cF{constructor(){this.controllers=new eu(Nn,"datasets",!0),this.elements=new eu(Vn,"elements"),this.plugins=new eu(Object,"plugins"),this.scales=new eu(Ss,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):xe(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=py(e);ke(i["before"+r],[],i),n[e](i),ke(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Wn=new cF;class uF{constructor(){this._init=[]}notify(e,n,i,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(ke(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){_e(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=ie(i.options&&i.options.plugins,{}),s=hF(i);return r===!1&&!n?[]:fF(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function hF(t){const e={},n=[],i=Object.keys(Wn.plugins.items);for(let s=0;s<i.length;s++)n.push(Wn.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function dF(t,e){return!e&&t===!1?null:t===!0?{}:t}function fF(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=dF(i[l],r);c!==null&&s.push({plugin:a,options:pF(t.config,{plugin:a,local:n[l]},c,o)})}return s}function pF(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function vg(t,e){const n=Qe.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function gF(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function mF(t,e){return t===e?"_index_":"_value_"}function bw(t){if(t==="x"||t==="y"||t==="r")return t}function yF(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function wg(t,...e){if(bw(t))return t;for(const n of e){const i=n.axis||yF(n.position)||t.length>1&&bw(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function kw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function _F(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return kw(t,"x",n[0])||kw(t,"y",n[0])}return{}}function vF(t,e){const n=ys[t.type]||{scales:{}},i=e.scales||{},r=vg(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!he(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=wg(o,a,_F(o,t),Qe.scales[a.type]),c=mF(l,r),u=n.scales||{};s[o]=Ha(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||vg(a,e),u=(ys[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=gF(h,l),f=o[d+"AxisID"]||d;s[f]=s[f]||Object.create(null),Ha(s[f],[{axis:d},i[f],u[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];Ha(a,[Qe.scales[a.type],Qe.scale])}),s}function cI(t){const e=t.options||(t.options={});e.plugins=ie(e.plugins,{}),e.scales=vF(t,e)}function uI(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function wF(t){return t=t||{},t.data=uI(t.data),cI(t),t}const Pw=new Map,hI=new Set;function tu(t,e){let n=Pw.get(t);return n||(n=e(),Pw.set(t,n),hI.add(n)),n}const pa=(t,e,n)=>{const i=_r(e,n);i!==void 0&&t.add(i)};class EF{constructor(e){this._config=wF(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=uI(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),cI(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return tu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return tu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return tu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return tu(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>pa(l,e,h))),u.forEach(h=>pa(l,r,h)),u.forEach(h=>pa(l,ys[s]||{},h)),u.forEach(h=>pa(l,Qe,h)),u.forEach(h=>pa(l,mg,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),hI.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,ys[n]||{},Qe.datasets[n]||{},{type:n},Qe,mg]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Aw(this._resolverCache,e,r);let l=o;if(TF(o,n)){s.$shared=!1,i=vr(i)?i():i;const c=this.createResolver(e,i,a);l=To(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=Aw(this._resolverCache,e,i);return he(n)?To(s,n,void 0,r):s}}function Aw(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:wy(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const xF=t=>he(t)&&Object.getOwnPropertyNames(t).some(e=>vr(t[e]));function TF(t,e){const{isScriptable:n,isIndexable:i}=WS(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(vr(a)||xF(a))||o&&Oe(a))return!0}return!1}var SF="4.4.1";const IF=["top","bottom","left","right","chartArea"];function Rw(t,e){return t==="top"||t==="bottom"||IF.indexOf(t)===-1&&e==="x"}function Cw(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Dw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ke(n&&n.onComplete,[t],e)}function bF(t){const e=t.chart,n=e.options.animation;ke(n&&n.onProgress,[t],e)}function dI(t){return Ty()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Vu={},Mw=t=>{const e=dI(t);return Object.values(Vu).filter(n=>n.canvas===e).pop()};function kF(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function PF(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function nu(t,e,n){return t.options.clip?t[n]:e[n]}function AF(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:nu(n,e,"left"),right:nu(n,e,"right"),top:nu(i,e,"top"),bottom:nu(i,e,"bottom")}:e}class fi{static register(...e){Wn.add(...e),Ow()}static unregister(...e){Wn.remove(...e),Ow()}constructor(e,n){const i=this.config=new EF(n),r=dI(e),s=Mw(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||qV(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=CN(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new uF,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=KN(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Vu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}li.listen(this,"complete",Dw),li.listen(this,"progress",bF),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return _e(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Wn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():tw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return J0(this.canvas,this.ctx),this}stop(){return li.stop(this),this}resize(e,n){li.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,tw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ke(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};xe(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=wg(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),xe(s,o=>{const a=o.options,l=a.id,c=wg(l,a),u=ie(a.type,o.dtype);(a.position===void 0||Rw(a.position,c)!==Rw(o.dposition))&&(a.position=o.dposition),r[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const d=Wn.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),xe(r,(o,a)=>{o||delete i[a]}),xe(i,o=>{Nt.configure(this,o,o.options),Nt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(Cw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||vg(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Wn.getController(a),{datasetElementType:c,dataElementType:u}=Qe.datasets[a];Object.assign(l,{dataElementType:Wn.getElement(u),datasetElementType:c&&Wn.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){xe(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!r&&s.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||xe(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Cw("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){xe(this.scales,e=>{Nt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!B0(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;kF(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!B0(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Nt.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],xe(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,vr(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(li.has(this)?this.attached&&!li.running(this)&&li.start(this):(this.draw(),Dw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resize(i,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,r=!i.disabled,s=AF(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&yd(n,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),e.controller.draw(),r&&_d(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return wi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=IV.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Ar(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);kl(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),li.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),J0(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Vu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};xe(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){xe(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},xe(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Th(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=VN(e),c=PF(e,this._lastEvent,i,l);i&&(this._lastEvent=null,ke(s.onHover,[e,a,this],this),l&&ke(s.onClick,[e,a,this],this));const u=!Th(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,u}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}L(fi,"defaults",Qe),L(fi,"instances",Vu),L(fi,"overrides",ys),L(fi,"registry",Wn),L(fi,"version",SF),L(fi,"getChart",Mw);function Ow(){return xe(fi.instances,t=>t._plugins.invalidate())}function RF(t,e,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=r/a;t.beginPath(),t.arc(s,o,a,i-c,n+c),l>r?(c=r/l,t.arc(s,o,l,n+c,i-c,!0)):t.arc(s,o,r,n+Ze,i-Ze),t.closePath(),t.clip()}function CF(t){return vy(t,["outerStart","outerEnd","innerStart","innerEnd"])}function DF(t,e,n,i){const r=CF(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,i*e/2),a=l=>{const c=(n-Math.min(s,l))*i/2;return ft(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:ft(r.innerStart,0,o),innerEnd:ft(r.innerEnd,0,o)}}function Ms(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Ah(t,e,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let f=0;const p=r-l;if(i){const se=u>0?u-i:0,fe=h>0?h-i:0,Y=(se+fe)/2,N=Y!==0?p*Y/(Y+i):p;f=(p-N)/2}const y=Math.max(.001,p*h-n/Ve)/h,_=(p-y)/2,g=l+_+f,m=r-_-f,{outerStart:v,outerEnd:x,innerStart:T,innerEnd:w}=DF(e,d,h,m-g),S=h-v,b=h-x,A=g+v/S,M=m-x/b,U=d+T,H=d+w,ne=g+T/U,ve=m-w/H;if(t.beginPath(),s){const se=(A+M)/2;if(t.arc(o,a,h,A,se),t.arc(o,a,h,se,M),x>0){const B=Ms(b,M,o,a);t.arc(B.x,B.y,x,M,m+Ze)}const fe=Ms(H,m,o,a);if(t.lineTo(fe.x,fe.y),w>0){const B=Ms(H,ve,o,a);t.arc(B.x,B.y,w,m+Ze,ve+Math.PI)}const Y=(m-w/d+(g+T/d))/2;if(t.arc(o,a,d,m-w/d,Y,!0),t.arc(o,a,d,Y,g+T/d,!0),T>0){const B=Ms(U,ne,o,a);t.arc(B.x,B.y,T,ne+Math.PI,g-Ze)}const N=Ms(S,g,o,a);if(t.lineTo(N.x,N.y),v>0){const B=Ms(S,A,o,a);t.arc(B.x,B.y,v,g-Ze,A)}}else{t.moveTo(o,a);const se=Math.cos(A)*h+o,fe=Math.sin(A)*h+a;t.lineTo(se,fe);const Y=Math.cos(M)*h+o,N=Math.sin(M)*h+a;t.lineTo(Y,N)}t.closePath()}function MF(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Ah(t,e,n,i,l,r);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Le||Le))}return Ah(t,e,n,i,l,r),t.fill(),l}function OF(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f=l.borderAlign==="inner";if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=d,f?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let p=e.endAngle;if(s){Ah(t,e,n,i,p,r);for(let y=0;y<s;++y)t.stroke();isNaN(a)||(p=o+(a%Le||Le))}f&&RF(t,e,p),s||(Ah(t,e,n,i,p,r),t.stroke())}class ka extends Vn{constructor(n){super();L(this,"circumference");L(this,"endAngle");L(this,"fullCircles");L(this,"innerRadius");L(this,"outerRadius");L(this,"pixelMargin");L(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.getProps(["x","y"],r),{angle:o,distance:a}=OS(s,{x:n,y:i}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),f=(this.options.spacing+this.options.borderWidth)/2,y=ie(d,c-l)>=Le||Pl(o,l,c),_=_i(a,u+f,h+f);return y&&_}getCenterPoint(n){const{x:i,y:r,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(s+o)/2,d=(a+l+u+c)/2;return{x:i+Math.cos(h)*d,y:r+Math.sin(h)*d}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:r}=this,s=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>Le?Math.floor(r/Le):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Ve,r||0)),u=s*c;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,MF(n,this,u,o,a),OF(n,this,u,o,a),n.restore()}}L(ka,"id","arc"),L(ka,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),L(ka,"defaultRoutes",{backgroundColor:"backgroundColor"}),L(ka,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function fI(t,e,n=e){t.lineCap=ie(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ie(n.borderDash,e.borderDash)),t.lineDashOffset=ie(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ie(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ie(n.borderWidth,e.borderWidth),t.strokeStyle=ie(n.borderColor,e.borderColor)}function NF(t,e,n){t.lineTo(n.x,n.y)}function LF(t){return t.stepped?sL:t.tension||t.cubicInterpolationMode==="monotone"?oL:NF}function pI(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function VF(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=pI(r,n,i),u=LF(s);let{move:h=!0,reverse:d}=i||{},f,p,y;for(f=0;f<=c;++f)p=r[(a+(d?c-f:f))%o],!p.skip&&(h?(t.moveTo(p.x,p.y),h=!1):u(t,y,p,d,s.stepped),y=p);return l&&(p=r[(a+(d?c:0))%o],u(t,y,p,d,s.stepped)),!!l}function FF(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=pI(r,n,i),{move:l=!0,reverse:c}=i||{};let u=0,h=0,d,f,p,y,_,g;const m=x=>(o+(c?a-x:x))%s,v=()=>{y!==_&&(t.lineTo(u,_),t.lineTo(u,y),t.lineTo(u,g))};for(l&&(f=r[m(0)],t.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=r[m(d)],f.skip)continue;const x=f.x,T=f.y,w=x|0;w===p?(T<y?y=T:T>_&&(_=T),u=(h*u+x)/++h):(v(),t.lineTo(x,T),p=w,h=0,y=_=T),g=T}v()}function Eg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?FF:VF}function jF(t){return t.stepped?FL:t.tension||t.cubicInterpolationMode==="monotone"?jL:$r}function UF(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),fI(t,e.options),t.stroke(r)}function zF(t,e,n,i){const{segments:r,options:s}=e,o=Eg(e);for(const a of r)fI(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const $F=typeof Path2D=="function";function BF(t,e,n,i){$F&&!e.options.segment?UF(t,e,n,i):zF(t,e,n,i)}class er extends Vn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;RL(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=HL(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=eI(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=jF(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:d}=o[c],f=s[h],p=s[d];if(f===p){a.push(f);continue}const y=Math.abs((r-f[n])/(p[n]-f[n])),_=l(f,p,y,i.stepped);_[n]=e[n],a.push(_)}return a.length===1?a[0]:a}pathSegment(e,n,i){return Eg(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=Eg(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),BF(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}L(er,"id","line"),L(er,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),L(er,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),L(er,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Nw(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class Fu extends Vn{constructor(n){super();L(this,"parsed");L(this,"skip");L(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return Nw(this,n,"x",i)}inYRange(n,i){return Nw(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!wi(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,yg(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}L(Fu,"id","point"),L(Fu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),L(Fu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function gI(t,e){const{x:n,y:i,base:r,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-h,u=i+h):(h=s/2,a=n-h,l=n+h,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function tr(t,e,n,i){return t?0:ft(e,n,i)}function WF(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=BS(i);return{t:tr(r.top,s.top,0,n),r:tr(r.right,s.right,0,e),b:tr(r.bottom,s.bottom,0,n),l:tr(r.left,s.left,0,e)}}function HF(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=rs(r),o=Math.min(e,n),a=t.borderSkipped,l=i||he(r);return{topLeft:tr(!l||a.top||a.left,s.topLeft,0,o),topRight:tr(!l||a.top||a.right,s.topRight,0,o),bottomLeft:tr(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:tr(!l||a.bottom||a.right,s.bottomRight,0,o)}}function qF(t){const e=gI(t),n=e.right-e.left,i=e.bottom-e.top,r=WF(t,n/2,i/2),s=HF(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Gf(t,e,n,i){const r=e===null,s=n===null,a=t&&!(r&&s)&&gI(t,i);return a&&(r||_i(e,a.left,a.right))&&(s||_i(n,a.top,a.bottom))}function KF(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function GF(t,e){t.rect(e.x,e.y,e.w,e.h)}function Qf(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+o,radius:t.radius}}class ju extends Vn{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=qF(this),a=KF(o.radius)?Al:GF;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,Qf(o,n,s)),e.clip(),a(e,Qf(s,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,Qf(s,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,i){return Gf(this,e,n,i)}inXRange(e,n){return Gf(this,e,null,n)}inYRange(e,n){return Gf(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+r)/2:n,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}L(ju,"id","bar"),L(ju,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),L(ju,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var QF=Object.freeze({__proto__:null,ArcElement:ka,BarElement:ju,LineElement:er,PointElement:Fu});const xg=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Lw=xg.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function mI(t){return xg[t%xg.length]}function yI(t){return Lw[t%Lw.length]}function YF(t,e){return t.borderColor=mI(e),t.backgroundColor=yI(e),++e}function XF(t,e){return t.backgroundColor=t.data.map(()=>mI(e++)),e}function JF(t,e){return t.backgroundColor=t.data.map(()=>yI(e++)),e}function ZF(t){let e=0;return(n,i)=>{const r=t.getDatasetMeta(i).controller;r instanceof Yr?e=XF(n,e):r instanceof Qa?e=JF(n,e):r&&(e=YF(n,e))}}function Vw(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function e4(t){return t&&(t.borderColor||t.backgroundColor)}var t4={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=t.config,{elements:s}=r;if(!n.forceOverride&&(Vw(i)||e4(r)||s&&Vw(s)))return;const o=ZF(t);i.forEach(o)}};function n4(t,e,n,i,r){const s=r.samples||i;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let u=e,h,d,f,p,y;for(o[l++]=t[u],h=0;h<s-2;h++){let _=0,g=0,m;const v=Math.floor((h+1)*a)+1+e,x=Math.min(Math.floor((h+2)*a)+1,n)+e,T=x-v;for(m=v;m<x;m++)_+=t[m].x,g+=t[m].y;_/=T,g/=T;const w=Math.floor(h*a)+1+e,S=Math.min(Math.floor((h+1)*a)+1,n)+e,{x:b,y:A}=t[u];for(f=p=-1,m=w;m<S;m++)p=.5*Math.abs((b-_)*(t[m].y-A)-(b-t[m].x)*(g-A)),p>f&&(f=p,d=t[m],y=m);o[l++]=d,u=y}return o[l++]=t[c],o}function i4(t,e,n,i){let r=0,s=0,o,a,l,c,u,h,d,f,p,y;const _=[],g=e+n-1,m=t[e].x,x=t[g].x-m;for(o=e;o<e+n;++o){a=t[o],l=(a.x-m)/x*i,c=a.y;const T=l|0;if(T===u)c<p?(p=c,h=o):c>y&&(y=c,d=o),r=(s*r+a.x)/++s;else{const w=o-1;if(!_e(h)&&!_e(d)){const S=Math.min(h,d),b=Math.max(h,d);S!==f&&S!==w&&_.push({...t[S],x:r}),b!==f&&b!==w&&_.push({...t[b],x:r})}o>0&&w!==f&&_.push(t[w]),_.push(a),u=T,s=0,p=y=c,h=d=f=o}}return _}function _I(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Fw(t){t.data.datasets.forEach(e=>{_I(e)})}function r4(t,e){const n=e.length;let i=0,r;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=ft(vi(e,s.axis,o).lo,0,n-1)),c?r=ft(vi(e,s.axis,a).hi+1,i,n)-i:r=n-i,{start:i,count:r}}var s4={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){Fw(t);return}const i=t.width;t.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:a}=r,l=t.getDatasetMeta(s),c=o||r.data;if(Ia([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:h,count:d}=r4(l,c);const f=n.threshold||4*i;if(d<=f){_I(r);return}_e(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(y){this._data=y}}));let p;switch(n.algorithm){case"lttb":p=n4(c,h,d,i,n);break;case"min-max":p=i4(c,h,d,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}r._decimated=p})},destroy(t){Fw(t)}};function o4(t,e,n){const i=t.segments,r=t.points,s=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=by(l,c,r);const u=Tg(n,r[l],r[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:r[l],end:r[c]});continue}const h=eI(e,u);for(const d of h){const f=Tg(n,s[d.start],s[d.end],d.loop),p=ZS(a,r,f);for(const y of p)o.push({source:y,target:d,start:{[n]:jw(u,f,"start",Math.max)},end:{[n]:jw(u,f,"end",Math.min)}})}}return o}function Tg(t,e,n,i){if(i)return;let r=e[t],s=n[t];return t==="angle"&&(r=rn(r),s=rn(s)),{property:t,start:r,end:s}}function a4(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=by(o,a,r);const l=r[o],c=r[a];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function by(t,e,n){for(;e>t;e--){const i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function jw(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function vI(t,e){let n=[],i=!1;return Oe(t)?(i=!0,n=t):n=a4(t,e),n.length?new er({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function Uw(t){return t&&t.fill!==!1}function l4(t,e,n){let r=t[e].fill;const s=[e];let o;if(!n)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Ge(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function c4(t,e,n){const i=f4(t);if(he(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Ge(r)&&Math.floor(r)===r?u4(i[0],e,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function u4(t,e,n,i){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=i?!1:n}function h4(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:he(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function d4(t,e,n){let i;return t==="start"?i=n:t==="end"?i=e.options.reverse?e.min:e.max:he(t)?i=t.value:i=e.getBaseValue(),i}function f4(t){const e=t.options,n=e.fill;let i=ie(n&&n.target,n);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function p4(t){const{scale:e,index:n,line:i}=t,r=[],s=i.segments,o=i.points,a=g4(e,n);a.push(vI({x:null,y:e.bottom},i));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)m4(r,o[u],a)}return new er({points:r,options:{}})}function g4(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function m4(t,e,n){const i=[];for(let r=0;r<n.length;r++){const s=n[r],{first:o,last:a,point:l}=y4(s,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(t.push(l),!a)break}}t.push(...i)}function y4(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],h=o[u.start][n],d=o[u.end][n];if(_i(r,h,d)){a=r===h,l=r===d;break}}return{first:a,last:l,point:i}}class wI{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){const{x:r,y:s,radius:o}=this;return n=n||{start:0,end:Le},e.arc(r,s,o,n.end,n.start,!0),!i.bounds}interpolate(e){const{x:n,y:i,radius:r}=this,s=e.angle;return{x:n+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function _4(t){const{chart:e,fill:n,line:i}=t;if(Ge(n))return v4(e,n);if(n==="stack")return p4(t);if(n==="shape")return!0;const r=w4(t);return r instanceof wI?r:vI(r,i)}function v4(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function w4(t){return(t.scale||{}).getPointPositionForValue?x4(t):E4(t)}function E4(t){const{scale:e={},fill:n}=t,i=h4(n,e);if(Ge(i)){const r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function x4(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=d4(n,e,s),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,s);return new wI({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(e.getPointPositionForValue(l,o));return a}function Yf(t,e,n){const i=_4(e),{line:r,scale:s,axis:o}=e,a=r.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:h=c}=l||{};i&&r.points.length&&(yd(t,n),T4(t,{line:r,target:i,above:u,below:h,area:n,scale:s,axis:o}),_d(t))}function T4(t,e){const{line:n,target:i,above:r,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==r&&(zw(t,i,o.top),$w(t,{line:n,target:i,color:r,scale:a,property:l}),t.restore(),t.save(),zw(t,i,o.bottom)),$w(t,{line:n,target:i,color:s,scale:a,property:l}),t.restore()}function zw(t,e,n){const{segments:i,points:r}=e;let s=!0,o=!1;t.beginPath();for(const a of i){const{start:l,end:c}=a,u=r[l],h=r[by(l,c,r)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(h.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function $w(t,e){const{line:n,target:i,property:r,color:s,scale:o}=e,a=o4(n,i,r);for(const{source:l,target:c,start:u,end:h}of a){const{style:{backgroundColor:d=s}={}}=l,f=i!==!0;t.save(),t.fillStyle=d,S4(t,o,f&&Tg(r,u,h)),t.beginPath();const p=!!n.pathSegment(t,l);let y;if(f){p?t.closePath():Bw(t,i,h,r);const _=!!i.pathSegment(t,c,{move:p,reverse:!0});y=p&&_,y||Bw(t,i,u,r)}t.closePath(),t.fill(y?"evenodd":"nonzero"),t.restore()}}function S4(t,e,n){const{top:i,bottom:r}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,i,a-o,r-i),t.clip())}function Bw(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}var I4={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof er&&(l={visible:t.isDatasetVisible(o),index:o,fill:c4(a,o,i),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=l4(r,o,n.propagate))},beforeDraw(t,e,n){const i=n.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&Yf(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=t.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;Uw(s)&&Yf(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;!Uw(i)||n.drawTime!=="beforeDatasetDraw"||Yf(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Ww=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},b4=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Hw extends Vn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ke(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=at(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Ww(i,s);let c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let h=e;s.textAlign="left",s.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((p,y)=>{const _=i+n/2+s.measureText(p.text).width;(y===0||c[c.length-1]+_+2*a>o)&&(h+=u,c[c.length-(y>0?0:1)]=0,f+=u,d++),l[y]={left:0,top:f,row:d,width:_,height:r},c[c.length-1]+=_+a}),h}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,d=0,f=0,p=0,y=0;return this.legendItems.forEach((_,g)=>{const{itemWidth:m,itemHeight:v}=k4(i,n,s,_,r);g>0&&f+v+2*a>u&&(h+=d+a,c.push({width:d,height:f}),p+=d+a,y++,d=f=0),l[g]={left:p,top:f,col:y,width:m,height:v},d=Math.max(d,m),f+=v+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=ao(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ct(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Ct(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=Ct(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Ct(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;yd(e,this),this._draw(),_d(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Qe.color,l=ao(e.rtl,this.left,this.width),c=at(o.font),{padding:u}=o,h=c.size,d=h/2;let f;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:p,boxHeight:y,itemHeight:_}=Ww(o,h),g=function(w,S,b){if(isNaN(p)||p<=0||isNaN(y)||y<0)return;r.save();const A=ie(b.lineWidth,1);if(r.fillStyle=ie(b.fillStyle,a),r.lineCap=ie(b.lineCap,"butt"),r.lineDashOffset=ie(b.lineDashOffset,0),r.lineJoin=ie(b.lineJoin,"miter"),r.lineWidth=A,r.strokeStyle=ie(b.strokeStyle,a),r.setLineDash(ie(b.lineDash,[])),o.usePointStyle){const M={radius:y*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:A},U=l.xPlus(w,p/2),H=S+d;$S(r,M,U,H,o.pointStyleWidth&&p)}else{const M=S+Math.max((h-y)/2,0),U=l.leftForLtr(w,p),H=rs(b.borderRadius);r.beginPath(),Object.values(H).some(ne=>ne!==0)?Al(r,{x:U,y:M,w:p,h:y,radius:H}):r.rect(U,M,p,y),r.fill(),A!==0&&r.stroke()}r.restore()},m=function(w,S,b){_s(r,b.text,w,S+_/2,c,{strikethrough:b.hidden,textAlign:l.textAlign(b.textAlign)})},v=this.isHorizontal(),x=this._computeTitleHeight();v?f={x:Ct(s,this.left+u,this.right-i[0]),y:this.top+u+x,line:0}:f={x:this.left+u,y:Ct(s,this.top+x+u,this.bottom-n[0].height),line:0},YS(this.ctx,e.textDirection);const T=_+u;this.legendItems.forEach((w,S)=>{r.strokeStyle=w.fontColor,r.fillStyle=w.fontColor;const b=r.measureText(w.text).width,A=l.textAlign(w.textAlign||(w.textAlign=o.textAlign)),M=p+d+b;let U=f.x,H=f.y;l.setWidth(this.width),v?S>0&&U+M+u>this.right&&(H=f.y+=T,f.line++,U=f.x=Ct(s,this.left+u,this.right-i[f.line])):S>0&&H+T>this.bottom&&(U=f.x=U+n[f.line].width+u,f.line++,H=f.y=Ct(s,this.top+x+u,this.bottom-n[f.line].height));const ne=l.x(U);if(g(ne,H,w),U=GN(A,U+p+d,v?U+M:this.right,e.rtl),m(l.x(U),H,w),v)f.x+=M+u;else if(typeof w.text!="string"){const ve=c.lineHeight;f.y+=EI(w,ve)+u}else f.y+=T}),XS(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=at(n.font),r=Ut(n.padding);if(!n.display)return;const s=ao(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=Ct(e.align,h,this.right-d);else{const p=this.columnSizes.reduce((y,_)=>Math.max(y,_.height),0);u=c+Ct(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const f=Ct(a,h,h+d);o.textAlign=s.textAlign(yy(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,_s(o,n.text,f,u,i)}_computeTitleHeight(){const e=this.options.title,n=at(e.font),i=Ut(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(_i(e,this.left,this.right)&&_i(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],_i(e,r.left,r.left+r.width)&&_i(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!R4(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=b4(r,i);r&&!s&&ke(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&ke(n.onHover,[e,i,this],this)}else i&&ke(n.onClick,[e,i,this],this)}}function k4(t,e,n,i,r){const s=P4(i,t,e,n),o=A4(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function P4(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function A4(t,e,n){let i=t;return typeof e.text!="string"&&(i=EI(e,n)),i}function EI(t,e){const n=t.text?t.text.length:0;return e*n}function R4(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var C4={id:"legend",_element:Hw,start(t,e,n){const i=t.legend=new Hw({ctx:t.ctx,options:n,chart:t});Nt.configure(t,i,n),Nt.addBox(t,i)},stop(t){Nt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Nt.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Ut(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class ky extends Vn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=Oe(i.text)?i.text.length:1;this._padding=Ut(i.padding);const s=r*at(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=Ct(a,i,s),h=n+e,c=s-i):(o.position==="left"?(u=i+e,h=Ct(a,r,n),l=Ve*-.5):(u=s-e,h=Ct(a,n,r),l=Ve*.5),c=r-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=at(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);_s(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:yy(n.align),textBaseline:"middle",translation:[o,a]})}}function D4(t,e){const n=new ky({ctx:t.ctx,options:e,chart:t});Nt.configure(t,n,e),Nt.addBox(t,n),t.titleBlock=n}var M4={id:"title",_element:ky,start(t,e,n){D4(t,n)},stop(t){const e=t.titleBlock;Nt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Nt.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const iu=new WeakMap;var O4={id:"subtitle",start(t,e,n){const i=new ky({ctx:t.ctx,options:n,chart:t});Nt.configure(t,i,n),Nt.addBox(t,i),iu.set(t,i)},stop(t){Nt.removeBox(t,iu.get(t)),iu.delete(t)},beforeUpdate(t,e,n){const i=iu.get(t);Nt.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Pa={average(t){if(!t.length)return!1;let e,n,i=0,r=0,s=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();i+=a.x,r+=a.y,++s}}return{x:i/s,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=gg(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function $n(t,e){return e&&(Oe(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ci(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function N4(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function qw(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=at(e.bodyFont),c=at(e.titleFont),u=at(e.footerFont),h=s.length,d=r.length,f=i.length,p=Ut(e.padding);let y=p.height,_=0,g=i.reduce((x,T)=>x+T.before.length+T.lines.length+T.after.length,0);if(g+=t.beforeBody.length+t.afterBody.length,h&&(y+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),g){const x=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=f*x+(g-f)*l.lineHeight+(g-1)*e.bodySpacing}d&&(y+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let m=0;const v=function(x){_=Math.max(_,n.measureText(x).width+m)};return n.save(),n.font=c.string,xe(t.title,v),n.font=l.string,xe(t.beforeBody.concat(t.afterBody),v),m=e.displayColors?o+2+e.boxPadding:0,xe(i,x=>{xe(x.before,v),xe(x.lines,v),xe(x.after,v)}),m=0,n.font=u.string,xe(t.footer,v),n.restore(),_+=p.width,{width:_,height:y}}function L4(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function V4(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function F4(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),V4(c,t,e,n)&&(c="center"),c}function Kw(t,e,n){const i=n.yAlign||e.yAlign||L4(t,n);return{xAlign:n.xAlign||e.xAlign||F4(t,e,n,i),yAlign:i}}function j4(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function U4(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function Gw(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=rs(o);let p=j4(e,a);const y=U4(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,d)+r:a==="right"&&(p+=Math.max(h,f)+r),{x:ft(p,0,i.width-e.width),y:ft(y,0,i.height-e.height)}}function ru(t,e,n){const i=Ut(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function Qw(t){return $n([],ci(t))}function z4(t,e,n){return Ar(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Yw(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const xI={beforeTitle:ai,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:ai,beforeBody:ai,beforeLabel:ai,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return _e(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ai,afterBody:ai,beforeFooter:ai,footer:ai,afterFooter:ai};function Kt(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?xI[e].call(n,i):r}class Sg extends Vn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new tI(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=z4(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=Kt(i,"beforeTitle",this,e),s=Kt(i,"title",this,e),o=Kt(i,"afterTitle",this,e);let a=[];return a=$n(a,ci(r)),a=$n(a,ci(s)),a=$n(a,ci(o)),a}getBeforeBody(e,n){return Qw(Kt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return xe(e,s=>{const o={before:[],lines:[],after:[]},a=Yw(i,s);$n(o.before,ci(Kt(a,"beforeLabel",this,s))),$n(o.lines,Kt(a,"label",this,s)),$n(o.after,ci(Kt(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return Qw(Kt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=Kt(i,"beforeFooter",this,e),s=Kt(i,"footer",this,e),o=Kt(i,"afterFooter",this,e);let a=[];return a=$n(a,ci(r)),a=$n(a,ci(s)),a=$n(a,ci(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(N4(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),xe(a,u=>{const h=Yw(e.callbacks,u);r.push(Kt(h,"labelColor",this,u)),s.push(Kt(h,"labelPointStyle",this,u)),o.push(Kt(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=Pa[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=qw(this,i),c=Object.assign({},a,l),u=Kw(this.chart,i,c),h=Gw(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=rs(a),{x:d,y:f}=e,{width:p,height:y}=n;let _,g,m,v,x,T;return s==="center"?(x=f+y/2,r==="left"?(_=d,g=_-o,v=x+o,T=x-o):(_=d+p,g=_+o,v=x-o,T=x+o),m=_):(r==="left"?g=d+Math.max(l,u)+o:r==="right"?g=d+p-Math.max(c,h)-o:g=this.caretX,s==="top"?(v=f,x=v-o,_=g-o,m=g+o):(v=f+y,x=v+o,_=g+o,m=g-o),T=v),{x1:_,x2:g,x3:m,y1:v,y2:x,y3:T}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=ao(i.rtl,this.x,this.width);for(e.x=ru(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=at(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,u=at(s.bodyFont),h=ru(this,"left",s),d=r.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,p=n.y+f;if(s.usePointStyle){const y={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=r.leftForLtr(d,c)+c/2,g=p+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,yg(e,y,_,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,yg(e,y,_,g)}else{e.lineWidth=he(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const y=r.leftForLtr(d,c),_=r.leftForLtr(r.xPlus(d,1),c-2),g=rs(o.borderRadius);Object.values(g).some(m=>m!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Al(e,{x:y,y:p,w:c,h:l,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Al(e,{x:_,y:p+1,w:c-2,h:l-2,radius:g}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(y,p,c,l),e.strokeRect(y,p,c,l),e.fillStyle=o.backgroundColor,e.fillRect(_,p+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=at(i.bodyFont);let d=h.lineHeight,f=0;const p=ao(i.rtl,this.x,this.width),y=function(b){n.fillText(b,p.x(e.x+f),e.y+d/2),e.y+=d+s},_=p.textAlign(o);let g,m,v,x,T,w,S;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=ru(this,_,i),n.fillStyle=i.bodyColor,xe(this.beforeBody,y),f=a&&_!=="right"?o==="center"?c/2+u:c+2+u:0,x=0,w=r.length;x<w;++x){for(g=r[x],m=this.labelTextColors[x],n.fillStyle=m,xe(g.before,y),v=g.lines,a&&v.length&&(this._drawColorBox(n,e,x,p,i),d=Math.max(h.lineHeight,l)),T=0,S=v.length;T<S;++T)y(v[T]),d=h.lineHeight;xe(g.after,y)}f=0,d=h.lineHeight,xe(this.afterBody,y),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=ao(i.rtl,this.x,this.width);for(e.x=ru(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=at(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:p}=rs(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+c,l+u-p),n.quadraticCurveTo(a+c,l+u,a+c-p,l+u),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=Pa[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=qw(this,e),l=Object.assign({},o,this._size),c=Kw(n,e,l),u=Gw(e,l,c,n);(r._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Ut(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),YS(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),XS(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Th(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!Th(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=Pa[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}L(Sg,"positioners",Pa);var $4={id:"tooltip",_element:Sg,positioners:Pa,afterInit(t,e,n){n&&(t.tooltip=new Sg({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:xI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},B4=Object.freeze({__proto__:null,Colors:t4,Decimation:s4,Filler:I4,Legend:C4,SubTitle:O4,Title:M4,Tooltip:$4});const W4=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function H4(t,e,n,i){const r=t.indexOf(e);if(r===-1)return W4(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const q4=(t,e)=>t===null?null:ft(Math.round(t),0,e);function Xw(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Ig extends Ss{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(_e(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:H4(i,e,ie(n,e),this._addedLabels),q4(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return Xw.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}L(Ig,"id","category"),L(Ig,"defaults",{ticks:{callback:Xw}});function K4(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=t,f=s||1,p=u-1,{min:y,max:_}=e,g=!_e(o),m=!_e(a),v=!_e(c),x=(_-y)/(h+1);let T=H0((_-y)/p/f)*f,w,S,b,A;if(T<1e-14&&!g&&!m)return[{value:y},{value:_}];A=Math.ceil(_/T)-Math.floor(y/T),A>p&&(T=H0(A*T/p/f)*f),_e(l)||(w=Math.pow(10,l),T=Math.ceil(T*w)/w),r==="ticks"?(S=Math.floor(y/T)*T,b=Math.ceil(_/T)*T):(S=y,b=_),g&&m&&s&&zN((a-o)/s,T/1e3)?(A=Math.round(Math.min((a-o)/T,u)),T=(a-o)/A,S=o,b=a):v?(S=g?o:S,b=m?a:b,A=c-1,T=(b-S)/A):(A=(b-S)/T,qa(A,Math.round(A),T/1e3)?A=Math.round(A):A=Math.ceil(A));const M=Math.max(q0(T),q0(S));w=Math.pow(10,_e(l)?M:l),S=Math.round(S*w)/w,b=Math.round(b*w)/w;let U=0;for(g&&(d&&S!==o?(n.push({value:o}),S<o&&U++,qa(Math.round((S+U*T)*w)/w,o,Jw(o,x,t))&&U++):S<o&&U++);U<A;++U){const H=Math.round((S+U*T)*w)/w;if(m&&H>a)break;n.push({value:H})}return m&&d&&b!==a?n.length&&qa(n[n.length-1].value,a,Jw(a,x,t))?n[n.length-1].value=a:n.push({value:a}):(!m||b===a)&&n.push({value:b}),n}function Jw(t,e,{horizontal:n,minRotation:i}){const r=Cn(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class Rh extends Ss{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return _e(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=ei(r),c=ei(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=K4(r,s);return e.bounds==="ticks"&&MS(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return ac(e,this.chart.options.locale,this.options.ticks.format)}}class bg extends Rh{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ge(e)?e:0,this.max=Ge(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Cn(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}L(bg,"id","linear"),L(bg,"defaults",{ticks:{callback:md.formatters.numeric}});const Cl=t=>Math.floor(Zi(t)),Vr=(t,e)=>Math.pow(10,Cl(t)+e);function Zw(t){return t/Math.pow(10,Cl(t))===1}function e1(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function G4(t,e){const n=e-t;let i=Cl(n);for(;e1(t,e,i)>10;)i++;for(;e1(t,e,i)<10;)i--;return Math.min(i,Cl(t))}function Q4(t,{min:e,max:n}){e=tn(t.min,e);const i=[],r=Cl(e);let s=G4(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,s)),d=tn(t.min,Math.round((l+u+h*Math.pow(10,s))*o)/o);for(;d<n;)i.push({value:d,major:Zw(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),d=Math.round((l+u+h*Math.pow(10,s))*o)/o;const f=tn(t.max,d);return i.push({value:f,major:Zw(f),significand:h}),i}class kg extends Ss{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=Rh.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return Ge(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ge(e)?Math.max(0,e):null,this.max=Ge(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ge(this._userMin)&&(this.min=e===Vr(this.min,0)?Vr(this.min,-1):Vr(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=e?i:a,o=a=>r=n?r:a;i===r&&(i<=0?(s(1),o(10)):(s(Vr(i,-1)),o(Vr(r,1)))),i<=0&&s(Vr(r,-1)),r<=0&&o(Vr(i,1)),this.min=i,this.max=r}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=Q4(n,this);return e.bounds==="ticks"&&MS(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":ac(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Zi(e),this._valueRange=Zi(this.max)-Zi(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Zi(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}L(kg,"id","logarithmic"),L(kg,"defaults",{ticks:{callback:md.formatters.logarithmic,major:{enabled:!0}}});function Pg(t){const e=t.ticks;if(e.display&&t.display){const n=Ut(e.backdropPadding);return ie(e.font&&e.font.size,Qe.font.size)+n.height}return 0}function Y4(t,e,n){return n=Oe(n)?n:[n],{w:rL(t,e.string,n),h:n.length*e.lineHeight}}function t1(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function X4(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Ve/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));r[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+r[l],a),h=at(c.font),d=Y4(t.ctx,h,t._pointLabels[l]);i[l]=d;const f=rn(t.getIndexAngle(l)+a),p=Math.round(gy(f)),y=t1(p,u.x,d.w,0,180),_=t1(p,u.y,d.h,90,270);J4(n,e,f,y,_)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=t3(t,i,r)}function J4(t,e,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function Z4(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,i+r+o,s),c=Math.round(gy(rn(l.angle+Ze))),u=r3(l.y,a.h,c),h=n3(c),d=i3(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function e3(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:s}=t;return!(wi({x:n,y:i},e)||wi({x:n,y:s},e)||wi({x:r,y:i},e)||wi({x:r,y:s},e))}function t3(t,e,n){const i=[],r=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Pg(s)/2,additionalAngle:o?Ve/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=e[u];const h=Z4(t,u,l);i.push(h),a==="auto"&&(h.visible=e3(h,c),h.visible&&(c=h))}return i}function n3(t){return t===0||t===180?"center":t<180?"left":"right"}function i3(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function r3(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function s3(t,e,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=e;if(!_e(a)){const l=rs(e.borderRadius),c=Ut(e.backdropPadding);t.fillStyle=a;const u=i-c.left,h=r-c.top,d=s-i+c.width,f=o-r+c.height;Object.values(l).some(p=>p!==0)?(t.beginPath(),Al(t,{x:u,y:h,w:d,h:f,radius:l}),t.fill()):t.fillRect(u,h,d,f)}}function o3(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const s=t._pointLabelItems[r];if(!s.visible)continue;const o=i.setContext(t.getPointLabelContext(r));s3(n,o,s);const a=at(o.font),{x:l,y:c,textAlign:u}=s;_s(n,t._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function TI(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,Le);else{let s=t.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=t.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function a3(t,e,n,i,r){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),TI(t,n,o,i),s.closePath(),s.stroke(),s.restore())}function l3(t,e,n){return Ar(t,{label:n,index:e,type:"pointLabel"})}class Aa extends Rh{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ut(Pg(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Ge(e)&&!isNaN(e)?e:0,this.max=Ge(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Pg(this.options))}generateTickLabels(e){Rh.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const r=ke(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?X4(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,r){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,r))}getIndexAngle(e){const n=Le/(this._pointLabels.length||1),i=this.options.startAngle||0;return rn(e*n+Cn(i))}getDistanceFromCenterForValue(e){if(_e(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(_e(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return l3(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const r=this.getIndexAngle(e)-Ze+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:n,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),TI(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:r,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&o3(this,o),r.display&&this.ticks.forEach((u,h)=>{if(h!==0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=r.setContext(d),p=s.setContext(d);a3(this,f,l,o,p)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=at(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=Ut(c.backdropPadding);e.fillRect(-o/2-h.left,-s-u.size/2-h.top,o+h.width,u.size+h.height)}_s(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}L(Aa,"id","radialLinear"),L(Aa,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:md.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),L(Aa,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),L(Aa,"descriptors",{angleLines:{_fallback:"grid"}});const wd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Qt=Object.keys(wd);function n1(t,e){return t-e}function i1(t,e){if(_e(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Ge(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(xo(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function r1(t,e,n,i){const r=Qt.length;for(let s=Qt.indexOf(t);s<r-1;++s){const o=wd[Qt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Qt[s]}return Qt[r-1]}function c3(t,e,n,i,r){for(let s=Qt.length-1;s>=Qt.indexOf(n);s--){const o=Qt[s];if(wd[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Qt[n?Qt.indexOf(n):0]}function u3(t){for(let e=Qt.indexOf(t)+1,n=Qt.length;e<n;++e)if(wd[Qt[e]].common)return Qt[e]}function s1(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=my(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function h3(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function o1(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:h3(t,i,r,n)}class Dl extends Ss{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new wV._date(e.adapters.date);r.init(n),Ha(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:i1(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Ge(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=Ge(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=HN(r,s,o);return this._unit=n.unit||(i.autoSkip?r1(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):c3(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:u3(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),o1(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=ft(n,0,o),i=ft(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||r1(s.minUnit,n,i,this._getLabelCapacity(n)),a=ie(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=xo(l)||l===!0,u={};let h=n,d,f;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const p=r.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<i;d=+e.add(d,a,o),f++)s1(u,d,p);return(d===i||r.bounds==="ticks"||f===1)&&s1(u,d,p),Object.keys(u).sort(n1).map(y=>+y)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return ke(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=i[n],f=c&&h&&d&&d.major;return this._adapter.format(e,r||(f?h:u))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=Cn(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,o1(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(i1(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return LS(e.sort(n1))}}L(Dl,"id","time"),L(Dl,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function su(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=vi(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=vi(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Ag extends Dl{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=su(n,this.min),this._tableRange=su(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(su(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return su(this._table,i*this._tableRange+this._minPos,!0)}}L(Ag,"id","timeseries"),L(Ag,"defaults",Dl.defaults);var d3=Object.freeze({__proto__:null,CategoryScale:Ig,LinearScale:bg,LogarithmicScale:kg,RadialLinearScale:Aa,TimeScale:Dl,TimeSeriesScale:Ag});const f3=[vV,QF,B4,d3];fi.register(...f3);function p3(){const{id:t}=MC(),[e,n]=P.useState({}),[i,r]=P.useState(!1),[s,o]=P.useState(""),[a,l]=P.useState(!1);Zl();const c=P.useRef(null),u=P.useRef(null);function h(){r(!0),fetch(`https://pokeapi.co/api/v2/pokemon/${t}/`).then(p=>p.json()).then(p=>{r(!1),n(y=>({...y,data:p})),console.log(p)})}const d={bug:"#26de81",dragon:"#ffeaa7",electric:"#fed330",fairy:"#FF0069",fighting:"#30336b",fire:"#f0932b",flying:"#81ecec",grass:"#00b894",ground:"#EFB549",ghost:"#a55eea",ice:"#74b9ff",normal:"#95afc0",poison:"#6c5ce7",psychic:"#a29bfe",rock:"#2d3436",water:"#0190FF"};function f(p){u.current&&u.current.destroy(),p.map(m=>({name:m.ability.name,height:m.slot}));const y={labels:e.data?e.data.stats.map(m=>m.stat.name):[],datasets:[{label:"Estadsticas",data:e.data?e.data.stats.map(m=>m.base_stat):[],backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},_={scales:{r:{suggestedMin:0,suggestedMax:5}}},g=c.current.getContext("2d");u.current=new fi(g,{type:"radar",data:y,options:_})}return P.useEffect(()=>{h()},[]),P.useEffect(()=>{e.data?(o(`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${e.data.id}.png`),l(!1)):l(!0)},[e]),P.useEffect(()=>{e.data&&f(e.data.abilities)},[e]),E.jsx("div",{class:"container",children:E.jsxs("div",{class:"detalle",children:[E.jsx("article",{id:"preload",children:i&&!a&&E.jsx("div",{class:"o-pokeball c-loader u-tada"})}),a&&E.jsx("div",{className:"container",children:E.jsxs("div",{class:"error404",children:[E.jsx("h1",{children:"No se encontr el Pokmon"}),E.jsx(Xi,{to:"/pokemon",className:"volver",children:"Volver"}),E.jsx("img",{src:"../img/error404.png",alt:""})]})}),e.data&&E.jsx(E.Fragment,{children:E.jsxs("div",{class:"tarjeta-pokemon",children:[E.jsxs("div",{class:"tarjeta-cabecera",style:{background:e.data?d[e.data.types[0].type.name]:""},children:[E.jsxs("div",{class:"detalles",children:[E.jsx("h2",{className:"name-pokemon",children:e.data.name}),E.jsxs("span",{className:"pokedexid",children:["#",t]})]}),E.jsx("div",{className:"tipo-container",children:e.data.types.map((p,y)=>E.jsx("span",{className:"tipo",style:{backgroundColor:d[p.type.name]},children:p.type.name},y))}),E.jsx("div",{class:"imagen",children:E.jsx("img",{src:s,alt:"showdown_front_default"})}),E.jsxs("div",{class:"menu-imagenes",children:[Object.values(e.data.sprites.other["official-artwork"]).filter(p=>typeof p=="string"&&p).map((p,y)=>E.jsx("img",{src:p,alt:"artwork",onClick:()=>o(p)},y)),E.jsx("img",{src:`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/showdown/${e.data.id}.gif`,alt:"gif",onClick:()=>o(`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/showdown/${e.data.id}.gif`)})]})]}),E.jsx("div",{class:"informacion",children:E.jsxs("div",{class:"estadisticas",children:[E.jsxs("div",{class:"estatus",children:[E.jsx("h3",{children:"Estatus"}),E.jsxs("ul",{children:[E.jsxs("li",{children:["Altura: ",e.data.height]}),E.jsxs("li",{children:["Peso: ",e.data.weight]}),E.jsxs("li",{children:["Experiencia Base: ",e.data.base_experience]})]})]}),E.jsxs("div",{class:"habilidades",children:[E.jsx("h3",{children:"Habilidades"}),E.jsx("ul",{children:e.data.abilities.map((p,y)=>E.jsx("li",{children:p.ability.name},y))})]}),E.jsxs("div",{class:"movimientos",children:[E.jsx("h3",{children:"Movimientos"}),E.jsx("ul",{children:e.data.moves.slice(0,5).map((p,y)=>E.jsx("li",{children:p.move.name},y))})]}),E.jsxs("div",{class:"especies",children:[E.jsx("h3",{children:"Especies"}),E.jsx("p",{children:e.data.species.name})]})]})}),E.jsxs("div",{className:"stats-grafico",children:[E.jsx("h3",{children:"Grfico radial"}),E.jsx("canvas",{ref:c,width:"400",height:"400"})]})]})})]})})}var g3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},j,Py=Py||{},ee=g3||self;function Ed(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function cc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function m3(t){return Object.prototype.hasOwnProperty.call(t,Xf)&&t[Xf]||(t[Xf]=++y3)}var Xf="closure_uid_"+(1e9*Math.random()>>>0),y3=0;function _3(t,e,n){return t.call.apply(t.bind,arguments)}function v3(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Lt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Lt=_3:Lt=v3,Lt.apply(null,arguments)}function ou(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function mt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function Rr(){this.s=this.s,this.o=this.o}var w3=0;Rr.prototype.s=!1;Rr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),w3!=0)&&m3(this)};Rr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const SI=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Ay(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function a1(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(Ed(i)){const r=t.length||0,s=i.length||0;t.length=r+s;for(let o=0;o<s;o++)t[r+o]=i[o]}else t.push(i)}}function Vt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Vt.prototype.h=function(){this.defaultPrevented=!0};var E3=function(){if(!ee.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};ee.addEventListener("test",n,e),ee.removeEventListener("test",n,e)}catch{}return t}();function Ml(t){return/^[\s\xa0]*$/.test(t)}function xd(){var t=ee.navigator;return t&&(t=t.userAgent)?t:""}function qn(t){return xd().indexOf(t)!=-1}function Ry(t){return Ry[" "](t),t}Ry[" "]=function(){};function x3(t,e){var n=pj;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var T3=qn("Opera"),Io=qn("Trident")||qn("MSIE"),II=qn("Edge"),Rg=II||Io,bI=qn("Gecko")&&!(xd().toLowerCase().indexOf("webkit")!=-1&&!qn("Edge"))&&!(qn("Trident")||qn("MSIE"))&&!qn("Edge"),S3=xd().toLowerCase().indexOf("webkit")!=-1&&!qn("Edge");function kI(){var t=ee.document;return t?t.documentMode:void 0}var Cg;e:{var Jf="",Zf=function(){var t=xd();if(bI)return/rv:([^\);]+)(\)|;)/.exec(t);if(II)return/Edge\/([\d\.]+)/.exec(t);if(Io)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(S3)return/WebKit\/(\S+)/.exec(t);if(T3)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Zf&&(Jf=Zf?Zf[1]:""),Io){var ep=kI();if(ep!=null&&ep>parseFloat(Jf)){Cg=String(ep);break e}}Cg=Jf}var Dg;if(ee.document&&Io){var l1=kI();Dg=l1||parseInt(Cg,10)||void 0}else Dg=void 0;var I3=Dg;function Ol(t,e){if(Vt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(bI){e:{try{Ry(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:b3[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ol.$.h.call(this)}}mt(Ol,Vt);var b3={2:"touch",3:"pen",4:"mouse"};Ol.prototype.h=function(){Ol.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var uc="closure_listenable_"+(1e6*Math.random()|0),k3=0;function P3(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++k3,this.fa=this.ia=!1}function Td(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Cy(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function A3(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function PI(t){const e={};for(const n in t)e[n]=t[n];return e}const c1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function AI(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let s=0;s<c1.length;s++)n=c1[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Sd(t){this.src=t,this.g={},this.h=0}Sd.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Og(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new P3(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};function Mg(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=SI(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Td(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Og(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}var Dy="closure_lm_"+(1e6*Math.random()|0),tp={};function RI(t,e,n,i,r){if(i&&i.once)return DI(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)RI(t,e[s],n,i,r);return null}return n=Ny(n),t&&t[uc]?t.O(e,n,cc(i)?!!i.capture:!!i,r):CI(t,e,n,!1,i,r)}function CI(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=cc(r)?!!r.capture:!!r,a=Oy(t);if(a||(t[Dy]=a=new Sd(t)),n=a.add(e,n,i,o,s),n.proxy)return n;if(i=R3(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)E3||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(OI(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function R3(){function t(n){return e.call(t.src,t.listener,n)}const e=C3;return t}function DI(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)DI(t,e[s],n,i,r);return null}return n=Ny(n),t&&t[uc]?t.P(e,n,cc(i)?!!i.capture:!!i,r):CI(t,e,n,!0,i,r)}function MI(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)MI(t,e[s],n,i,r);else i=cc(i)?!!i.capture:!!i,n=Ny(n),t&&t[uc]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Og(s,n,i,r),-1<n&&(Td(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Oy(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Og(e,n,i,r)),(n=-1<t?e[t]:null)&&My(n))}function My(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[uc])Mg(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(OI(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Oy(e))?(Mg(n,t),n.h==0&&(n.src=null,e[Dy]=null)):Td(t)}}}function OI(t){return t in tp?tp[t]:tp[t]="on"+t}function C3(t,e){if(t.fa)t=!0;else{e=new Ol(e,this);var n=t.listener,i=t.la||t.src;t.ia&&My(t),t=n.call(i,e)}return t}function Oy(t){return t=t[Dy],t instanceof Sd?t:null}var np="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ny(t){return typeof t=="function"?t:(t[np]||(t[np]=function(e){return t.handleEvent(e)}),t[np])}function gt(){Rr.call(this),this.i=new Sd(this),this.S=this,this.J=null}mt(gt,Rr);gt.prototype[uc]=!0;gt.prototype.removeEventListener=function(t,e,n,i){MI(this,t,e,n,i)};function St(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new Vt(e,t);else if(e instanceof Vt)e.target=e.target||t;else{var r=e;e=new Vt(i,t),AI(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=au(o,i,!0,e)&&r}if(o=e.g=t,r=au(o,i,!0,e)&&r,r=au(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=au(o,i,!1,e)&&r}gt.prototype.N=function(){if(gt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)Td(n[i]);delete t.g[e],t.h--}}this.J=null};gt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};gt.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function au(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Mg(t.i,o),r=a.call(l,i)!==!1&&r}}return r&&!i.defaultPrevented}var Ly=ee.JSON.stringify;class D3{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function M3(){var t=Vy;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class O3{constructor(){this.h=this.g=null}add(e,n){const i=NI.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var NI=new D3(()=>new N3,t=>t.reset());class N3{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function L3(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function V3(t){ee.setTimeout(()=>{throw t},0)}let Nl,Ll=!1,Vy=new O3,LI=()=>{const t=ee.Promise.resolve(void 0);Nl=()=>{t.then(F3)}};var F3=()=>{for(var t;t=M3();){try{t.h.call(t.g)}catch(n){V3(n)}var e=NI;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ll=!1};function Id(t,e){gt.call(this),this.h=t||1,this.g=e||ee,this.j=Lt(this.qb,this),this.l=Date.now()}mt(Id,gt);j=Id.prototype;j.ga=!1;j.T=null;j.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),St(this,"tick"),this.ga&&(Fy(this),this.start()))}};j.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Fy(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}j.N=function(){Id.$.N.call(this),Fy(this),delete this.g};function jy(t,e,n){if(typeof t=="function")n&&(t=Lt(t,n));else if(t&&typeof t.handleEvent=="function")t=Lt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ee.setTimeout(t,e||0)}function VI(t){t.g=jy(()=>{t.g=null,t.i&&(t.i=!1,VI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class j3 extends Rr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:VI(this)}N(){super.N(),this.g&&(ee.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vl(t){Rr.call(this),this.h=t,this.g={}}mt(Vl,Rr);var u1=[];function FI(t,e,n,i){Array.isArray(n)||(n&&(u1[0]=n.toString()),n=u1);for(var r=0;r<n.length;r++){var s=RI(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function jI(t){Cy(t.g,function(e,n){this.g.hasOwnProperty(n)&&My(e)},t),t.g={}}Vl.prototype.N=function(){Vl.$.N.call(this),jI(this)};Vl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function bd(){this.g=!0}bd.prototype.Ea=function(){this.g=!1};function U3(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function z3(t,e,n,i,r,s,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+s+" "+o})}function Js(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+B3(t,n)+(i?" "+i:"")})}function $3(t,e){t.info(function(){return"TIMEOUT: "+e})}bd.prototype.info=function(){};function B3(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return Ly(n)}catch{return e}}var Is={},h1=null;function kd(){return h1=h1||new gt}Is.Ta="serverreachability";function UI(t){Vt.call(this,Is.Ta,t)}mt(UI,Vt);function Fl(t){const e=kd();St(e,new UI(e))}Is.STAT_EVENT="statevent";function zI(t,e){Vt.call(this,Is.STAT_EVENT,t),this.stat=e}mt(zI,Vt);function Bt(t){const e=kd();St(e,new zI(e,t))}Is.Ua="timingevent";function $I(t,e){Vt.call(this,Is.Ua,t),this.size=e}mt($I,Vt);function hc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ee.setTimeout(function(){t()},e)}var Pd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},BI={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Uy(){}Uy.prototype.h=null;function d1(t){return t.h||(t.h=t.i())}function WI(){}var dc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function zy(){Vt.call(this,"d")}mt(zy,Vt);function $y(){Vt.call(this,"c")}mt($y,Vt);var Ng;function Ad(){}mt(Ad,Uy);Ad.prototype.g=function(){return new XMLHttpRequest};Ad.prototype.i=function(){return{}};Ng=new Ad;function fc(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Vl(this),this.P=W3,t=Rg?125:void 0,this.V=new Id(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new HI}function HI(){this.i=null,this.g="",this.h=!1}var W3=45e3,qI={},Lg={};j=fc.prototype;j.setTimeout=function(t){this.P=t};function Vg(t,e,n){t.L=1,t.A=Cd(Ri(e)),t.u=n,t.S=!0,KI(t,null)}function KI(t,e){t.G=Date.now(),pc(t),t.B=Ri(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),tb(n.i,"t",i),t.o=0,n=t.l.J,t.h=new HI,t.g=xb(t.l,n?e:null,!t.u),0<t.O&&(t.M=new j3(Lt(t.Pa,t,t.g),t.O)),FI(t.U,t.g,"readystatechange",t.nb),e=t.I?PI(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Fl(),U3(t.j,t.v,t.B,t.m,t.W,t.u)}j.nb=function(t){t=t.target;const e=this.M;e&&Gn(t)==3?e.l():this.Pa(t)};j.Pa=function(t){try{if(t==this.g)e:{const u=Gn(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||Rg||this.g&&(this.h.h||this.g.ja()||m1(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?Fl(3):Fl(2)),Rd(this);var n=this.g.da();this.ca=n;t:if(GI(this)){var i=m1(this.g);t="";var r=i.length,s=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xr(this),Ya(this);var o="";break t}this.h.i=new ee.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,z3(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ml(a)){var c=a;break t}}c=null}if(n=c)Js(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fg(this,n);else{this.i=!1,this.s=3,Bt(12),Xr(this),Ya(this);break e}}this.S?(QI(this,u,o),Rg&&this.i&&u==3&&(FI(this.U,this.V,"tick",this.mb),this.V.start())):(Js(this.j,this.m,o,null),Fg(this,o)),u==4&&Xr(this),this.i&&!this.J&&(u==4?_b(this.l,this):(this.i=!1,pc(this)))}else hj(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),Xr(this),Ya(this)}}}catch{}finally{}};function GI(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function QI(t,e,n){let i=!0,r;for(;!t.J&&t.o<n.length;)if(r=H3(t,n),r==Lg){e==4&&(t.s=4,Bt(14),i=!1),Js(t.j,t.m,null,"[Incomplete Response]");break}else if(r==qI){t.s=4,Bt(15),Js(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Js(t.j,t.m,r,null),Fg(t,r);GI(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Bt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Gy(e),e.M=!0,Bt(11))):(Js(t.j,t.m,n,"[Invalid Chunked Response]"),Xr(t),Ya(t))}j.mb=function(){if(this.g){var t=Gn(this.g),e=this.g.ja();this.o<e.length&&(Rd(this),QI(this,t,e),this.i&&t!=4&&pc(this))}};function H3(t,e){var n=t.o,i=e.indexOf(`
`,n);return i==-1?Lg:(n=Number(e.substring(n,i)),isNaN(n)?qI:(i+=1,i+n>e.length?Lg:(e=e.slice(i,i+n),t.o=i+n,e)))}j.cancel=function(){this.J=!0,Xr(this)};function pc(t){t.Y=Date.now()+t.P,YI(t,t.P)}function YI(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=hc(Lt(t.lb,t),e)}function Rd(t){t.C&&(ee.clearTimeout(t.C),t.C=null)}j.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?($3(this.j,this.B),this.L!=2&&(Fl(),Bt(17)),Xr(this),this.s=2,Ya(this)):YI(this,this.Y-t)};function Ya(t){t.l.H==0||t.J||_b(t.l,t)}function Xr(t){Rd(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Fy(t.V),jI(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Fg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||jg(n.i,t))){if(!t.K&&jg(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Mh(n),Nd(n);else break e;Ky(n),Bt(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=hc(Lt(n.ib,n),6e3));if(1>=rb(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Jr(n,11)}else if((t.K||n.g==t)&&Mh(n),!Ml(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(i=1.5*d,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=i.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(By(s,s.h),s.h=null))}if(i.F){const y=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(i.Da=y,De(i.I,i.F,y))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var o=t;if(i.wa=Eb(i,i.J?i.pa:null,i.Y),o.K){sb(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.C&&(Rd(a),pc(a)),i.g=o}else mb(i);0<n.j.length&&Ld(n)}else c[0]!="stop"&&c[0]!="close"||Jr(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Jr(n,7):qy(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Fl(4)}catch{}}function q3(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Ed(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function K3(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Ed(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function XI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Ed(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=K3(t),i=q3(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}var JI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function G3(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function os(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof os){this.h=t.h,Ch(this,t.j),this.s=t.s,this.g=t.g,Dh(this,t.m),this.l=t.l;var e=t.i,n=new jl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),f1(this,n),this.o=t.o}else t&&(e=String(t).match(JI))?(this.h=!1,Ch(this,e[1]||"",!0),this.s=Ra(e[2]||""),this.g=Ra(e[3]||"",!0),Dh(this,e[4]),this.l=Ra(e[5]||"",!0),f1(this,e[6]||"",!0),this.o=Ra(e[7]||"")):(this.h=!1,this.i=new jl(null,this.h))}os.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ca(e,p1,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ca(e,p1,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ca(n,n.charAt(0)=="/"?X3:Y3,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ca(n,Z3)),t.join("")};function Ri(t){return new os(t)}function Ch(t,e,n){t.j=n?Ra(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Dh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function f1(t,e,n){e instanceof jl?(t.i=e,ej(t.i,t.h)):(n||(e=Ca(e,J3)),t.i=new jl(e,t.h))}function De(t,e,n){t.i.set(e,n)}function Cd(t){return De(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ra(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ca(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Q3),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Q3(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var p1=/[#\/\?@]/g,Y3=/[#\?:]/g,X3=/[#\?]/g,J3=/[#\?@]/g,Z3=/#/g;function jl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Cr(t){t.g||(t.g=new Map,t.h=0,t.i&&G3(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}j=jl.prototype;j.add=function(t,e){Cr(this),this.i=null,t=zo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function ZI(t,e){Cr(t),e=zo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function eb(t,e){return Cr(t),e=zo(t,e),t.g.has(e)}j.forEach=function(t,e){Cr(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};j.ta=function(){Cr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let s=0;s<r.length;s++)n.push(e[i])}return n};j.Z=function(t){Cr(this);let e=[];if(typeof t=="string")eb(this,t)&&(e=e.concat(this.g.get(zo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};j.set=function(t,e){return Cr(this),this.i=null,t=zo(this,t),eb(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};j.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function tb(t,e,n){ZI(t,e),0<n.length&&(t.i=null,t.g.set(zo(t,e),Ay(n)),t.h+=n.length)}j.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;o[i]!==""&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};function zo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function ej(t,e){e&&!t.j&&(Cr(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(ZI(this,i),tb(this,r,n))},t)),t.j=e}var tj=class{constructor(t,e){this.g=t,this.map=e}};function nb(t){this.l=t||nj,ee.PerformanceNavigationTiming?(t=ee.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ee.g&&ee.g.Ka&&ee.g.Ka()&&ee.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var nj=10;function ib(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function rb(t){return t.h?1:t.g?t.g.size:0}function jg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function By(t,e){t.g?t.g.add(e):t.h=e}function sb(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}nb.prototype.cancel=function(){if(this.i=ob(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function ob(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Ay(t.i)}var ij=class{stringify(t){return ee.JSON.stringify(t,void 0)}parse(t){return ee.JSON.parse(t,void 0)}};function rj(){this.g=new ij}function sj(t,e,n){const i=n||"";try{XI(t,function(r,s){let o=r;cc(r)&&(o=Ly(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function oj(t,e){const n=new bd;if(ee.Image){const i=new Image;i.onload=ou(lu,n,i,"TestLoadImage: loaded",!0,e),i.onerror=ou(lu,n,i,"TestLoadImage: error",!1,e),i.onabort=ou(lu,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=ou(lu,n,i,"TestLoadImage: timeout",!1,e),ee.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function lu(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function Dd(t){this.l=t.ec||null,this.j=t.ob||!1}mt(Dd,Uy);Dd.prototype.g=function(){return new Md(this.l,this.j)};Dd.prototype.i=function(t){return function(){return t}}({});function Md(t,e){gt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Wy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mt(Md,gt);var Wy=0;j=Md.prototype;j.open=function(t,e){if(this.readyState!=Wy)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ul(this)};j.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ee).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};j.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gc(this)),this.readyState=Wy};j.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ul(this)),this.g&&(this.readyState=3,Ul(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ee.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ab(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function ab(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}j.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?gc(this):Ul(this),this.readyState==3&&ab(this)}};j.Za=function(t){this.g&&(this.response=this.responseText=t,gc(this))};j.Ya=function(t){this.g&&(this.response=t,gc(this))};j.ka=function(){this.g&&gc(this)};function gc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ul(t)}j.setRequestHeader=function(t,e){this.v.append(t,e)};j.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};j.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ul(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Md.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var aj=ee.JSON.parse;function Ye(t){gt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=lb,this.L=this.M=!1}mt(Ye,gt);var lb="",lj=/^https?$/i,cj=["POST","PUT"];j=Ye.prototype;j.Oa=function(t){this.M=t};j.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ng.g(),this.C=this.u?d1(this.u):d1(Ng),this.g.onreadystatechange=Lt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){g1(this,s);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const s of i.keys())n.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),r=ee.FormData&&t instanceof ee.FormData,!(0<=SI(cj,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{hb(this),0<this.B&&((this.L=uj(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Lt(this.ua,this)):this.A=jy(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){g1(this,s)}};function uj(t){return Io&&typeof t.timeout=="number"&&t.ontimeout!==void 0}j.ua=function(){typeof Py<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,St(this,"timeout"),this.abort(8))};function g1(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,cb(t),Od(t)}function cb(t){t.F||(t.F=!0,St(t,"complete"),St(t,"error"))}j.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,St(this,"complete"),St(this,"abort"),Od(this))};j.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Od(this,!0)),Ye.$.N.call(this)};j.La=function(){this.s||(this.G||this.v||this.l?ub(this):this.kb())};j.kb=function(){ub(this)};function ub(t){if(t.h&&typeof Py<"u"&&(!t.C[1]||Gn(t)!=4||t.da()!=2)){if(t.v&&Gn(t)==4)jy(t.La,0,t);else if(St(t,"readystatechange"),Gn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=o===0){var r=String(t.I).match(JI)[1]||null;!r&&ee.self&&ee.self.location&&(r=ee.self.location.protocol.slice(0,-1)),i=!lj.test(r?r.toLowerCase():"")}n=i}if(n)St(t,"complete"),St(t,"success");else{t.m=6;try{var s=2<Gn(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",cb(t)}}finally{Od(t)}}}}function Od(t,e){if(t.g){hb(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||St(t,"ready");try{n.onreadystatechange=i}catch{}}}function hb(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ee.clearTimeout(t.A),t.A=null)}j.isActive=function(){return!!this.g};function Gn(t){return t.g?t.g.readyState:0}j.da=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}};j.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};j.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),aj(e)}};function m1(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case lb:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function hj(t){const e={};t=(t.g&&2<=Gn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(Ml(t[i]))continue;var n=L3(t[i]);const r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}A3(e,function(i){return i.join(", ")})}j.Ia=function(){return this.m};j.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function db(t){let e="";return Cy(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function Hy(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=db(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):De(t,e,n))}function ga(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function fb(t){this.Ga=0,this.j=[],this.l=new bd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ga("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ga("baseRetryDelayMs",5e3,t),this.hb=ga("retryDelaySeedMs",1e4,t),this.eb=ga("forwardChannelMaxRetries",2,t),this.xa=ga("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new nb(t&&t.concurrentRequestLimit),this.Ja=new rj,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}j=fb.prototype;j.ra=8;j.H=1;function qy(t){if(pb(t),t.H==3){var e=t.W++,n=Ri(t.I);if(De(n,"SID",t.K),De(n,"RID",e),De(n,"TYPE","terminate"),mc(t,n),e=new fc(t,t.l,e),e.L=2,e.A=Cd(Ri(n)),n=!1,ee.navigator&&ee.navigator.sendBeacon)try{n=ee.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&ee.Image&&(new Image().src=e.A,n=!0),n||(e.g=xb(e.l,null),e.g.ha(e.A)),e.G=Date.now(),pc(e)}wb(t)}function Nd(t){t.g&&(Gy(t),t.g.cancel(),t.g=null)}function pb(t){Nd(t),t.u&&(ee.clearTimeout(t.u),t.u=null),Mh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ee.clearTimeout(t.m),t.m=null)}function Ld(t){if(!ib(t.i)&&!t.m){t.m=!0;var e=t.Na;Nl||LI(),Ll||(Nl(),Ll=!0),Vy.add(e,t),t.C=0}}function dj(t,e){return rb(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=hc(Lt(t.Na,t,e),vb(t,t.C)),t.C++,!0)}j.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new fc(this,this.l,t);let s=this.s;if(this.U&&(s?(s=PI(s),AI(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=gb(this,r,e),n=Ri(this.I),De(n,"RID",t),De(n,"CVER",22),this.F&&De(n,"X-HTTP-Session-Id",this.F),mc(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(db(s)))+"&"+e:this.o&&Hy(n,this.o,s)),By(this.i,r),this.bb&&De(n,"TYPE","init"),this.P?(De(n,"$req",e),De(n,"SID","null"),r.aa=!0,Vg(r,n,null)):Vg(r,n,e),this.H=2}}else this.H==3&&(t?y1(this,t):this.j.length==0||ib(this.i)||y1(this))};function y1(t,e){var n;e?n=e.m:n=t.W++;const i=Ri(t.I);De(i,"SID",t.K),De(i,"RID",n),De(i,"AID",t.V),mc(t,i),t.o&&t.s&&Hy(i,t.o,t.s),n=new fc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=gb(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),By(t.i,n),Vg(n,i,e)}function mc(t,e){t.na&&Cy(t.na,function(n,i){De(e,i,n)}),t.h&&XI({},function(n,i){De(e,i,n)})}function gb(t,e,n){n=Math.min(t.j.length,n);var i=t.h?Lt(t.h.Va,t.h,t):null;e:{var r=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=r[l].g;const u=r[l].map;if(c-=s,0>c)s=Math.max(0,r[l].g-100),a=!1;else try{sj(u,o,"req"+c+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function mb(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Nl||LI(),Ll||(Nl(),Ll=!0),Vy.add(e,t),t.A=0}}function Ky(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=hc(Lt(t.Ma,t),vb(t,t.A)),t.A++,!0)}j.Ma=function(){if(this.u=null,yb(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=hc(Lt(this.jb,this),t)}};j.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Bt(10),Nd(this),yb(this))};function Gy(t){t.B!=null&&(ee.clearTimeout(t.B),t.B=null)}function yb(t){t.g=new fc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ri(t.wa);De(e,"RID","rpc"),De(e,"SID",t.K),De(e,"AID",t.V),De(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&De(e,"TO",t.qa),De(e,"TYPE","xmlhttp"),mc(t,e),t.o&&t.s&&Hy(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Cd(Ri(e)),n.u=null,n.S=!0,KI(n,t)}j.ib=function(){this.v!=null&&(this.v=null,Nd(this),Ky(this),Bt(19))};function Mh(t){t.v!=null&&(ee.clearTimeout(t.v),t.v=null)}function _b(t,e){var n=null;if(t.g==e){Mh(t),Gy(t),t.g=null;var i=2}else if(jg(t.i,e))n=e.F,sb(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;i=kd(),St(i,new $I(i,n)),Ld(t)}else mb(t);else if(r=e.s,r==3||r==0&&0<e.ca||!(i==1&&dj(t,e)||i==2&&Ky(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Jr(t,5);break;case 4:Jr(t,10);break;case 3:Jr(t,6);break;default:Jr(t,2)}}}function vb(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Jr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=Lt(t.pb,t);n||(n=new os("//www.google.com/images/cleardot.gif"),ee.location&&ee.location.protocol=="http"||Ch(n,"https"),Cd(n)),oj(n.toString(),i)}else Bt(2);t.H=0,t.h&&t.h.za(e),wb(t),pb(t)}j.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Bt(2)):(this.l.info("Failed to ping google.com"),Bt(1))};function wb(t){if(t.H=0,t.ma=[],t.h){const e=ob(t.i);(e.length!=0||t.j.length!=0)&&(a1(t.ma,e),a1(t.ma,t.j),t.i.i.length=0,Ay(t.j),t.j.length=0),t.h.ya()}}function Eb(t,e,n){var i=n instanceof os?Ri(n):new os(n);if(i.g!="")e&&(i.g=e+"."+i.g),Dh(i,i.m);else{var r=ee.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new os(null);i&&Ch(s,i),e&&(s.g=e),r&&Dh(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&De(i,n,e),De(i,"VER",t.ra),mc(t,i),i}function xb(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Ye(new Dd({ob:n})):new Ye(t.va),e.Oa(t.J),e}j.isActive=function(){return!!this.h&&this.h.isActive(this)};function Tb(){}j=Tb.prototype;j.Ba=function(){};j.Aa=function(){};j.za=function(){};j.ya=function(){};j.isActive=function(){return!0};j.Va=function(){};function Oh(){if(Io&&!(10<=Number(I3)))throw Error("Environmental error: no available transport.")}Oh.prototype.g=function(t,e){return new cn(t,e)};function cn(t,e){gt.call(this),this.g=new fb(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ml(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ml(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new $o(this)}mt(cn,gt);cn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Bt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Eb(t,null,t.Y),Ld(t)};cn.prototype.close=function(){qy(this.g)};cn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ly(t),t=n);e.j.push(new tj(e.fb++,t)),e.H==3&&Ld(e)};cn.prototype.N=function(){this.g.h=null,delete this.j,qy(this.g),delete this.g,cn.$.N.call(this)};function Sb(t){zy.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}mt(Sb,zy);function Ib(){$y.call(this),this.status=1}mt(Ib,$y);function $o(t){this.g=t}mt($o,Tb);$o.prototype.Ba=function(){St(this.g,"a")};$o.prototype.Aa=function(t){St(this.g,new Sb(t))};$o.prototype.za=function(t){St(this.g,new Ib)};$o.prototype.ya=function(){St(this.g,"b")};function fj(){this.blockSize=-1}function Fn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}mt(Fn,fj);Fn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function ip(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}Fn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=n;)ip(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){ip(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){ip(this,i),r=0;break}}this.h=r,this.i+=e};Fn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function Se(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=t[r]|0;i&&s==e||(n[r]=s,i=!1)}this.g=n}var pj={};function Qy(t){return-128<=t&&128>t?x3(t,function(e){return new Se([e|0],0>e?-1:0)}):new Se([t|0],0>t?-1:0)}function Qn(t){if(isNaN(t)||!isFinite(t))return lo;if(0>t)return Et(Qn(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Ug;return new Se(e,0)}function bb(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Et(bb(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Qn(Math.pow(e,8)),i=lo,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+s),e);8>s?(s=Qn(Math.pow(e,s)),i=i.R(s).add(Qn(o))):(i=i.R(n),i=i.add(Qn(o)))}return i}var Ug=4294967296,lo=Qy(0),zg=Qy(1),_1=Qy(16777216);j=Se.prototype;j.ea=function(){if(yn(this))return-Et(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Ug+i)*e,e*=Ug}return t};j.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Ei(this))return"0";if(yn(this))return"-"+Et(this).toString(t);for(var e=Qn(Math.pow(t,6)),n=this,i="";;){var r=Lh(n,e).g;n=Nh(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,Ei(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};j.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Ei(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function yn(t){return t.h==-1}j.X=function(t){return t=Nh(this,t),yn(t)?-1:Ei(t)?0:1};function Et(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Se(n,~t.h).add(zg)}j.abs=function(){return yn(this)?Et(this):this};j.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(t.D(r)&65535),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new Se(n,n[n.length-1]&-2147483648?-1:0)};function Nh(t,e){return t.add(Et(e))}j.R=function(t){if(Ei(this)||Ei(t))return lo;if(yn(this))return yn(t)?Et(this).R(Et(t)):Et(Et(this).R(t));if(yn(t))return Et(this.R(Et(t)));if(0>this.X(_1)&&0>t.X(_1))return Qn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=this.D(i)&65535,a=t.D(r)>>>16,l=t.D(r)&65535;n[2*i+2*r]+=o*l,cu(n,2*i+2*r),n[2*i+2*r+1]+=s*l,cu(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,cu(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,cu(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Se(n,0)};function cu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ma(t,e){this.g=t,this.h=e}function Lh(t,e){if(Ei(e))throw Error("division by zero");if(Ei(t))return new ma(lo,lo);if(yn(t))return e=Lh(Et(t),e),new ma(Et(e.g),Et(e.h));if(yn(e))return e=Lh(t,Et(e)),new ma(Et(e.g),e.h);if(30<t.g.length){if(yn(t)||yn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=zg,i=e;0>=i.X(t);)n=v1(n),i=v1(i);var r=Os(n,1),s=Os(i,1);for(i=Os(i,2),n=Os(n,2);!Ei(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=Os(i,1),n=Os(n,1)}return e=Nh(t,r.R(e)),new ma(r,e)}for(r=lo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=Qn(n),o=s.R(e);yn(o)||0<o.X(t);)n-=i,s=Qn(n),o=s.R(e);Ei(s)&&(s=zg),r=r.add(s),t=Nh(t,o)}return new ma(r,t)}j.gb=function(t){return Lh(this,t).h};j.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Se(n,this.h&t.h)};j.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Se(n,this.h|t.h)};j.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Se(n,this.h^t.h)};function v1(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Se(n,t.h)}function Os(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Se(r,t.h)}Oh.prototype.createWebChannel=Oh.prototype.g;cn.prototype.send=cn.prototype.u;cn.prototype.open=cn.prototype.m;cn.prototype.close=cn.prototype.close;Pd.NO_ERROR=0;Pd.TIMEOUT=8;Pd.HTTP_ERROR=6;BI.COMPLETE="complete";WI.EventType=dc;dc.OPEN="a";dc.CLOSE="b";dc.ERROR="c";dc.MESSAGE="d";gt.prototype.listen=gt.prototype.O;Ye.prototype.listenOnce=Ye.prototype.P;Ye.prototype.getLastError=Ye.prototype.Sa;Ye.prototype.getLastErrorCode=Ye.prototype.Ia;Ye.prototype.getStatus=Ye.prototype.da;Ye.prototype.getResponseJson=Ye.prototype.Wa;Ye.prototype.getResponseText=Ye.prototype.ja;Ye.prototype.send=Ye.prototype.ha;Ye.prototype.setWithCredentials=Ye.prototype.Oa;Fn.prototype.digest=Fn.prototype.l;Fn.prototype.reset=Fn.prototype.reset;Fn.prototype.update=Fn.prototype.j;Se.prototype.add=Se.prototype.add;Se.prototype.multiply=Se.prototype.R;Se.prototype.modulo=Se.prototype.gb;Se.prototype.compare=Se.prototype.X;Se.prototype.toNumber=Se.prototype.ea;Se.prototype.toString=Se.prototype.toString;Se.prototype.getBits=Se.prototype.D;Se.fromNumber=Qn;Se.fromString=bb;var gj=function(){return new Oh},mj=function(){return kd()},rp=Pd,yj=BI,_j=Is,w1={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},uu=WI,vj=Ye,wj=Fn,co=Se;const E1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo="10.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new Xm("@firebase/firestore");function ya(){return vs.logLevel}function F(t,...e){if(vs.logLevel<=ge.DEBUG){const n=e.map(Yy);vs.debug(`Firestore (${Bo}): ${t}`,...n)}}function ri(t,...e){if(vs.logLevel<=ge.ERROR){const n=e.map(Yy);vs.error(`Firestore (${Bo}): ${t}`,...n)}}function bo(t,...e){if(vs.logLevel<=ge.WARN){const n=e.map(Yy);vs.warn(`Firestore (${Bo}): ${t}`,...n)}}function Yy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${Bo}) INTERNAL ASSERTION FAILED: `+t;throw ri(e),new Error(e)}function Ae(t,e){t||Z()}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Oi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ej{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}}class xj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Tj{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Si;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Si,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Si)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ae(typeof i.accessToken=="string"),new kb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new Dt(e)}}class Sj{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ij{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new Sj(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kj{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const i=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string"),this.R=n.token,new bj(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=Pj(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function Ee(t,e){return t<e?-1:t>e?1:0}function ko(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new lt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new lt(0,0))}static max(){return new te(new lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n,i){n===void 0?n=0:n>e.length&&Z(),i===void 0?i=e.length-n:i>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return zl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Me extends zl{construct(e,n,i){return new Me(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new $(C.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Me(n)}static emptyPath(){return new Me([])}}const Aj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xt extends zl{construct(e,n,i){return new xt(e,n,i)}static isValidIdentifier(e){return Aj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new xt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new $(C.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new $(C.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new $(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new $(C.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xt(n)}static emptyPath(){return new xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(Me.fromString(e))}static fromName(e){return new q(Me.fromString(e).popFirst(5))}static empty(){return new q(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new Me(e.slice()))}}function Rj(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=te.fromTimestamp(i===1e9?new lt(n+1,0):new lt(n,i));return new wr(r,q.empty(),e)}function Cj(t){return new wr(t.readTime,t.key,-1)}class wr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new wr(te.min(),q.empty(),-1)}static max(){return new wr(te.max(),q.empty(),-1)}}function Dj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Oj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yc(t){if(t.code!==C.FAILED_PRECONDITION||t.message!==Mj)throw t;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new D((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof D?n:D.resolve(n)}catch(n){return D.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):D.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):D.reject(n)}static resolve(e){return new D((n,i)=>{n(e)})}static reject(e){return new D((n,i)=>{i(e)})}static waitFor(e){return new D((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=D.resolve(!1);for(const i of e)n=n.next(r=>r?D.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new D((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,n){return new D((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Si,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Xa(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=Jy(i.target.error);this.V.reject(new Xa(e,r))}}static open(e,n,i,r){try{return new Xy(n,e.transaction(r,i))}catch(s){throw new Xa(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(F("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Lj(n)}}class Zr{constructor(e,n,i){this.name=e,this.version=n,this.p=i,Zr.S(rt())===12.2&&ri("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return F("SimpleDb","Removing database:",e),Br(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!BT())return!1;if(Zr.C())return!0;const e=rt(),n=Zr.S(e),i=0<n&&n<10,r=Zr.v(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(e){const n=e.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}async O(e){return this.db||(F("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{const o=s.target.result;n(o)},r.onblocked=()=>{i(new Xa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{const o=s.target.error;o.name==="VersionError"?i(new $(C.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new $(C.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new Xa(e,o))},r.onupgradeneeded=s=>{F("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.N(o,r.transaction,s.oldVersion,this.version).next(()=>{F("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,r){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=Xy.open(this.db,e,s?"readonly":"readwrite",i),l=r(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),D.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(F("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Nj{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Br(this.k.delete())}}class Xa extends ${constructor(e,n){super(C.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function _c(t){return t.name==="IndexedDbTransactionError"}class Lj{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(F("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(F("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Br(i)}add(e){return F("SimpleDb","ADD",this.store.name,e,e),Br(this.store.add(e))}get(e){return Br(this.store.get(e)).next(n=>(n===void 0&&(n=null),F("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return F("SimpleDb","DELETE",this.store.name,e),Br(this.store.delete(e))}count(){return F("SimpleDb","COUNT",this.store.name),Br(this.store.count())}W(e,n){const i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const s=r.getAll(i.range);return new D((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(i),o=[];return this.G(s,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new D((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}H(e,n){F("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,n);i.J=!1;const r=this.cursor(i);return this.G(r,(s,o,a)=>a.delete())}Y(e,n){let i;n?i=e:(i={},n=e);const r=this.cursor(i);return this.G(r,n)}Z(e){const n=this.cursor({});return new D((i,r)=>{n.onerror=s=>{const o=Jy(s.target.error);r(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}G(e,n){const i=[];return new D((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const l=new Nj(a),c=n(a.primaryKey,a.value,l);if(c instanceof D){const u=c.catch(h=>(l.done(),D.reject(h)));i.push(u)}l.isDone?r():l.$===null?a.continue():a.continue(l.$)}}).next(()=>D.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.J?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Br(t){return new D((e,n)=>{t.onsuccess=i=>{const r=i.target.result;e(r)},t.onerror=i=>{const r=Jy(i.target.error);n(r)}})}let x1=!1;function Jy(t){const e=Zr.S(rt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new $("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return x1||(x1=!0,setTimeout(()=>{throw i},0)),i}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.se(i),this.oe=i=>n.writeSequenceNumber(i))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}Zy._e=-1;function Vd(t){return t==null}function Vh(t){return t===0&&1/t==-1/0}function Vj(t){return typeof t=="number"&&Number.isInteger(t)&&!Vh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ab(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new We(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hu(this.root,e,this.comparator,!1)}getReverseIterator(){return new hu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hu(this.root,e,this.comparator,!0)}}class hu{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??wt.RED,this.left=r??wt.EMPTY,this.right=s??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new wt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return wt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,i,r,s){return this}insert(e,n,i){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new S1(this.data.getIterator())}getIteratorFrom(e){return new S1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class S1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new Dn([])}unionWith(e){let n=new It(xt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ko(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Rb("Invalid base64 string: "+s):s}}(e);return new zt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const Fj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(t){if(Ae(!!t),typeof t=="string"){let e=0;const n=Fj.exec(t);if(Ae(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ws(t){return typeof t=="string"?zt.fromBase64String(t):zt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function t_(t){const e=t.mapValue.fields.__previous_value__;return e_(e)?t_(e):e}function $l(t){const e=Er(t.mapValue.fields.__local_write_time__.timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n,i,r,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Bl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Bl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Bl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?e_(t)?4:Uj(t)?9007199254740991:10:Z()}function si(t,e){if(t===e)return!0;const n=Es(t);if(n!==Es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $l(t).isEqual($l(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Er(r.timestampValue),a=Er(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return ws(r.bytesValue).isEqual(ws(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return tt(r.geoPointValue.latitude)===tt(s.geoPointValue.latitude)&&tt(r.geoPointValue.longitude)===tt(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return tt(r.integerValue)===tt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=tt(r.doubleValue),a=tt(s.doubleValue);return o===a?Vh(o)===Vh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ko(t.arrayValue.values||[],e.arrayValue.values||[],si);case 10:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(T1(o)!==T1(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!si(o[l],a[l])))return!1;return!0}(t,e);default:return Z()}}function Wl(t,e){return(t.values||[]).find(n=>si(n,e))!==void 0}function Po(t,e){if(t===e)return 0;const n=Es(t),i=Es(e);if(n!==i)return Ee(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=tt(s.integerValue||s.doubleValue),l=tt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return I1(t.timestampValue,e.timestampValue);case 4:return I1($l(t),$l(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ws(s),l=ws(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Ee(a[c],l[c]);if(u!==0)return u}return Ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ee(tt(s.latitude),tt(o.latitude));return a!==0?a:Ee(tt(s.longitude),tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=Po(a[c],l[c]);if(u)return u}return Ee(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===du.mapValue&&o===du.mapValue)return 0;if(s===du.mapValue)return 1;if(o===du.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const d=Ee(l[h],u[h]);if(d!==0)return d;const f=Po(a[l[h]],c[u[h]]);if(f!==0)return f}return Ee(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Z()}}function I1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=Er(t),i=Er(e),r=Ee(n.seconds,i.seconds);return r!==0?r:Ee(n.nanos,i.nanos)}function Ao(t){return $g(t)}function $g(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Er(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ws(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=$g(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${$g(n.fields[o])}`;return r+"}"}(t.mapValue):Z()}function b1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Bg(t){return!!t&&"integerValue"in t}function n_(t){return!!t&&"arrayValue"in t}function k1(t){return!!t&&"nullValue"in t}function P1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Uu(t){return!!t&&"mapValue"in t}function Ja(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Wo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Ja(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ja(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Uj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Uu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ja(n)}setAll(e){let n=xt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=Ja(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Uu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return si(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Uu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Wo(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new _n(Ja(this.value))}}function Cb(t){const e=[];return Wo(t.fields,(n,i)=>{const r=new xt([n]);if(Uu(i)){const s=Cb(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ot(e,0,te.min(),te.min(),te.min(),_n.empty(),0)}static newFoundDocument(e,n,i,r){return new Ot(e,1,n,te.min(),i,r,0)}static newNoDocument(e,n){return new Ot(e,2,n,te.min(),te.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new Ot(e,3,n,te.min(),te.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n){this.position=e,this.inclusive=n}}function A1(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=q.comparator(q.fromName(o.referenceValue),n.key):i=Po(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function R1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!si(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n="asc"){this.field=e,this.dir=n}}function zj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{}class it extends Db{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Bj(e,n,i):n==="array-contains"?new qj(e,i):n==="in"?new Kj(e,i):n==="not-in"?new Gj(e,i):n==="array-contains-any"?new Qj(e,i):new it(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new Wj(e,i):new Hj(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Po(n,this.value)):n!==null&&Es(this.value)===Es(n)&&this.matchesComparison(Po(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jn extends Db{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new jn(e,n)}matches(e){return Mb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Mb(t){return t.op==="and"}function Ob(t){return $j(t)&&Mb(t)}function $j(t){for(const e of t.filters)if(e instanceof jn)return!1;return!0}function Wg(t){if(t instanceof it)return t.field.canonicalString()+t.op.toString()+Ao(t.value);if(Ob(t))return t.filters.map(e=>Wg(e)).join(",");{const e=t.filters.map(n=>Wg(n)).join(",");return`${t.op}(${e})`}}function Nb(t,e){return t instanceof it?function(i,r){return r instanceof it&&i.op===r.op&&i.field.isEqual(r.field)&&si(i.value,r.value)}(t,e):t instanceof jn?function(i,r){return r instanceof jn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&Nb(o,r.filters[a]),!0):!1}(t,e):void Z()}function Lb(t){return t instanceof it?function(n){return`${n.field.canonicalString()} ${n.op} ${Ao(n.value)}`}(t):t instanceof jn?function(n){return n.op.toString()+" {"+n.getFilters().map(Lb).join(" ,")+"}"}(t):"Filter"}class Bj extends it{constructor(e,n,i){super(e,n,i),this.key=q.fromName(i.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class Wj extends it{constructor(e,n){super(e,"in",n),this.keys=Vb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Hj extends it{constructor(e,n){super(e,"not-in",n),this.keys=Vb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Vb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>q.fromName(i.referenceValue))}class qj extends it{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return n_(n)&&Wl(n.arrayValue,this.value)}}class Kj extends it{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wl(this.value.arrayValue,n)}}class Gj extends it{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Wl(this.value.arrayValue,n)}}class Qj extends it{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!n_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Wl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function C1(t,e=null,n=[],i=[],r=null,s=null,o=null){return new Yj(t,e,n,i,r,s,o)}function i_(t){const e=re(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Wg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Vd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ao(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ao(i)).join(",")),e.ce=n}return e.ce}function r_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Nb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!R1(t.startAt,e.startAt)&&R1(t.endAt,e.endAt)}function Hg(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Xj(t,e,n,i,r,s,o,a){return new vc(t,e,n,i,r,s,o,a)}function Fb(t){return new vc(t)}function D1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jb(t){return t.collectionGroup!==null}function Za(t){const e=re(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new It(xt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new jh(s,i))}),n.has(xt.keyField().canonicalString())||e.le.push(new jh(xt.keyField(),i))}return e.le}function ti(t){const e=re(t);return e.he||(e.he=Jj(e,Za(t))),e.he}function Jj(t,e){if(t.limitType==="F")return C1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new jh(r.field,s)});const n=t.endAt?new Fh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Fh(t.startAt.position,t.startAt.inclusive):null;return C1(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function qg(t,e){const n=t.filters.concat([e]);return new vc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Kg(t,e,n){return new vc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fd(t,e){return r_(ti(t),ti(e))&&t.limitType===e.limitType}function Ub(t){return`${i_(ti(t))}|lt:${t.limitType}`}function Ns(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>Lb(r)).join(", ")}]`),Vd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ao(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ao(r)).join(",")),`Target(${i})`}(ti(t))}; limitType=${t.limitType})`}function jd(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):q.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Za(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=A1(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,Za(i),r)||i.endAt&&!function(o,a,l){const c=A1(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,Za(i),r))}(t,e)}function Zj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zb(t){return(e,n)=>{let i=!1;for(const r of Za(t)){const s=e5(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function e5(t,e,n){const i=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Po(l,c):Z()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Wo(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return Ab(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5=new We(q.comparator);function Ci(){return t5}const $b=new We(q.comparator);function Da(...t){let e=$b;for(const n of t)e=e.insert(n.key,n);return e}function Bb(t){let e=$b;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function es(){return el()}function Wb(){return el()}function el(){return new Ho(t=>t.toString(),(t,e)=>t.isEqual(e))}const n5=new We(q.comparator),i5=new It(q.comparator);function ue(...t){let e=i5;for(const n of t)e=e.add(n);return e}const r5=new It(Ee);function s5(){return r5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vh(e)?"-0":e}}function qb(t){return{integerValue:""+t}}function o5(t,e){return Vj(e)?qb(e):Hb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(){this._=void 0}}function a5(t,e,n){return t instanceof Uh?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&e_(s)&&(s=t_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Hl?Gb(t,e):t instanceof ql?Qb(t,e):function(r,s){const o=Kb(r,s),a=M1(o)+M1(r.Ie);return Bg(o)&&Bg(r.Ie)?qb(a):Hb(r.serializer,a)}(t,e)}function l5(t,e,n){return t instanceof Hl?Gb(t,e):t instanceof ql?Qb(t,e):n}function Kb(t,e){return t instanceof zh?function(i){return Bg(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Uh extends Ud{}class Hl extends Ud{constructor(e){super(),this.elements=e}}function Gb(t,e){const n=Yb(e);for(const i of t.elements)n.some(r=>si(r,i))||n.push(i);return{arrayValue:{values:n}}}class ql extends Ud{constructor(e){super(),this.elements=e}}function Qb(t,e){let n=Yb(e);for(const i of t.elements)n=n.filter(r=>!si(r,i));return{arrayValue:{values:n}}}class zh extends Ud{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function M1(t){return tt(t.integerValue||t.doubleValue)}function Yb(t){return n_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function c5(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Hl&&r instanceof Hl||i instanceof ql&&r instanceof ql?ko(i.elements,r.elements,si):i instanceof zh&&r instanceof zh?si(i.Ie,r.Ie):i instanceof Uh&&r instanceof Uh}(t.transform,e.transform)}class u5{constructor(e,n){this.version=e,this.transformResults=n}}class ni{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ni}static exists(e){return new ni(void 0,e)}static updateTime(e){return new ni(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zd{}function Xb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zb(t.key,ni.none()):new wc(t.key,t.data,ni.none());{const n=t.data,i=_n.empty();let r=new It(xt.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new bs(t.key,i,new Dn(r.toArray()),ni.none())}}function h5(t,e,n){t instanceof wc?function(r,s,o){const a=r.value.clone(),l=N1(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof bs?function(r,s,o){if(!zu(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=N1(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Jb(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function tl(t,e,n,i){return t instanceof wc?function(s,o,a,l){if(!zu(s.precondition,o))return a;const c=s.value.clone(),u=L1(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof bs?function(s,o,a,l){if(!zu(s.precondition,o))return a;const c=L1(s.fieldTransforms,l,o),u=o.data;return u.setAll(Jb(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,i):function(s,o,a){return zu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function d5(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=Kb(i.transform,r||null);s!=null&&(n===null&&(n=_n.empty()),n.set(i.field,s))}return n||null}function O1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ko(i,r,(s,o)=>c5(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wc extends zd{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class bs extends zd{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Jb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function N1(t,e,n){const i=new Map;Ae(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,l5(o,a,n[r]))}return i}function L1(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,a5(s,o,e))}return i}class Zb extends zd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class f5 extends zd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&h5(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=tl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=tl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Wb();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=Xb(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(te.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&ko(this.mutations,e.mutations,(n,i)=>O1(n,i))&&ko(this.baseMutations,e.baseMutations,(n,i)=>O1(n,i))}}class s_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ae(e.mutations.length===i.length);let r=function(){return n5}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new s_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,me;function y5(t){switch(t){default:return Z();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0}}function ek(t){if(t===void 0)return ri("GRPC error has no .code"),C.UNKNOWN;switch(t){case et.OK:return C.OK;case et.CANCELLED:return C.CANCELLED;case et.UNKNOWN:return C.UNKNOWN;case et.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case et.INTERNAL:return C.INTERNAL;case et.UNAVAILABLE:return C.UNAVAILABLE;case et.UNAUTHENTICATED:return C.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case et.NOT_FOUND:return C.NOT_FOUND;case et.ALREADY_EXISTS:return C.ALREADY_EXISTS;case et.PERMISSION_DENIED:return C.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case et.ABORTED:return C.ABORTED;case et.OUT_OF_RANGE:return C.OUT_OF_RANGE;case et.UNIMPLEMENTED:return C.UNIMPLEMENTED;case et.DATA_LOSS:return C.DATA_LOSS;default:return Z()}}(me=et||(et={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5=new co([4294967295,4294967295],0);function V1(t){const e=_5().encode(t),n=new wj;return n.update(e),new Uint8Array(n.digest())}function F1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new co([n,i],0),new co([r,s],0)]}class o_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ma(`Invalid padding: ${n}`);if(i<0)throw new Ma(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ma(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Ma(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=co.fromNumber(this.Te)}de(e,n,i){let r=e.add(n.multiply(co.fromNumber(i)));return r.compare(v5)===1&&(r=new co([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=V1(e),[i,r]=F1(n);for(let s=0;s<this.hashCount;s++){const o=this.de(i,r,s);if(!this.Ae(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new o_(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=V1(e),[i,r]=F1(n);for(let s=0;s<this.hashCount;s++){const o=this.de(i,r,s);this.Re(o)}}Re(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Ma extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Ec.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new $d(te.min(),r,new We(Ee),Ci(),ue())}}class Ec{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ec(i,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n,i,r){this.Ve=e,this.removedTargetIds=n,this.key=i,this.me=r}}class tk{constructor(e,n){this.targetId=e,this.fe=n}}class nk{constructor(e,n,i=zt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class j1{constructor(){this.ge=0,this.pe=z1(),this.ye=zt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ue(),n=ue(),i=ue();return this.pe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Z()}}),new Ec(this.ye,this.we,e,n,i)}Fe(){this.Se=!1,this.pe=z1()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ae(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class w5{constructor(e){this.Le=e,this.ke=new Map,this.qe=Ci(),this.Qe=U1(),this.Ke=new We(Ee)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const i=this.ze(n);switch(e.state){case 0:this.je(n)&&i.Ce(e.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(e.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(n);break;case 3:this.je(n)&&(i.Be(),i.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),i.Ce(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((i,r)=>{this.je(r)&&n(r)})}Je(e){const n=e.targetId,i=e.fe.count,r=this.Ye(n);if(r){const s=r.target;if(Hg(s))if(i===0){const o=new q(s.path);this.We(n,o,Ot.newNoDocument(o,te.min()))}else Ae(i===1);else{const o=this.Ze(n);if(o!==i){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=ws(i).toUint8Array()}catch(l){if(l instanceof Rb)return bo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new o_(o,r,s)}catch(l){return bo(l instanceof Ma?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,i){return n.fe.count===i-this.rt(e,n.targetId)?0:2}rt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),r++)}),r}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Hg(a.target)){const l=new q(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Ot.newNoDocument(l,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let i=ue();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const r=new $d(e,n,this.Ke,this.qe,i);return this.qe=Ci(),this.Qe=U1(),this.Ke=new We(Ee),r}Ue(e,n){if(!this.je(e))return;const i=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,i),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,i){if(!this.je(e))return;const r=this.ze(e);this.st(e,n)?r.Me(n,1):r.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),i&&(this.qe=this.qe.insert(n,i))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new j1,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new It(Ee),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new j1),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function U1(){return new We(q.comparator)}function z1(){return new We(q.comparator)}const E5={asc:"ASCENDING",desc:"DESCENDING"},x5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},T5={and:"AND",or:"OR"};class S5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Gg(t,e){return t.useProto3Json||Vd(e)?e:{value:e}}function $h(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ik(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function I5(t,e){return $h(t,e.toTimestamp())}function ii(t){return Ae(!!t),te.fromTimestamp(function(n){const i=Er(n);return new lt(i.seconds,i.nanos)}(t))}function a_(t,e){return Qg(t,e).canonicalString()}function Qg(t,e){const n=function(r){return new Me(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function rk(t){const e=Me.fromString(t);return Ae(ck(e)),e}function Yg(t,e){return a_(t.databaseId,e.path)}function sp(t,e){const n=rk(e);if(n.get(1)!==t.databaseId.projectId)throw new $(C.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(C.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(ok(n))}function sk(t,e){return a_(t.databaseId,e)}function b5(t){const e=rk(t);return e.length===4?Me.emptyPath():ok(e)}function Xg(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ok(t){return Ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function $1(t,e,n){return{name:Yg(t,e),fields:n.value.mapValue.fields}}function k5(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Ae(u===void 0||typeof u=="string"),zt.fromBase64String(u||"")):(Ae(u===void 0||u instanceof Uint8Array),zt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?C.UNKNOWN:ek(c.code);return new $(u,c.message||"")}(o);n=new nk(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=sp(t,i.document.name),s=ii(i.document.updateTime),o=i.document.createTime?ii(i.document.createTime):te.min(),a=new _n({mapValue:{fields:i.document.fields}}),l=Ot.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new $u(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=sp(t,i.document),s=i.readTime?ii(i.readTime):te.min(),o=Ot.newNoDocument(r,s),a=i.removedTargetIds||[];n=new $u([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=sp(t,i.document),s=i.removedTargetIds||[];n=new $u([],s,r,null)}else{if(!("filter"in e))return Z();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new m5(r,s),a=i.targetId;n=new tk(a,o)}}return n}function P5(t,e){let n;if(e instanceof wc)n={update:$1(t,e.key,e.value)};else if(e instanceof Zb)n={delete:Yg(t,e.key)};else if(e instanceof bs)n={update:$1(t,e.key,e.data),updateMask:V5(e.fieldMask)};else{if(!(e instanceof f5))return Z();n={verify:Yg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof Uh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Hl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ql)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof zh)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Z()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:I5(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z()}(t,e.precondition)),n}function A5(t,e){return t&&t.length>0?(Ae(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?ii(r.updateTime):ii(s);return o.isEqual(te.min())&&(o=ii(s)),new u5(o,r.transformResults||[])}(n,e))):[]}function R5(t,e){return{documents:[sk(t,e.path)]}}function C5(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=sk(t,r);const s=function(c){if(c.length!==0)return lk(jn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:Ls(d.field),direction:O5(d.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Gg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:r}}function D5(t){let e=b5(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ae(i===1);const u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(h){const d=ak(h);return d instanceof jn&&Ob(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new jh(Vs(p.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,Vd(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new Fh(f,d)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const d=!h.before,f=h.values||[];return new Fh(f,d)}(n.endAt)),Xj(e,r,o,s,a,"F",l,c)}function M5(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ak(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Vs(n.unaryFilter.field);return it.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Vs(n.unaryFilter.field);return it.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Vs(n.unaryFilter.field);return it.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vs(n.unaryFilter.field);return it.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return it.create(Vs(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return jn.create(n.compositeFilter.filters.map(i=>ak(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function O5(t){return E5[t]}function N5(t){return x5[t]}function L5(t){return T5[t]}function Ls(t){return{fieldPath:t.canonicalString()}}function Vs(t){return xt.fromServerFormat(t.fieldPath)}function lk(t){return t instanceof it?function(n){if(n.op==="=="){if(P1(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NAN"}};if(k1(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(P1(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NOT_NAN"}};if(k1(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ls(n.field),op:N5(n.op),value:n.value}}}(t):t instanceof jn?function(n){const i=n.getFilters().map(r=>lk(r));return i.length===1?i[0]:{compositeFilter:{op:L5(n.op),filters:i}}}(t):Z()}function V5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ck(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,n,i,r,s=te.min(),o=te.min(),a=zt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e){this.ct=e}}function j5(t){const e=D5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Kg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(){this._n=new z5}addToCollectionParentIndex(e,n){return this._n.add(n),D.resolve()}getCollectionParents(e,n){return D.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return D.resolve()}deleteFieldIndex(e,n){return D.resolve()}deleteAllFieldIndexes(e){return D.resolve()}createTargetIndexes(e,n){return D.resolve()}getDocumentsMatchingTarget(e,n){return D.resolve(null)}getIndexType(e,n){return D.resolve(0)}getFieldIndexes(e,n){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,n){return D.resolve(wr.min())}getMinOffsetFromCollectionGroup(e,n){return D.resolve(wr.min())}updateCollectionGroup(e,n,i){return D.resolve()}updateIndexEntries(e,n){return D.resolve()}}class z5{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new It(Me.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new It(Me.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Ro(0)}static Bn(){return new Ro(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(){this.changes=new Ho(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?D.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&tl(i.mutation,r,Dn.empty(),lt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ue()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ue()){const r=es();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=Da();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=es();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ue()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=Ci();const o=el(),a=function(){return el()}();return n.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof bs)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),tl(u.mutation,c,u.mutation.getFieldMask(),lt.now())):o.set(c.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new B5(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const i=el();let r=new We((o,a)=>o-a),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=i.get(l)||Dn.empty();u=a.applyToLocalView(c,u),i.set(l,u);const h=(r.get(a.batchId)||ue()).add(l);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=Wb();u.forEach(d=>{if(!s.has(d)){const f=Xb(n.get(d),i.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return D.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):D.resolve(es());let a=-1,l=s;return o.next(c=>D.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?D.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ue())).next(u=>({batchId:a,changes:Bb(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(i=>{let r=Da();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=Da();return this.indexManager.getCollectionParents(e,s).next(a=>D.forEach(a,l=>{const c=function(h,d){return new vc(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Ot.newInvalidDocument(u)))});let a=Da();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&tl(u.mutation,c,Dn.empty(),lt.now()),jd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return D.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ii(r.createTime)}}(n)),D.resolve()}getNamedQuery(e,n){return D.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:j5(r.bundledQuery),readTime:ii(r.readTime)}}(n)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(){this.overlays=new We(q.comparator),this.hr=new Map}getOverlay(e,n){return D.resolve(this.overlays.get(n))}getOverlays(e,n){const i=es();return D.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),D.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.hr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(i)),D.resolve()}getOverlaysForCollection(e,n,i){const r=es(),s=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return D.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new We((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=s.get(c.largestBatchId);u===null&&(u=es(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=es(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return D.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new g5(n,i));let s=this.hr.get(n);s===void 0&&(s=ue(),this.hr.set(n,s)),this.hr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(){this.Pr=new It(ht.Ir),this.Tr=new It(ht.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const i=new ht(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new ht(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){const n=new q(new Me([])),i=new ht(n,e),r=new ht(n,e+1),s=[];return this.Tr.forEachInRange([i,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new q(new Me([])),i=new ht(n,e),r=new ht(n,e+1);let s=ue();return this.Tr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ht(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class ht{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return q.comparator(e.key,n.key)||Ee(e.pr,n.pr)}static Er(e,n){return Ee(e.pr,n.pr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new It(ht.Ir)}checkEmpty(e){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new p5(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.wr=this.wr.add(new ht(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return D.resolve(o)}lookupMutationBatch(e,n){return D.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.br(i),s=r<0?0:r;return D.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new ht(n,0),r=new ht(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([i,r],o=>{const a=this.Sr(o.pr);s.push(a)}),D.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new It(Ee);return n.forEach(r=>{const s=new ht(r,0),o=new ht(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{i=i.add(a.pr)})}),D.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;q.isDocumentKey(s)||(s=s.child(""));const o=new ht(new q(s),0);let a=new It(Ee);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.pr)),!0)},o),D.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(i=>{const r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ae(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return D.forEach(n.mutations,r=>{const s=new ht(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){const i=new ht(n,0),r=this.wr.firstAfterOrEqual(i);return D.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,D.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e){this.vr=e,this.docs=function(){return new We(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return D.resolve(i?i.document.mutableCopy():Ot.newInvalidDocument(n))}getEntries(e,n){let i=Ci();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ot.newInvalidDocument(r))}),D.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Ci();const o=n.path,a=new q(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Dj(Cj(u),i)<=0||(r.has(u.key)||jd(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return D.resolve(s)}getAllFromCollectionGroup(e,n,i,r){Z()}Fr(e,n){return D.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Q5(this)}getSize(e){return D.resolve(this.size)}}class Q5 extends $5{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),D.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e){this.persistence=e,this.Mr=new Ho(n=>i_(n),r_),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Or=0,this.Nr=new l_,this.targetCount=0,this.Br=Ro.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),D.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Ro(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,D.resolve()}updateTargetData(e,n){return this.qn(n),D.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),D.waitFor(s).next(()=>r)}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,n){const i=this.Mr.get(n)||null;return D.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),D.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),D.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),D.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Nr.gr(n);return D.resolve(i)}containsKey(e,n){return D.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,n){this.Lr={},this.overlays={},this.kr=new Zy(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Y5(this),this.indexManager=new U5,this.remoteDocumentCache=function(r){return new G5(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new F5(n),this.$r=new H5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new q5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Lr[e.toKey()];return i||(i=new K5(n,this.referenceDelegate),this.Lr[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){F("MemoryPersistence","Starting transaction:",e);const r=new J5(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(e,n){return D.or(Object.values(this.Lr).map(i=>()=>i.containsKey(e,n)))}}class J5 extends Oj{constructor(e){super(),this.currentSequenceNumber=e}}class c_{constructor(e){this.persistence=e,this.zr=new l_,this.jr=null}static Hr(e){return new c_(e)}get Jr(){if(this.jr)return this.jr;throw Z()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),D.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),D.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),D.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.Jr,i=>{const r=q.fromPath(i);return this.Yr(e,r).next(s=>{s||n.removeEntry(r,te.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return D.or([()=>D.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=ue(),r=ue();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new u_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return A2()?8:Zr.v(rt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Z5;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(ya()<=ge.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",Ns(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),D.resolve()):(ya()<=ge.DEBUG&&F("QueryEngine","Query:",Ns(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(ya()<=ge.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",Ns(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(n))):D.resolve())}ji(e,n){if(D1(n))return D.resolve(null);let i=ti(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Kg(n,null,"F"),i=ti(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=ue(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,Kg(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,i,r){return D1(n)||r.isEqual(te.min())?D.resolve(null):this.zi.getDocuments(e,i).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,i,r)?D.resolve(null):(ya()<=ge.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ns(n)),this.es(e,o,n,Rj(r,-1)).next(a=>a))})}Zi(e,n){let i=new It(zb(e));return n.forEach((r,s)=>{jd(e,s)&&(i=i.add(s))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(e,n,i){return ya()<=ge.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Ns(n)),this.zi.getDocumentsMatchingQuery(e,n,wr.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new We(Ee),this.rs=new Ho(s=>i_(s),r_),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new W5(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function n9(t,e,n,i){return new t9(t,e,n,i)}async function uk(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ue();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function i9(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,d=h.keys();let f=D.resolve();return d.forEach(p=>{f=f.next(()=>u.getEntry(l,p)).next(y=>{const _=c.docVersions.get(p);Ae(_!==null),y.version.compareTo(_)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ue();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function hk(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function r9(t,e){const n=re(t),i=e.snapshotVersion;let r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;const a=[];e.targetChanges.forEach((u,h)=>{const d=r.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(zt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(h,f),function(y,_,g){return y.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(d,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let l=Ci(),c=ue();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(s9(s,o,e.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!i.isEqual(te.min())){const u=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return D.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=r,s))}function s9(t,e,n){let i=ue(),r=ue();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=Ci();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(te.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):F("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:r}})}function o9(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function a9(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(s=>s?(r=s,D.resolve(r)):n.Qr.allocateTargetId(i).next(o=>(r=new nr(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}async function Jg(t,e,n){const i=re(t),r=i.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!_c(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)}function B1(t,e,n){const i=re(t);let r=te.min(),s=ue();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=re(l),d=h.rs.get(u);return d!==void 0?D.resolve(h.ns.get(d)):h.Qr.getTargetData(c,u)}(i,o,ti(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ts.getDocumentsMatchingQuery(o,e,n?r:te.min(),n?s:ue())).next(a=>(l9(i,Zj(e),a),{documents:a,hs:s})))}function l9(t,e,n){let i=t.ss.get(e)||te.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.ss.set(e,i)}class W1{constructor(){this.activeTargetIds=s5()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class c9{constructor(){this.no=new W1,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new W1,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu=null;function op(){return fu===null?fu=function(){return 268435456+Math.round(2147483648*Math.random())}():fu++,"0x"+fu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt="WebChannelConnection";class f9 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=i+"://"+n.host,this.po=`projects/${r}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get wo(){return!1}So(n,i,r,s,o){const a=op(),l=this.bo(n,i.toUriEncodedString());F("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,s,o),this.Co(n,l,c,r).then(u=>(F("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw bo("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",r),u})}vo(n,i,r,s,o,a){return this.So(n,i,r,s,o)}Do(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}bo(n,i){const r=h9[n];return`${this.fo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,i,r){const s=op();return new Promise((o,a)=>{const l=new vj;l.setWithCredentials(!0),l.listenOnce(yj.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case rp.NO_ERROR:const u=l.getResponseJson();F(Rt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case rp.TIMEOUT:F(Rt,`RPC '${e}' ${s} timed out`),a(new $(C.DEADLINE_EXCEEDED,"Request time out"));break;case rp.HTTP_ERROR:const h=l.getStatus();if(F(Rt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const p=function(_){const g=_.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(g)>=0?g:C.UNKNOWN}(f.status);a(new $(p,f.message))}else a(new $(C.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new $(C.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{F(Rt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);F(Rt,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Fo(e,n,i){const r=op(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gj(),a=mj(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const u=s.join("");F(Rt,`Creating RPC '${e}' stream ${r}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,f=!1;const p=new d9({lo:_=>{f?F(Rt,`Not sending because RPC '${e}' stream ${r} is closed:`,_):(d||(F(Rt,`Opening RPC '${e}' stream ${r} transport.`),h.open(),d=!0),F(Rt,`RPC '${e}' stream ${r} sending:`,_),h.send(_))},ho:()=>h.close()}),y=(_,g,m)=>{_.listen(g,v=>{try{m(v)}catch(x){setTimeout(()=>{throw x},0)}})};return y(h,uu.EventType.OPEN,()=>{f||F(Rt,`RPC '${e}' stream ${r} transport opened.`)}),y(h,uu.EventType.CLOSE,()=>{f||(f=!0,F(Rt,`RPC '${e}' stream ${r} transport closed`),p.Vo())}),y(h,uu.EventType.ERROR,_=>{f||(f=!0,bo(Rt,`RPC '${e}' stream ${r} transport errored:`,_),p.Vo(new $(C.UNAVAILABLE,"The operation could not be completed")))}),y(h,uu.EventType.MESSAGE,_=>{var g;if(!f){const m=_.data[0];Ae(!!m);const v=m,x=v.error||((g=v[0])===null||g===void 0?void 0:g.error);if(x){F(Rt,`RPC '${e}' stream ${r} received error:`,x);const T=x.status;let w=function(A){const M=et[A];if(M!==void 0)return ek(M)}(T),S=x.message;w===void 0&&(w=C.INTERNAL,S="Unknown error status: "+T+" with message "+x.message),f=!0,p.Vo(new $(w,S)),h.close()}else F(Rt,`RPC '${e}' stream ${r} received:`,m),p.mo(m)}}),y(a,_j.STAT_EVENT,_=>{_.stat===w1.PROXY?F(Rt,`RPC '${e}' stream ${r} detected buffering proxy`):_.stat===w1.NOPROXY&&F(Rt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}}function ap(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(t){return new S5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n,i=1e3,r=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=i,this.xo=r,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),i=Math.max(0,Date.now()-this.Lo),r=Math.max(0,n-i);r>0&&F("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n,i,r,s,o,a,l){this.oi=e,this.$o=i,this.Uo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new dk(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===C.RESOURCE_EXHAUSTED?(ri(n.toString()),ri("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===C.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Wo===n&&this.o_(i,r)},i=>{e(()=>{const r=new $(C.UNKNOWN,"Fetching auth token failed: "+i.message);return this.__(r)})})}o_(e,n){const i=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{i(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(r=>{i(()=>this.__(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class p9 extends fk{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=k5(this.serializer,e),i=function(s){if(!("targetChange"in s))return te.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?ii(o.readTime):te.min()}(e);return this.listener.u_(n,i)}c_(e){const n={};n.database=Xg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Hg(l)?{documents:R5(s,l)}:{query:C5(s,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ik(s,o.resumeToken);const c=Gg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(te.min())>0){a.readTime=$h(s,o.snapshotVersion.toTimestamp());const c=Gg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=M5(this.serializer,e);i&&(n.labels=i),this.t_(n)}l_(e){const n={};n.database=Xg(this.serializer),n.removeTarget=e,this.t_(n)}}class g9 extends fk{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=A5(e.writeResults,e.commitTime),i=ii(e.commitTime);return this.listener.T_(i,n)}return Ae(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Xg(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>P5(this.serializer,i))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9 extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new $(C.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,Qg(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(C.UNKNOWN,s.toString())})}vo(e,n,i,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Qg(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(C.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class y9{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(ri(n),this.g_=!1):F("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{i.enqueueAndForget(async()=>{ks(this)&&(F("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=re(l);c.v_.add(4),await xc(c),c.x_.set("Unknown"),c.v_.delete(4),await Wd(c)}(this))})}),this.x_=new y9(i,r)}}async function Wd(t){if(ks(t))for(const e of t.F_)await e(!0)}async function xc(t){for(const e of t.F_)await e(!1)}function pk(t,e){const n=re(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),f_(n)?d_(n):qo(n).Jo()&&h_(n,e))}function gk(t,e){const n=re(t),i=qo(n);n.C_.delete(e),i.Jo()&&mk(n,e),n.C_.size===0&&(i.Jo()?i.Xo():ks(n)&&n.x_.set("Unknown"))}function h_(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qo(t).c_(e)}function mk(t,e){t.O_.Oe(e),qo(t).l_(e)}function d_(t){t.O_=new w5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),qo(t).start(),t.x_.p_()}function f_(t){return ks(t)&&!qo(t).Ho()&&t.C_.size>0}function ks(t){return re(t).v_.size===0}function yk(t){t.O_=void 0}async function v9(t){t.C_.forEach((e,n)=>{h_(t,e)})}async function w9(t,e){yk(t),f_(t)?(t.x_.S_(e),d_(t)):t.x_.set("Unknown")}async function E9(t,e,n){if(t.x_.set("Online"),e instanceof nk&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.C_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.C_.delete(a),r.O_.removeTarget(a))}(t,e)}catch(i){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Bh(t,i)}else if(e instanceof $u?t.O_.$e(e):e instanceof tk?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(te.min()))try{const i=await hk(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.C_.get(c);u&&s.C_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.C_.get(l);if(!u)return;s.C_.set(l,u.withResumeToken(zt.EMPTY_BYTE_STRING,u.snapshotVersion)),mk(s,l);const h=new nr(u.target,l,c,u.sequenceNumber);h_(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){F("RemoteStore","Failed to raise snapshot:",i),await Bh(t,i)}}async function Bh(t,e,n){if(!_c(e))throw e;t.v_.add(1),await xc(t),t.x_.set("Offline"),n||(n=()=>hk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{F("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await Wd(t)})}function _k(t,e){return e().catch(n=>Bh(t,n,e))}async function Hd(t){const e=re(t),n=xr(e);let i=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;x9(e);)try{const r=await o9(e.localStore,i);if(r===null){e.D_.length===0&&n.Xo();break}i=r.batchId,T9(e,r)}catch(r){await Bh(e,r)}vk(e)&&wk(e)}function x9(t){return ks(t)&&t.D_.length<10}function T9(t,e){t.D_.push(e);const n=xr(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function vk(t){return ks(t)&&!xr(t).Ho()&&t.D_.length>0}function wk(t){xr(t).start()}async function S9(t){xr(t).d_()}async function I9(t){const e=xr(t);for(const n of t.D_)e.I_(n.mutations)}async function b9(t,e,n){const i=t.D_.shift(),r=s_.from(i,e,n);await _k(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Hd(t)}async function k9(t,e){e&&xr(t).P_&&await async function(i,r){if(function(o){return y5(o)&&o!==C.ABORTED}(r.code)){const s=i.D_.shift();xr(i).Zo(),await _k(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Hd(i)}}(t,e),vk(t)&&wk(t)}async function q1(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");const i=ks(n);n.v_.add(3),await xc(n),i&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await Wd(n)}async function P9(t,e){const n=re(t);e?(n.v_.delete(2),await Wd(n)):e||(n.v_.add(2),await xc(n),n.x_.set("Unknown"))}function qo(t){return t.N_||(t.N_=function(n,i,r){const s=re(n);return s.R_(),new p9(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Po:v9.bind(null,t),To:w9.bind(null,t),u_:E9.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),f_(t)?d_(t):t.x_.set("Unknown")):(await t.N_.stop(),yk(t))})),t.N_}function xr(t){return t.B_||(t.B_=function(n,i,r){const s=re(n);return s.R_(),new g9(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Po:S9.bind(null,t),To:k9.bind(null,t),E_:I9.bind(null,t),T_:b9.bind(null,t)}),t.F_.push(async e=>{e?(t.B_.Zo(),await Hd(t)):(await t.B_.stop(),t.D_.length>0&&(F("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.B_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new p_(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(C.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function g_(t,e){if(ri("AsyncQueue",`${e}: ${t}`),_c(t))return new $(C.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.comparator=e?(n,i)=>e(n,i)||q.comparator(n.key,i.key):(n,i)=>q.comparator(n.key,i.key),this.keyedMap=Da(),this.sortedSet=new We(this.comparator)}static emptySet(e){return new uo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof uo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new uo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(){this.L_=new We(q.comparator)}track(e){const n=e.doc.key,i=this.L_.get(n);i?e.type!==0&&i.type===3?this.L_=this.L_.insert(n,e):e.type===3&&i.type!==1?this.L_=this.L_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.L_=this.L_.remove(n):e.type===1&&i.type===2?this.L_=this.L_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):Z():this.L_=this.L_.insert(n,e)}k_(){const e=[];return this.L_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Co{constructor(e,n,i,r,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Co(e,n,uo.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9{constructor(){this.q_=void 0,this.Q_=[]}}class R9{constructor(){this.queries=new Ho(e=>Ub(e),Fd),this.onlineState="Unknown",this.K_=new Set}}async function C9(t,e){const n=re(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new A9),r)try{s.q_=await n.onListen(i)}catch(o){const a=g_(o,`Initialization of query '${Ns(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&m_(n)}async function D9(t,e){const n=re(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),r=s.Q_.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function M9(t,e){const n=re(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.Q_)a.W_(r)&&(i=!0);o.q_=r}}i&&m_(n)}function O9(t,e,n){const i=re(t),r=i.queries.get(e);if(r)for(const s of r.Q_)s.onError(n);i.queries.delete(e)}function m_(t){t.K_.forEach(e=>{e.next()})}class N9{constructor(e,n,i){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=i||{}}W_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Co(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;const i=n!=="Offline";return(!this.options.Z_||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=Co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.key=e}}class xk{constructor(e){this.key=e}}class L9{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=ue(),this.mutatedKeys=ue(),this.ua=zb(e),this.ca=new uo(this.ua)}get la(){return this.oa}ha(e,n){const i=n?n.Pa:new K1,r=n?n.ca:this.ca;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,h)=>{const d=r.get(u),f=jd(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let _=!1;d&&f?d.data.isEqual(f.data)?p!==y&&(i.track({type:3,doc:f}),_=!0):this.Ia(d,f)||(i.track({type:2,doc:f}),_=!0,(l&&this.ua(f,l)>0||c&&this.ua(f,c)<0)&&(a=!0)):!d&&f?(i.track({type:0,doc:f}),_=!0):d&&!f&&(i.track({type:1,doc:d}),_=!0,(l||c)&&(a=!0)),_&&(f?(o=o.add(f),s=y?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{ca:o,Pa:i,Xi:a,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort((u,h)=>function(f,p){const y=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return y(f)-y(p)}(u.type,h.type)||this.ua(u.doc,h.doc)),this.Ta(i),r=r!=null&&r;const a=n&&!r?this.Ea():[],l=this.aa.size===0&&this.current&&!r?1:0,c=l!==this._a;return this._a=l,o.length!==0||c?{snapshot:new Co(this.query,e.ca,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new K1,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=ue(),this.ca.forEach(i=>{this.Aa(i.key)&&(this.aa=this.aa.add(i.key))});const n=[];return e.forEach(i=>{this.aa.has(i)||n.push(new xk(i))}),this.aa.forEach(i=>{e.has(i)||n.push(new Ek(i))}),n}Ra(e){this.oa=e.hs,this.aa=ue();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return Co.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class V9{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class F9{constructor(e){this.key=e,this.ma=!1}}class j9{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Ho(a=>Ub(a),Fd),this.pa=new Map,this.ya=new Set,this.wa=new We(q.comparator),this.Sa=new Map,this.ba=new l_,this.Da={},this.Ca=new Map,this.va=Ro.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function U9(t,e){const n=Y9(t);let i,r;const s=n.ga.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.Va();else{const o=await a9(n.localStore,ti(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=await z9(n,e,i,a==="current",o.resumeToken),n.isPrimaryClient&&pk(n.remoteStore,o)}return r}async function z9(t,e,n,i,r){t.Ma=(h,d,f)=>async function(y,_,g,m){let v=_.view.ha(g);v.Xi&&(v=await B1(y.localStore,_.query,!1).then(({documents:S})=>_.view.ha(S,v)));const x=m&&m.targetChanges.get(_.targetId),T=m&&m.targetMismatches.get(_.targetId)!=null,w=_.view.applyChanges(v,y.isPrimaryClient,x,T);return Q1(y,_.targetId,w.da),w.snapshot}(t,h,d,f);const s=await B1(t.localStore,e,!0),o=new L9(e,s.hs),a=o.ha(s.documents),l=Ec.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);Q1(t,n,c.da);const u=new V9(e,n,o);return t.ga.set(e,u),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),c.snapshot}async function $9(t,e){const n=re(t),i=n.ga.get(e),r=n.pa.get(i.targetId);if(r.length>1)return n.pa.set(i.targetId,r.filter(s=>!Fd(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Jg(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),gk(n.remoteStore,i.targetId),Zg(n,i.targetId)}).catch(yc)):(Zg(n,i.targetId),await Jg(n.localStore,i.targetId,!0))}async function B9(t,e,n){const i=X9(t);try{const r=await function(o,a){const l=re(o),c=lt.now(),u=a.reduce((f,p)=>f.add(p.key),ue());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=Ci(),y=ue();return l.os.getEntries(f,u).next(_=>{p=_,p.forEach((g,m)=>{m.isValidDocument()||(y=y.add(g))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,p)).next(_=>{h=_;const g=[];for(const m of a){const v=d5(m,h.get(m.key).overlayedDocument);v!=null&&g.push(new bs(m.key,v,Cb(v.value.mapValue),ni.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,g,a)}).next(_=>{d=_;const g=_.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(f,_.batchId,g)})}).then(()=>({batchId:d.batchId,changes:Bb(h)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Da[o.currentUser.toKey()];c||(c=new We(Ee)),c=c.insert(a,l),o.Da[o.currentUser.toKey()]=c}(i,r.batchId,n),await Tc(i,r.changes),await Hd(i.remoteStore)}catch(r){const s=g_(r,"Failed to persist write");n.reject(s)}}async function Tk(t,e){const n=re(t);try{const i=await r9(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Sa.get(s);o&&(Ae(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.ma=!0:r.modifiedDocuments.size>0?Ae(o.ma):r.removedDocuments.size>0&&(Ae(o.ma),o.ma=!1))}),await Tc(n,i,e)}catch(i){await yc(i)}}function G1(t,e,n){const i=re(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.ga.forEach((s,o)=>{const a=o.view.U_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=re(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const d of h.Q_)d.U_(a)&&(c=!0)}),c&&m_(l)}(i.eventManager,e),r.length&&i.fa.u_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function W9(t,e,n){const i=re(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Sa.get(e),s=r&&r.key;if(s){let o=new We(q.comparator);o=o.insert(s,Ot.newNoDocument(s,te.min()));const a=ue().add(s),l=new $d(te.min(),new Map,new We(Ee),o,a);await Tk(i,l),i.wa=i.wa.remove(s),i.Sa.delete(e),y_(i)}else await Jg(i.localStore,e,!1).then(()=>Zg(i,e,n)).catch(yc)}async function H9(t,e){const n=re(t),i=e.batch.batchId;try{const r=await i9(n.localStore,e);Ik(n,i,null),Sk(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Tc(n,r)}catch(r){await yc(r)}}async function q9(t,e,n){const i=re(t);try{const r=await function(o,a){const l=re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Ae(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,e);Ik(i,e,n),Sk(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Tc(i,r)}catch(r){await yc(r)}}function Sk(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function Ik(t,e,n){const i=re(t);let r=i.Da[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Da[i.currentUser.toKey()]=r}}function Zg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.pa.get(e))t.ga.delete(i),n&&t.fa.xa(i,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(i=>{t.ba.containsKey(i)||bk(t,i)})}function bk(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);n!==null&&(gk(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),y_(t))}function Q1(t,e,n){for(const i of n)i instanceof Ek?(t.ba.addReference(i.key,e),K9(t,i)):i instanceof xk?(F("SyncEngine","Document no longer in limbo: "+i.key),t.ba.removeReference(i.key,e),t.ba.containsKey(i.key)||bk(t,i.key)):Z()}function K9(t,e){const n=e.key,i=n.path.canonicalString();t.wa.get(n)||t.ya.has(i)||(F("SyncEngine","New document in limbo: "+n),t.ya.add(i),y_(t))}function y_(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new q(Me.fromString(e)),i=t.va.next();t.Sa.set(i,new F9(n)),t.wa=t.wa.insert(n,i),pk(t.remoteStore,new nr(ti(Fb(n.path)),i,"TargetPurposeLimboResolution",Zy._e))}}async function Tc(t,e,n){const i=re(t),r=[],s=[],o=[];i.ga.isEmpty()||(i.ga.forEach((a,l)=>{o.push(i.Ma(l,e,n).then(c=>{if((c||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){r.push(c);const u=u_.Ki(l.targetId,c);s.push(u)}}))}),await Promise.all(o),i.fa.u_(r),await async function(l,c){const u=re(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>D.forEach(c,d=>D.forEach(d.qi,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>D.forEach(d.Qi,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!_c(h))throw h;F("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const f=u.ns.get(d),p=f.snapshotVersion,y=f.withLastLimboFreeSnapshotVersion(p);u.ns=u.ns.insert(d,y)}}}(i.localStore,s))}async function G9(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());const i=await uk(n.localStore,e);n.currentUser=e,function(s,o){s.Ca.forEach(a=>{a.forEach(l=>{l.reject(new $(C.CANCELLED,o))})}),s.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Tc(n,i.us)}}function Q9(t,e){const n=re(t),i=n.Sa.get(e);if(i&&i.ma)return ue().add(i.key);{let r=ue();const s=n.pa.get(e);if(!s)return r;for(const o of s){const a=n.ga.get(o);r=r.unionWith(a.view.la)}return r}}function Y9(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Q9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=W9.bind(null,e),e.fa.u_=M9.bind(null,e.eventManager),e.fa.xa=O9.bind(null,e.eventManager),e}function X9(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=H9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=q9.bind(null,e),e}class Y1{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Bd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return n9(this.persistence,new e9,e.initialUser,this.serializer)}createPersistence(e){return new X5(c_.Hr,this.serializer)}createSharedClientState(e){return new c9}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class J9{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>G1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=G9.bind(null,this.syncEngine),await P9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new R9}()}createDatastore(e){const n=Bd(e.databaseInfo.databaseId),i=function(s){return new f9(s)}(e.databaseInfo);return function(s,o,a,l){return new m9(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new _9(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>G1(this.syncEngine,n,0),function(){return H1.D()?new H1:new u9}())}createSyncEngine(e,n){return function(r,s,o,a,l,c,u){const h=new j9(r,s,o,a,l,c);return u&&(h.Fa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(i){const r=re(i);F("RemoteStore","RemoteStore shutting down."),r.v_.add(5),await xc(r),r.M_.shutdown(),r.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):ri("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Dt.UNAUTHENTICATED,this.clientId=Pb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{F("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(F("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new $(C.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=g_(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function lp(t,e){t.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await uk(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function X1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await nU(t);F("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>q1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>q1(e.remoteStore,r)),t._onlineComponents=e}function tU(t){return t.name==="FirebaseError"?t.code===C.FAILED_PRECONDITION||t.code===C.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function nU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{await lp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!tU(n))throw n;bo("Error using user provided cache. Falling back to memory cache: "+n),await lp(t,new Y1)}}else F("FirestoreClient","Using default OfflineComponentProvider"),await lp(t,new Y1);return t._offlineComponents}async function kk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),await X1(t,t._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),await X1(t,new J9))),t._onlineComponents}function iU(t){return kk(t).then(e=>e.syncEngine)}async function rU(t){const e=await kk(t),n=e.eventManager;return n.onListen=U9.bind(null,e.syncEngine),n.onUnlisten=$9.bind(null,e.syncEngine),n}function sU(t,e,n={}){const i=new Si;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new Z9({next:d=>{o.enqueueAndForget(()=>D9(s,h)),d.fromCache&&l.source==="server"?c.reject(new $(C.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new N9(a,u,{includeMetadataChanges:!0,Z_:!0});return C9(s,h)}(await rU(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t,e,n){if(!n)throw new $(C.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function oU(t,e,n,i){if(e===!0&&i===!0)throw new $(C.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Z1(t){if(!q.isDocumentKey(t))throw new $(C.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function eE(t){if(q.isDocumentKey(t))throw new $(C.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function Do(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qd(t);throw new $(C.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new $(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pk((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tE({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new $(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new $(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tE(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Ej;switch(i.type){case"firstParty":return new Ij(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new $(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=J1.get(n);i&&(F("ComponentProvider","Removing Datastore"),J1.delete(n),i.terminate())}(this),Promise.resolve()}}function aU(t,e,n,i={}){var r;const s=(t=Do(t,Kd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Dt.MOCK_USER;else{a=T2(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new $(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Dt(c)}t._authCredentials=new xj(new kb(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ko(this.firestore,e,this._query)}}class an{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}}class gr extends Ko{constructor(e,n,i){super(e,n,Fb(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new q(e))}withConverter(e){return new gr(this.firestore,e,this._path)}}function Rk(t,e,...n){if(t=jt(t),Ak("collection","path",e),t instanceof Kd){const i=Me.fromString(e,...n);return eE(i),new gr(t,null,i)}{if(!(t instanceof an||t instanceof gr))throw new $(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Me.fromString(e,...n));return eE(i),new gr(t.firestore,null,i)}}function Ck(t,e,...n){if(t=jt(t),arguments.length===1&&(e=Pb.newId()),Ak("doc","path",e),t instanceof Kd){const i=Me.fromString(e,...n);return Z1(i),new an(t,null,new q(i))}{if(!(t instanceof an||t instanceof gr))throw new $(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Me.fromString(e,...n));return Z1(i),new an(t.firestore,t instanceof gr?t.converter:null,new q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new dk(this,"async_queue_retry"),this._u=()=>{const n=ap();n&&F("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=ap();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const n=ap();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const n=new Si;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!_c(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(e){const n=this.Xa.then(()=>(this.iu=!0,e().catch(i=>{this.ru=i,this.iu=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw ri("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.iu=!1,i))));return this.Xa=n,n}enqueueAfterDelay(e,n,i){this.au(),this.ou.indexOf(e)>-1&&(n=0);const r=p_.createAndSchedule(this,e,n,i,s=>this.lu(s));return this.nu.push(r),r}au(){this.ru&&Z()}verifyOperationInProgress(){}async hu(){let e;do e=this.Xa,await e;while(e!==this.Xa)}Pu(e){for(const n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const n=this.nu.indexOf(e);this.nu.splice(n,1)}}class Gd extends Kd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new lU}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ok(this),this._firestoreClient.terminate()}}function Dk(t,e){const n=typeof t=="object"?t:KT(),i=typeof t=="string"?t:e||"(default)",r=Zm(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=E2("firestore");s&&aU(r,...s)}return r}function Mk(t){return t._firestoreClient||Ok(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Ok(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,c,u){return new jj(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Pk(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new eU(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mo(zt.fromBase64String(e))}catch(n){throw new $(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Mo(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU=/^__.*__$/;class uU{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new bs(e,this.data,this.fieldMask,n,this.fieldTransforms):new wc(e,this.data,n,this.fieldTransforms)}}function Lk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class w_{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Eu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new w_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Au({path:i,Vu:!1});return r.mu(e),r}fu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Au({path:i,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Wh(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(Lk(this.du)&&cU.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class hU{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Bd(e)}Su(e,n,i,r=!1){return new w_({du:e,methodName:n,wu:i,path:xt.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function E_(t){const e=t._freezeSettings(),n=Bd(t._databaseId);return new hU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Vk(t,e,n,i,r,s={}){const o=t.Su(s.merge||s.mergeFields?2:0,e,n,r);Uk("Data must be an object, but it was:",o,i);const a=Fk(i,o);let l,c;if(s.merge)l=new Dn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=fU(e,h,n);if(!o.contains(d))throw new $(C.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);gU(u,d)||u.push(d)}l=new Dn(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new uU(new _n(a),l,c)}function dU(t,e,n,i=!1){return x_(n,t.Su(i?4:3,e))}function x_(t,e){if(jk(t=jt(t)))return Uk("Unsupported field value:",e,t),Fk(t,e);if(t instanceof Nk)return function(i,r){if(!Lk(r.du))throw r.pu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.pu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=x_(a,r.gu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=jt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return o5(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=lt.fromDate(i);return{timestampValue:$h(r.serializer,s)}}if(i instanceof lt){const s=new lt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:$h(r.serializer,s)}}if(i instanceof v_)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Mo)return{bytesValue:ik(r.serializer,i._byteString)};if(i instanceof an){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:a_(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.pu(`Unsupported field value: ${qd(i)}`)}(t,e)}function Fk(t,e){const n={};return Ab(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wo(t,(i,r)=>{const s=x_(r,e.Ru(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function jk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lt||t instanceof v_||t instanceof Mo||t instanceof an||t instanceof Nk)}function Uk(t,e,n){if(!jk(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=qd(n);throw i==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+i)}}function fU(t,e,n){if((e=jt(e))instanceof __)return e._internalPath;if(typeof e=="string")return zk(t,e);throw Wh("Field path arguments must be of type string or ",t,!1,void 0,n)}const pU=new RegExp("[~\\*/\\[\\]]");function zk(t,e,n){if(e.search(pU)>=0)throw Wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new __(...e.split("."))._internalPath}catch{throw Wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wh(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new $(C.INVALID_ARGUMENT,a+t+l)}function gU(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(T_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mU extends $k{data(){return super.data()}}function T_(t,e){return typeof e=="string"?zk(t,e):e instanceof __?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class S_{}class _U extends S_{}function vU(t,e,...n){let i=[];e instanceof S_&&i.push(e),i=i.concat(n),function(s){const o=s.filter(l=>l instanceof I_).length,a=s.filter(l=>l instanceof Qd).length;if(o>1||o>0&&a>0)throw new $(C.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Qd extends _U{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Qd(e,n,i)}_apply(e){const n=this._parse(e);return Bk(e._query,n),new Ko(e.firestore,e.converter,qg(e._query,n))}_parse(e){const n=E_(e.firestore);return function(s,o,a,l,c,u,h){let d;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new $(C.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){iE(h,u);const f=[];for(const p of h)f.push(nE(l,s,p));d={arrayValue:{values:f}}}else d=nE(l,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||iE(h,u),d=dU(a,o,h,u==="in"||u==="not-in");return it.create(c,u,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wU(t,e,n){const i=e,r=T_("where",t);return Qd._create(r,i,n)}class I_ extends S_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new I_(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:jn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)Bk(o,l),o=qg(o,l)}(e._query,n),new Ko(e.firestore,e.converter,qg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function nE(t,e,n){if(typeof(n=jt(n))=="string"){if(n==="")throw new $(C.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jb(e)&&n.indexOf("/")!==-1)throw new $(C.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Me.fromString(n));if(!q.isDocumentKey(i))throw new $(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return b1(t,new q(i))}if(n instanceof an)return b1(t,n._key);throw new $(C.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qd(n)}.`)}function iE(t,e){if(!Array.isArray(t)||t.length===0)throw new $(C.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Bk(t,e){const n=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(C.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(C.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class EU{convertValue(e,n="none"){switch(Es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Wo(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new v_(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=t_(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp($l(e));default:return null}}convertTimestamp(e){const n=Er(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Me.fromString(e);Ae(ck(i));const r=new Bl(i.get(1),i.get(3)),s=new q(i.popFirst(5));return r.isEqual(n)||ri(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xU extends $k{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(T_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Bu extends xU{data(e={}){return super.data(e)}}class TU{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new pu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Bu(this._firestore,this._userDataWriter,i.key,i,new pu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new Bu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new pu(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Bu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new pu(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:SU(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function SU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}class IU extends EU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,n)}}function Hk(t){t=Do(t,Ko);const e=Do(t.firestore,Gd),n=Mk(e),i=new IU(e);return yU(t._query),sU(n,t._query).then(r=>new TU(e,i,t,r))}function bU(t,e,n){t=Do(t,an);const i=Do(t.firestore,Gd),r=Wk(t.converter,e,n);return qk(i,[Vk(E_(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,ni.none())])}function kU(t,e){const n=Do(t.firestore,Gd),i=Ck(t),r=Wk(t.converter,e);return qk(n,[Vk(E_(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,ni.exists(!1))]).then(()=>i)}function qk(t,e){return function(i,r){const s=new Si;return i.asyncQueue.enqueueAndForget(async()=>B9(await iU(i),r,s)),s.promise}(Mk(t),e)}(function(e,n=!0){(function(r){Bo=r})(jo),wo(new fs("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new Gd(new Tj(i.getProvider("auth-internal")),new kj(i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new $(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bl(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),fr(E1,"4.4.2",e),fr(E1,"4.4.2","esm2017")})();function PU(){const[t,e]=P.useState({}),[n,i]=P.useState(""),[r,s]=P.useState(""),[o,a]=P.useState(""),[l,c]=P.useState(!1),[u,h]=P.useState([]),d=document.querySelectorAll(".botones"),f=Kn();function p(){return Math.floor(Math.random()*1025)+1}function y(){c(!0);const T=p();return fetch(`https://pokeapi.co/api/v2/pokemon/${T}/`).then(w=>w.json()).then(w=>(c(!1),w))}function _(T){for(let w=T.length-1;w>0;w--){const S=Math.floor(Math.random()*(w+1));[T[w],T[S]]=[T[S],T[w]]}return T}function g(){const T=document.getElementById("pokemon-adivinar");T.style.filter="brightness(0%)",a(0);const w=[];for(let S=0;S<3;S++)w.push(y());Promise.all(w).then(S=>{let b=[];S.forEach(A=>{b.push(A.name)}),e(S[Math.floor(Math.random()*3)]),h(_(b)),console.log(u)}),d.forEach(S=>{S.style.display=""}),i(""),a(0)}function m(T){const w=document.getElementById("pokemon-adivinar");T==t.name?(d.forEach(S=>{S.style.display="none"}),w.style.filter="brightness(100%)",i("Correcto!"),s(r+1),setTimeout(()=>{g()},2e3)):(d.forEach(S=>{S.style.display="none"}),w.style.filter="brightness(100%)",x(r,f.currentUser.uid,f.currentUser.displayName),i("Incorrecto!"),a(r),s(0))}function v(){new Audio(`https://raw.githubusercontent.com/PokeAPI/cries/main/cries/pokemon/latest/${t.id}.ogg`).play()}async function x(T,w,S){const b=Dk(),A=Rk(b,"leaderboard"),M=vU(A,wU("uid","==",w)),U=await Hk(M);let H=0,ne=null;if(U.forEach(ve=>{H=ve.data().puntuacion,ne=ve.id}),T>H){let ve={puntuacion:T,uid:w,userName:S};if(ne){const se=Ck(b,"leaderboard",ne);bU(se,ve,{merge:!0}).then(()=>{console.log("Puntuacin actualizada correctamente")}).catch(fe=>{console.error("Error al actualizar ",fe)})}else kU(A,ve).then(se=>{console.log("Primera puntuacion:",se.id)}).catch(se=>{console.error("Error al aadir la primera puntuacion: ",se)})}}return P.useEffect(()=>{s(0),g()},[]),E.jsx(E.Fragment,{children:E.jsx("main",{className:"container",children:E.jsxs("div",{className:"juego",children:[E.jsxs("div",{className:"container-enunciado",children:[E.jsx("h1",{children:"Juego Adivinar"}),E.jsx("p",{children:"Elige una de las 3 opciones e intenta adivinar el Pokmon!"})]}),E.jsx("article",{id:"preload",children:l&&E.jsx("div",{className:"o-pokeball c-loader u-tada"})}),E.jsxs("div",{className:"container-juego",children:[t&&E.jsx("img",{id:"pokemon-adivinar",src:`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${t.id}.png`,alt:""}),E.jsxs("h3",{children:["Puntuacin: ",r]}),o&&E.jsxs("h3",{children:["Puntuacin Partida: ",o]}),n=="Correcto!"&&E.jsxs("div",{children:[E.jsx("h3",{className:"correcto",id:"respuesta",children:n}),E.jsxs("h2",{children:["Nombre Pokemon: ",E.jsx("span",{className:"name",children:t.name})]})]}),n=="Incorrecto!"&&E.jsxs("div",{children:[E.jsx("h3",{className:"incorrecto",id:"respuesta",children:n}),E.jsxs("h2",{children:["Nombre Pokemon: ",E.jsx("span",{className:"name",children:t.name})]}),E.jsxs("div",{className:"botones-opciones",id:"botonjugar",children:[E.jsx("div",{className:"foto-perder",children:E.jsx("img",{src:"./img/pikachullorando.png",alt:""})}),E.jsx("button",{className:"botones",onClick:g,children:"Nueva Partida"})]})]}),E.jsxs("p",{className:"botones-opciones",children:["Si te sirve como ayuda, te dejo una pequea pista...",E.jsx("button",{id:"playButton",onClick:v,children:E.jsx("p",{children:"Reproducir"})})]})]}),E.jsx("div",{className:"botones-opciones",children:u.map((T,w)=>E.jsx("button",{className:"botones",onClick:()=>m(T),children:E.jsx("p",{className:"name",children:T})},w))})]})})})}var AU="firebase",RU="10.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr(AU,RU,"app");const CU={apiKey:"AIzaSyBF5Jj4WTOt5w_0WnBXFAWiYb6S9wr3aOU",authDomain:"pokeapi-react-c2918.firebaseapp.com",projectId:"pokeapi-react-c2918",storageBucket:"pokeapi-react-c2918.appspot.com",messagingSenderId:"1066237226293",appId:"1:1066237226293:web:5f2a74f1365da2a095f07c",measurementId:"G-4JW0F97FGR"},DU=qT(CU);Kn(DU);function MU(){const t=Zl(),[e,n]=P.useState(""),[i,r]=P.useState(""),[s,o]=P.useState(""),[a,l]=P.useState(""),c=Kn();function u(){const p=new An,y=Kn();R0(y,p).then(_=>{An.credentialFromResult(_).accessToken;const m=_.user;console.log(m),t("/")}).catch(_=>{_.code,_.message,_.customData.email,An.credentialFromError(_)})}function h(){const p=new Rn,y=Kn();R0(y,p).then(_=>{Rn.credentialFromResult(_).accessToken;const m=_.user;console.log(m),t("/")}).catch(_=>{_.code,_.message,_.customData.email,Rn.credentialFromError(_),_.code==="auth/account-exists-with-different-credential"&&n("Ya existe un usuario con la misma direccin de correo electrnico pero con diferentes credenciales de inicio de sesin."),console.log(_.code)})}function d(p){p.preventDefault(),BM(c,i,s).then(y=>{console.log("Registrado");const _=y.user;_.displayName=a,qM(_,{displayName:a}).then(()=>{t("/")}).catch(g=>{console.log(g)})}).catch(y=>{const _=y.code;y.message,console.log(_),_==="auth/email-already-in-use"&&n("Ya existe un usuario con la misma direccin de correo electrnico.")})}function f(p){p.preventDefault();const y=Kn();WM(y,i,s).then(_=>{const g=_.user;console.log(g),t("/")}).catch(_=>{const g=_.code;_.message,console.log(g),g==="auth/invalid-credential"&&n("La contrasea no es vlida o el usuario no tiene una contrasea.")})}return E.jsx(E.Fragment,{children:E.jsx("div",{className:"container-form",children:E.jsx("div",{className:"wrapper",children:E.jsx("div",{className:"card-switch",children:E.jsxs("label",{className:"switch",children:[E.jsx("input",{type:"checkbox",className:"toggle"}),E.jsx("span",{className:"slider"}),E.jsx("span",{className:"card-side"}),E.jsxs("div",{className:"flip-card__inner",children:[E.jsxs("div",{className:"flip-card__front",children:[E.jsx("div",{className:"title",children:"Log in"}),e&&E.jsx("p",{className:"error-sesion",children:e}),E.jsxs("button",{className:"button-login",onClick:u,children:[E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"24",height:"24",viewBox:"0 0 48 48",children:[E.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),E.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),E.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),E.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),"Continue with Google"]}),E.jsxs("button",{className:"button-login",onClick:h,children:[E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:E.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"Continue with Github"]}),E.jsxs("form",{className:"flip-card__form",action:"",children:[E.jsx("input",{type:"email",className:"flip-card__input",placeholder:"Email",value:i,onChange:p=>r(p.target.value)}),E.jsx("input",{type:"password",className:"flip-card__input",placeholder:"Password",value:s,onChange:p=>o(p.target.value)}),E.jsx("button",{className:"flip-card__btn",onClick:f,children:"Let`s go!"})]})]}),E.jsxs("div",{className:"flip-card__back",children:[E.jsx("div",{className:"title",children:"Sign up"}),e&&E.jsx("p",{className:"error-sesion",children:e}),E.jsxs("form",{className:"flip-card__form",action:"",children:[E.jsx("input",{className:"flip-card__input",placeholder:"Name",type:"text",value:a,onChange:p=>l(p.target.value)}),E.jsx("input",{className:"flip-card__input",placeholder:"Email",type:"email",value:i,onChange:p=>r(p.target.value)}),E.jsx("input",{className:"flip-card__input",placeholder:"Password",type:"password",value:s,onChange:p=>o(p.target.value)}),E.jsx("button",{className:"flip-card__btn",onClick:d,children:"Confirm!"})]})]})]})]})})})})})}function OU(){const[t,e]=P.useState([]),[n,i]=P.useState(null),r=Kn();P.useEffect(()=>{ly(r,o=>{i(o)})},[]),r.currentUser&&(r.currentUser.uid,r.currentUser.displayName);async function s(){const o=Dk(),a=Rk(o,"leaderboard"),l=await Hk(a);let c=[];l.forEach(u=>{let h=u.data();c.push({puntuacion:h.puntuacion,uid:h.uid,userName:h.userName})}),c.sort((u,h)=>h.puntuacion-u.puntuacion),console.log(c),e(c)}return P.useEffect(()=>{s()},[]),E.jsx(E.Fragment,{children:E.jsxs("div",{className:"leaderboard-container",children:[E.jsx("h1",{className:"leaderboard-title",children:"Leaderboard"}),E.jsxs("table",{className:"leaderboard-table",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{className:"leaderboard-header",children:"# Ranking"}),E.jsx("th",{className:"leaderboard-header",children:"Username"}),E.jsx("th",{className:"leaderboard-header",children:"Puntuacin"})]})}),E.jsx("tbody",{children:t.map((o,a)=>E.jsxs("tr",{className:`leaderboard-row ${a===0?"gold":a===1?"silver":a===2?"bronze":""}`,children:[E.jsx("td",{className:"leaderboard-cell",children:a+1}),E.jsx("td",{className:"leaderboard-cell",children:o.userName}),E.jsx("td",{className:"leaderboard-cell",children:o.puntuacion})]},a))})]})]})})}function NU(){return E.jsx(E.Fragment,{children:E.jsx("footer",{className:"site-footer",children:E.jsx("nav",{className:"footer-nav",children:E.jsxs("ul",{className:"footer-menu",children:[E.jsxs("li",{className:"footer-item",children:["Desarrollado por: ",E.jsx("span",{className:"developer",children:"Pablo Lpez Lozano"})]}),E.jsx("li",{children:E.jsx("a",{href:"https://github.com/Pablolopezlo15",children:E.jsxs("button",{class:"Btn-github",children:[E.jsx("svg",{class:"svgIcon",viewBox:"0 0 496 512",height:"1.4em",xmlns:"http://www.w3.org/2000/svg",children:E.jsx("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})}),E.jsx("span",{class:"text",children:"Github"})]})})}),E.jsxs("li",{className:"footer-item",children:[" ",E.jsx("span",{className:"copy-year",children:"2024"})," PokeApi React. Todos los derechos reservados."]})]})})})})}const LU=({Component:t})=>{const[e,n]=P.useState(!1),[i,r]=P.useState(!0);return P.useEffect(()=>{const s=Kn(),o=ly(s,a=>{n(!!a),r(!1)});return()=>o()},[]),i?"Cargando...":e?E.jsx(t,{}):E.jsx(qC,{to:"/login"})};function VU(){return E.jsx("div",{className:"container",children:E.jsxs("div",{div:!0,className:"error404",children:[E.jsx("h1",{children:"No hemos encontrado la pgina!"}),E.jsx("img",{src:"./img/error404.png",alt:""}),E.jsx("h3",{children:"Qu quieres hacer?"}),E.jsx(LT,{})]})})}const FU=e2([{element:E.jsxs(E.Fragment,{children:[E.jsx(aN,{}),E.jsx(NT,{}),E.jsx(NU,{})]}),children:[{path:"/",element:E.jsx(FR,{})},{path:"/pokemon",element:E.jsx(lN,{})},{path:"/pokemon/:id",element:E.jsx(p3,{})},{path:"/juegoAdivinar",element:E.jsx(LU,{Component:PU})},{path:"/login",element:E.jsx(MU,{})},{path:"/leaderboard",element:E.jsx(OU,{})},{path:"*",element:E.jsx(VU,{})}]}]);cp.createRoot(document.getElementById("root")).render(E.jsxs(E.Fragment,{children:[E.jsx(c2,{router:FU}),E.jsx(NT,{})]}));
